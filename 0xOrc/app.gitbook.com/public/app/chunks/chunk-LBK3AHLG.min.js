import{a as qo}from"https://app.gitbook.com/public/app/chunks/chunk-M2XQXILN.min.js";import{a as js}from"https://app.gitbook.com/public/app/chunks/chunk-6STEEV7T.min.js";import{b as Us}from"https://app.gitbook.com/public/app/chunks/chunk-K5T6F6ZW.min.js";import{$ as Wa,$a as us,$b as jo,$c as lc,A as _a,Ab as Vo,Ac as Ks,Ad as tr,Ae as wi,B as Da,Bb as Es,Bc as Cr,Bd as Yr,Be as Jr,C as Xt,Ca as Ya,Cc as Ys,Cd as bi,Ce as qc,Dc as Mt,Dd as Rc,E as We,Eb as _s,Ec as Qs,Fc as Js,Fd as Pt,G as Ro,Gc as Go,Gd as kr,Hb as Ls,Hc as Zs,Ia as Et,Ib as Sr,Ic as Pr,Id as Ee,J as La,Ja as fi,Jc as Rr,Jd as kc,K as Ma,Ka as $t,Kb as As,Kc as ec,Kd as Jo,L as Aa,La as Qa,Lb as zo,Lc as Ce,Ld as Oc,M as Na,Ma as Ja,Mb as Ns,Mc as yi,Md as xc,Nb as Vs,Nc as Xo,Nd as Ic,Ob as zs,Oc as tc,Od as Ec,P as It,Pc as $o,Pd as _c,Qa as Za,Qb as Bo,Qc as Ko,Qd as Zo,R as fr,Ra as es,Rc as N,Rd as Or,Sa as ts,Sc as rc,Sd as Dc,T as ci,Ta as os,Tb as Ge,Tc as oc,Td as Lc,U as Va,Ua as xo,Ud as Nt,V as za,Va as ns,Vb as Dt,Vc as nc,W as Ba,Wc as ic,X as li,Xa as is,Y as ui,Ya as oe,Yb as Ho,Yc as ac,Yd as Mc,Z as Ha,Za as as,Zc as sc,Zd as Xe,_ as ja,_a as mi,_b as wr,_c as cc,a as dr,aa as Fa,ab as ps,ac as Bs,ba as Ua,bb as gs,bc as hi,bd as uc,c as Pa,ca as pi,cb as hs,cd as pc,da as Ga,db as A,dd as dc,de as Ac,e as Ra,ea as qa,ed as fc,ee as Nc,f as ka,fd as mc,fe as Si,gc as Wo,gd as gc,hb as Jt,hd as hc,he as Qr,id as yc,ie as Vc,j as Oa,jd as vc,je as zc,k as xa,kc as Tr,kd as bc,ke as Bc,lb as Cs,lc as Lt,ld as Sc,le as Hc,mb as Ps,md as wc,me as en,nc as Hs,nd as te,ne as jc,oc as $r,od as At,pc as Fo,pd as Tc,q as Ia,qa as Xa,qc as Ws,qd as qe,r as Co,ra as $a,rc as Kr,rd as Yo,s as Ea,sa as Ka,sb as Rs,sc as Fs,sd as vi,ta as ko,td as vt,ub as ks,uc as yt,ud as er,ue as he,vb as Is,vc as Gs,vd as Qo,ve as Wc,wb as Ao,wc as qs,wd as Cc,xb as _t,xc as Uo,xe as Fc,yc as Xs,yd as Pc,ye as Uc,z as qt,za as di,zb as No,zc as $s,ze as Gc}from"https://app.gitbook.com/public/app/chunks/chunk-NFC43IAL.min.js";import{g as Zt,h as Ms}from"https://app.gitbook.com/public/app/chunks/chunk-GIWRZQPT.min.js";import{A as Ad,F as Ts,G as br,I as Os,J as xs,M as ee,N as Ds,b as Fe,g as re,h as ms,i as vr,j as Md,m as Do,p as ys,q as vs,r as gt,s as Ie,t as ht,v as Lo,x as Mo,z as ws}from"https://app.gitbook.com/public/app/chunks/chunk-6N2R75FQ.min.js";import{a as bs,d as Ct,e as Ue,g as k,h as Ss}from"https://app.gitbook.com/public/app/chunks/chunk-2FN4WAEJ.min.js";import{b as Oo,c as rs,g as Xr,h as xe,i as mr,m as Qt,o as ds,p as fs,q as yr,r as R,s as _o,u as Se,v as gi,w as Y,x as D}from"https://app.gitbook.com/public/app/chunks/chunk-L23CJ6WZ.min.js";import{$ as Eo,A as q,B as Ta,C as ct,H as mt,J as Ca,L as ai,N as si,O as W,P as Io,Q as Kt,R as P,S as p,T as f,U as gr,V as ss,X as cs,_ as Yt,aa as hr,ba as ls,h as ge,k as C,l as ba,m as Dd,q as m,r as Sa,s as xt,t as Ld,z as wa}from"https://app.gitbook.com/public/app/chunks/chunk-EV235T2Z.min.js";import{a as _d}from"https://app.gitbook.com/public/app/chunks/chunk-AUVWPKSR.min.js";import{a as To}from"https://app.gitbook.com/public/app/chunks/chunk-3D7BTC3O.min.js";import{a as Po,b as Re}from"https://app.gitbook.com/public/app/chunks/chunk-727HUC7Y.min.js";import{a as h,b as I,e as pr,g as ft,i as T,k as s}from"https://app.gitbook.com/public/app/chunks/chunk-COSHZCUI.min.js";var Tl=ft(oo=>{s();"use strict";_d();var sf=C(),Sl=60103;oo.Fragment=60107;typeof Symbol=="function"&&Symbol.for&&(Oi=Symbol.for,Sl=Oi("react.element"),oo.Fragment=Oi("react.fragment"));var Oi,cf=sf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lf=Object.prototype.hasOwnProperty,uf={key:!0,ref:!0,__self:!0,__source:!0};function wl(t,r,e){var o,n={},i=null,a=null;e!==void 0&&(i=""+e),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(a=r.ref);for(o in r)lf.call(r,o)&&!uf.hasOwnProperty(o)&&(n[o]=r[o]);if(t&&t.defaultProps)for(o in r=t.defaultProps,r)n[o]===void 0&&(n[o]=r[o]);return{$$typeof:Sl,type:t,key:i,ref:a,props:n,_owner:cf.current}}oo.jsx=wl;oo.jsxs=wl});var Pl=ft((qv,Cl)=>{s();"use strict";Cl.exports=Tl()});var ap=ft(Xi=>{s();"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});var Jm={justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"transparent"};Xi.default={container:Jm}});var sp=ft(Mn=>{s();"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var Zm=function(){function t(){this.cropWidth=100,this.cropHeight=100,this.imageWidth=100,this.imageHeight=100,this.panToMove=!0,this.pinchToZoom=!0,this.enableDoubleClickZoom=!0,this.clickDistance=10,this.maxOverflow=100,this.longPressTime=800,this.doubleClickInterval=175,this.style={},this.swipeDownThreshold=230,this.enableSwipeDown=!1,this.enableCenterFocus=!0,this.minScale=.6,this.maxScale=10,this.onClick=function(){},this.onDoubleClick=function(){},this.onLongPress=function(){},this.horizontalOuterRangeOffset=function(){},this.onDragLeft=function(){},this.responderRelease=function(){},this.onMove=function(){},this.layoutChange=function(){},this.onSwipeDown=function(){}}return t}();Mn.Props=Zm;var eg=function(){function t(){this.centerX=.5,this.centerY=.5}return t}();Mn.State=eg});var lp=ft(nr=>{s();"use strict";var tg=nr&&nr.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o])};return function(r,e){t(r,e);function o(){this.constructor=r}r.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),rg=nr&&nr.__assign||Object.assign||function(t){for(var r,e=1,o=arguments.length;e<o;e++){r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};Object.defineProperty(nr,"__esModule",{value:!0});var An=C(),se=(W(),si),og=ap(),cp=sp(),ng=function(t){tg(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=new cp.State,e.lastPositionX=null,e.positionX=0,e.animatedPositionX=new se.Animated.Value(0),e.lastPositionY=null,e.positionY=0,e.animatedPositionY=new se.Animated.Value(0),e.scale=1,e.animatedScale=new se.Animated.Value(1),e.zoomLastDistance=null,e.zoomCurrentDistance=0,e.imagePanResponder=null,e.lastTouchStartTime=0,e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.centerDiffX=0,e.centerDiffY=0,e.lastClickTime=0,e.doubleClickX=0,e.doubleClickY=0,e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.resetScale=function(){e.positionX=0,e.positionY=0,e.scale=1,e.animatedScale.setValue(1)},e.panResponderReleaseResolve=function(){if(e.props.enableSwipeDown&&e.props.swipeDownThreshold&&e.swipeDownOffset>e.props.swipeDownThreshold){e.props.onSwipeDown&&e.props.onSwipeDown();return}if(e.props.enableCenterFocus&&e.scale<1&&(e.scale=1,se.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100}).start()),e.props.imageWidth*e.scale<=e.props.cropWidth&&(e.positionX=0,se.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100}).start()),e.props.imageHeight*e.scale<=e.props.cropHeight&&(e.positionY=0,se.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100}).start()),e.props.imageHeight*e.scale>e.props.cropHeight){var o=(e.props.imageHeight*e.scale-e.props.cropHeight)/2/e.scale;e.positionY<-o?e.positionY=-o:e.positionY>o&&(e.positionY=o),se.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100}).start()}if(e.props.imageWidth*e.scale>e.props.cropWidth){var n=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-n?e.positionX=-n:e.positionX>n&&(e.positionX=n),se.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100}).start()}e.props.enableCenterFocus&&e.scale===1&&(e.positionX=0,e.positionY=0,se.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100}).start(),se.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100}).start()),e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.imageDidMove("onPanResponderRelease")},e}return r.prototype.componentWillMount=function(){var e=this;this.imagePanResponder=se.PanResponder.create({onStartShouldSetPanResponder:function(){return!0},onPanResponderTerminationRequest:function(){return!1},onPanResponderGrant:function(o){if(e.lastPositionX=null,e.lastPositionY=null,e.zoomLastDistance=null,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.lastTouchStartTime=new Date().getTime(),e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.singleClickTimeout&&clearTimeout(e.singleClickTimeout),o.nativeEvent.changedTouches.length>1){var n=(o.nativeEvent.changedTouches[0].pageX+o.nativeEvent.changedTouches[1].pageX)/2;e.centerDiffX=n-e.props.cropWidth/2;var i=(o.nativeEvent.changedTouches[0].pageY+o.nativeEvent.changedTouches[1].pageY)/2;e.centerDiffY=i-e.props.cropHeight/2}if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),e.longPressTimeout=setTimeout(function(){e.isLongPress=!0,e.props.onLongPress&&e.props.onLongPress()},e.props.longPressTime),o.nativeEvent.changedTouches.length<=1)if(new Date().getTime()-e.lastClickTime<(e.props.doubleClickInterval||0)){if(e.lastClickTime=0,e.props.onDoubleClick&&e.props.onDoubleClick(),clearTimeout(e.longPressTimeout),e.doubleClickX=o.nativeEvent.changedTouches[0].pageX,e.doubleClickY=o.nativeEvent.changedTouches[0].pageY,e.isDoubleClick=!0,e.props.enableDoubleClickZoom){if(e.scale>1||e.scale<1)e.scale=1,e.positionX=0,e.positionY=0;else{var a=e.scale;e.scale=2;var c=e.scale-a;e.positionX=(e.props.cropWidth/2-e.doubleClickX)*c/e.scale,e.positionY=(e.props.cropHeight/2-e.doubleClickY)*c/e.scale}e.imageDidMove("centerOn"),se.Animated.parallel([se.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100}),se.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100}),se.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100})]).start()}}else e.lastClickTime=new Date().getTime()},onPanResponderMove:function(o,n){if(!e.isDoubleClick){if(o.nativeEvent.changedTouches.length<=1){var i=n.dx-(e.lastPositionX||0);e.lastPositionX===null&&(i=0);var a=n.dy-(e.lastPositionY||0);if(e.lastPositionY===null&&(a=0),e.lastPositionX=n.dx,e.lastPositionY=n.dy,e.horizontalWholeCounter+=i,e.verticalWholeCounter+=a,(Math.abs(e.horizontalWholeCounter)>5||Math.abs(e.verticalWholeCounter)>5)&&clearTimeout(e.longPressTimeout),e.props.panToMove){if(e.swipeDownOffset===0){if(Math.abs(i)>Math.abs(a)&&(e.isHorizontalWrap=!0),e.props.imageWidth*e.scale>e.props.cropWidth){e.horizontalWholeOuterCounter>0?i<0?e.horizontalWholeOuterCounter>Math.abs(i)?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i:e.horizontalWholeOuterCounter<0&&(i>0?Math.abs(e.horizontalWholeOuterCounter)>i?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i),e.positionX+=i/e.scale;var c=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-c?(e.positionX=-c,e.horizontalWholeOuterCounter+=-1/1e10):e.positionX>c&&(e.positionX=c,e.horizontalWholeOuterCounter+=1/1e10),e.animatedPositionX.setValue(e.positionX)}else e.horizontalWholeOuterCounter+=i;e.horizontalWholeOuterCounter>(e.props.maxOverflow||0)?e.horizontalWholeOuterCounter=e.props.maxOverflow||0:e.horizontalWholeOuterCounter<-(e.props.maxOverflow||0)&&(e.horizontalWholeOuterCounter=-(e.props.maxOverflow||0)),e.horizontalWholeOuterCounter!==0&&e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(e.horizontalWholeOuterCounter)}e.props.imageHeight*e.scale>e.props.cropHeight?(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY)):e.props.enableSwipeDown&&!e.isHorizontalWrap&&(e.swipeDownOffset+=a,e.swipeDownOffset>0&&(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY),e.scale=e.scale-a/1e3,e.animatedScale.setValue(e.scale)))}}else if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),e.props.pinchToZoom){var l=void 0,u=void 0;o.nativeEvent.changedTouches[0].locationX>o.nativeEvent.changedTouches[1].locationX?(l=o.nativeEvent.changedTouches[1].pageX,u=o.nativeEvent.changedTouches[0].pageX):(l=o.nativeEvent.changedTouches[0].pageX,u=o.nativeEvent.changedTouches[1].pageX);var d=void 0,v=void 0;o.nativeEvent.changedTouches[0].locationY>o.nativeEvent.changedTouches[1].locationY?(d=o.nativeEvent.changedTouches[1].pageY,v=o.nativeEvent.changedTouches[0].pageY):(d=o.nativeEvent.changedTouches[0].pageY,v=o.nativeEvent.changedTouches[1].pageY);var g=u-l,S=v-d,O=Math.sqrt(g*g+S*S);if(e.zoomCurrentDistance=Number(O.toFixed(1)),e.zoomLastDistance!==null){var w=(e.zoomCurrentDistance-e.zoomLastDistance)/200,x=e.scale+w;x<(e.props.minScale||0)&&(x=e.props.minScale||0),x>(e.props.maxScale||0)&&(x=e.props.maxScale||0);var M=e.scale;e.scale=x,e.animatedScale.setValue(e.scale);var H=e.scale-M;e.positionX-=e.centerDiffX*H/e.scale,e.positionY-=e.centerDiffY*H/e.scale,e.animatedPositionX.setValue(e.positionX),e.animatedPositionY.setValue(e.positionY)}e.zoomLastDistance=e.zoomCurrentDistance}e.imageDidMove("onPanResponderMove")}},onPanResponderRelease:function(o,n){if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),!e.isDoubleClick&&!e.isLongPress){var i=Math.sqrt(n.dx*n.dx+n.dy*n.dy),a=o.nativeEvent,c=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;o.nativeEvent.changedTouches.length===1&&i<(e.props.clickDistance||0)?e.singleClickTimeout=setTimeout(function(){e.props.onClick&&e.props.onClick({locationX:c,locationY:l,pageX:u,pageY:d})},e.props.doubleClickInterval):(e.props.responderRelease&&e.props.responderRelease(n.vx,e.scale),e.panResponderReleaseResolve())}},onPanResponderTerminate:function(){}})},r.prototype.componentDidMount=function(){this.props.centerOn&&this.centerOn(this.props.centerOn)},r.prototype.componentWillReceiveProps=function(e){(e.centerOn&&!this.props.centerOn||e.centerOn&&this.props.centerOn&&this.didCenterOnChange(this.props.centerOn,e.centerOn))&&this.centerOn(e.centerOn)},r.prototype.imageDidMove=function(e){this.props.onMove&&this.props.onMove({type:e,positionX:this.positionX,positionY:this.positionY,scale:this.scale,zoomCurrentDistance:this.zoomCurrentDistance})},r.prototype.didCenterOnChange=function(e,o){return e.x!==o.x||e.y!==o.y||e.scale!==o.scale},r.prototype.centerOn=function(e){var o=this;this.positionX=e.x,this.positionY=e.y,this.scale=e.scale;var n=e.duration||300;se.Animated.parallel([se.Animated.timing(this.animatedScale,{toValue:this.scale,duration:n}),se.Animated.timing(this.animatedPositionX,{toValue:this.positionX,duration:n}),se.Animated.timing(this.animatedPositionY,{toValue:this.positionY,duration:n})]).start(function(){o.imageDidMove("centerOn")})},r.prototype.handleLayout=function(e){this.props.layoutChange&&this.props.layoutChange(e)},r.prototype.reset=function(){this.scale=1,this.animatedScale.setValue(this.scale),this.positionX=0,this.animatedPositionX.setValue(this.positionX),this.positionY=0,this.animatedPositionY.setValue(this.positionY)},r.prototype.render=function(){var e={transform:[{scale:this.animatedScale},{translateX:this.animatedPositionX},{translateY:this.animatedPositionY}]},o=se.StyleSheet.flatten(this.props.style);return An.createElement(se.View,h({style:rg({},og.default.container,o,{width:this.props.cropWidth,height:this.props.cropHeight})},this.imagePanResponder.panHandlers),An.createElement(se.Animated.View,{style:e,renderToHardwareTextureAndroid:!0},An.createElement(se.View,{onLayout:this.handleLayout.bind(this),style:{width:this.props.imageWidth,height:this.props.imageHeight}},this.props.children)))},r.defaultProps=new cp.Props,r}(An.Component);nr.default=ng});var up=ft($i=>{s();"use strict";Object.defineProperty($i,"__esModule",{value:!0});var ig=lp();$i.default=ig.default});var Ki=ft(Nn=>{s();"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.default=function(t,r,e){return{modalContainer:{backgroundColor:e,justifyContent:"center",alignItems:"center",overflow:"hidden"},watchOrigin:{position:"absolute",width:t,bottom:20,justifyContent:"center",alignItems:"center"},watchOriginTouchable:{paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,borderRadius:30,borderColor:"white",borderWidth:.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},watchOriginText:{color:"white",backgroundColor:"transparent"},imageStyle:{},container:{backgroundColor:e},moveBox:{flexDirection:"row",alignItems:"center"},menuContainer:{position:"absolute",width:t,height:r,left:0,bottom:0,zIndex:12},menuShadow:{position:"absolute",width:t,height:r,backgroundColor:"black",left:0,bottom:0,opacity:.2,zIndex:10},menuContent:{position:"absolute",width:t,left:0,bottom:0,zIndex:11},operateContainer:{justifyContent:"center",alignItems:"center",backgroundColor:"white",height:40,borderBottomColor:"#ccc",borderBottomWidth:1},operateText:{color:"#333"},loadingTouchable:{width:t,height:r},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},arrowLeftContainer:{position:"absolute",top:0,bottom:0,left:0,justifyContent:"center",zIndex:13},arrowRightContainer:{position:"absolute",top:0,bottom:0,right:0,justifyContent:"center",zIndex:13}}};Nn.simpleStyle={count:{position:"absolute",left:0,right:0,top:38,zIndex:13,justifyContent:"center",alignItems:"center",backgroundColor:"transparent"},countText:{color:"white",fontSize:16,backgroundColor:"transparent",textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:.5},textShadowRadius:0}}});var Ji=ft(Vn=>{s();"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});var Yi=C(),Qi=(W(),si),pp=Ki(),ag=function(){function t(){this.show=!1,this.imageUrls=[],this.flipThreshold=80,this.maxOverflow=300,this.index=0,this.failImageSource=void 0,this.backgroundColor="black",this.footerContainerStyle={},this.menuContext={saveToLocal:"save to the album",cancel:"cancel"},this.saveToLocalByLongPress=!0,this.enableImageZoom=!0,this.style={},this.enableSwipeDown=!1,this.enablePreload=!1,this.pageAnimateTime=100,this.onLongPress=function(){},this.onClick=function(){},this.onDoubleClick=function(){},this.onSave=function(){},this.onMove=function(){},this.renderHeader=function(){return null},this.renderFooter=function(){return null},this.renderIndicator=function(r,e){return Yi.createElement(Qi.View,{style:pp.simpleStyle.count},Yi.createElement(Qi.Text,{style:pp.simpleStyle.countText},r+"/"+e))},this.renderImage=function(r){return Yi.createElement(Qi.Image,r)},this.renderArrowLeft=function(){return null},this.renderArrowRight=function(){return null},this.onShowModal=function(){},this.onCancel=function(){},this.onSwipeDown=function(){},this.loadingRender=function(){return null},this.onSaveToCamera=function(){},this.onChange=function(){}}return t}();Vn.Props=ag;var sg=function(){function t(){this.show=!1,this.currentShowIndex=0,this.prevIndexProp=0,this.imageLoaded=!1,this.imageSizes=[],this.isShowMenu=!1}return t}();Vn.State=sg});var mp=ft(Ot=>{s();"use strict";var cg=Ot&&Ot.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o])};return function(r,e){t(r,e);function o(){this.constructor=r}r.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ir=Ot&&Ot.__assign||Object.assign||function(t){for(var r,e=1,o=arguments.length;e<o;e++){r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lg=Ot&&Ot.__rest||function(t,r){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(e[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(t);n<o.length;n++)r.indexOf(o[n])<0&&(e[o[n]]=t[o[n]]);return e};Object.defineProperty(Ot,"__esModule",{value:!0});var Q=C(),V=(W(),si),dp=up(),fp=Ki(),Zi=Ji(),ug=function(t){cg(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=new Zi.State,e.fadeAnim=new V.Animated.Value(0),e.standardPositionX=0,e.positionXNumber=0,e.positionX=new V.Animated.Value(0),e.width=0,e.height=0,e.styles=fp.default(0,0,"transparent"),e.hasLayout=!1,e.loadedIndex=new Map,e.handleLongPressWithIndex=new Map,e.imageRefs=[],e.resetImageByIndex=function(o){e.imageRefs[o]&&e.imageRefs[o].reset()},e.preloadImage=function(o){o<e.state.imageSizes.length&&e.loadImage(o+1)},e.handleHorizontalOuterRangeOffset=function(o){o===void 0&&(o=0),e.positionXNumber=e.standardPositionX+o,e.positionX.setValue(e.positionXNumber);var n=V.I18nManager.isRTL?-o:o;n<0?(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1):n>0&&(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1)},e.handleResponderRelease=function(o){o===void 0&&(o=0);var n=V.I18nManager.isRTL?-o:o,i=V.I18nManager.isRTL?e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0),a=V.I18nManager.isRTL?e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0);if(n>.7){e.goBack.call(e),(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1);return}else if(n<-.7){e.goNext.call(e),(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1);return}if(i)e.goBack.call(e);else if(a){e.goNext.call(e);return}else{e.resetPosition.call(e);return}},e.goBack=function(){if(e.state.currentShowIndex===0){e.resetPosition.call(e);return}e.positionXNumber=V.I18nManager.isRTL?e.standardPositionX-e.width:e.standardPositionX+e.width,e.standardPositionX=e.positionXNumber,V.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime}).start();var o=(e.state.currentShowIndex||0)-1;e.setState({currentShowIndex:o},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.goNext=function(){if(e.state.currentShowIndex===e.props.imageUrls.length-1){e.resetPosition.call(e);return}e.positionXNumber=V.I18nManager.isRTL?e.standardPositionX+e.width:e.standardPositionX-e.width,e.standardPositionX=e.positionXNumber,V.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime}).start();var o=(e.state.currentShowIndex||0)+1;e.setState({currentShowIndex:o},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.handleLongPress=function(o){e.props.saveToLocalByLongPress&&e.setState({isShowMenu:!0}),e.props.onLongPress&&e.props.onLongPress(o)},e.handleClick=function(){e.props.onClick&&e.props.onClick(e.handleCancel,e.state.currentShowIndex)},e.handleDoubleClick=function(){e.props.onDoubleClick&&e.props.onDoubleClick(e.handleCancel)},e.handleCancel=function(){e.hasLayout=!1,e.props.onCancel&&e.props.onCancel()},e.handleLayout=function(o){o.nativeEvent.layout.width!==e.width&&(e.hasLayout=!0,e.width=o.nativeEvent.layout.width,e.height=o.nativeEvent.layout.height,e.styles=fp.default(e.width,e.height,e.props.backgroundColor||"transparent"),e.forceUpdate(),e.jumpToCurrentImage())},e.saveToLocal=function(){e.props.onSave?e.props.onSave(e.props.imageUrls[e.state.currentShowIndex||0].url):(V.CameraRoll.saveToCameraRoll(e.props.imageUrls[e.state.currentShowIndex||0].url),e.props.onSaveToCamera(e.state.currentShowIndex)),e.setState({isShowMenu:!1})},e.handleLeaveMenu=function(){e.setState({isShowMenu:!1})},e.handleSwipeDown=function(){e.props.onSwipeDown&&e.props.onSwipeDown(),e.handleCancel()},e}return r.prototype.componentDidMount=function(){this.init(this.props)},r.getDerivedStateFromProps=function(e,o){return e.index!==o.prevIndexProp?{currentShowIndex:e.index,prevIndexProp:e.index}:null},r.prototype.componentDidUpdate=function(e,o){e.index!==this.props.index&&(this.loadImage(this.props.index||0),this.jumpToCurrentImage(),V.Animated.timing(this.fadeAnim,{toValue:1,duration:200}).start())},r.prototype.init=function(e){var o=this;if(e.imageUrls.length===0)return this.fadeAnim.setValue(0),this.setState(new Zi.State);var n=[];e.imageUrls.forEach(function(i){n.push({width:i.width||0,height:i.height||0,status:"loading"})}),this.setState({currentShowIndex:e.index,prevIndexProp:e.index||0,imageSizes:n},function(){o.loadImage(e.index||0),o.jumpToCurrentImage(),V.Animated.timing(o.fadeAnim,{toValue:1,duration:200}).start()})},r.prototype.jumpToCurrentImage=function(){this.positionXNumber=this.width*(this.state.currentShowIndex||0)*(V.I18nManager.isRTL?1:-1),this.standardPositionX=this.positionXNumber,this.positionX.setValue(this.positionXNumber)},r.prototype.loadImage=function(e){var o=this;if(!!this.state.imageSizes[e]&&!this.loadedIndex.has(e)){this.loadedIndex.set(e,!0);var n=this.props.imageUrls[e],i=ir({},this.state.imageSizes[e]),a=function(){if(!(o.state.imageSizes[e]&&o.state.imageSizes[e].status!=="loading")){var u=o.state.imageSizes.slice();u[e]=i,o.setState({imageSizes:u})}};if(this.state.imageSizes[e].status!=="success"){if(this.state.imageSizes[e].width>0&&this.state.imageSizes[e].height>0){i.status="success",a();return}var c=!1,l=!1;if((!n.url||n.url.startsWith("file:"))&&(l=!0),n.width&&n.height){this.props.enablePreload&&l===!1&&V.Image.prefetch(n.url),i.width=n.width,i.height=n.height,i.status="success",a();return}V.Image.getSize(n.url,function(u,d){i.width=u,i.height=d,i.status="success",a()},function(){try{var u=V.Image.resolveAssetSource(n.props.source);i.width=u.width,i.height=u.height,i.status="success",a()}catch(d){i.status="fail",a()}})}}},r.prototype.resetPosition=function(){this.positionXNumber=this.standardPositionX,V.Animated.timing(this.positionX,{toValue:this.standardPositionX,duration:150}).start()},r.prototype.getContent=function(){var e=this,o=this.width,n=this.height,i=this.props.imageUrls.map(function(a,c){if((e.state.currentShowIndex||0)>c+1||(e.state.currentShowIndex||0)<c-1)return Q.createElement(V.View,{key:c,style:{width:o,height:n}});e.handleLongPressWithIndex.has(c)||e.handleLongPressWithIndex.set(c,e.handleLongPress.bind(e,a));var l=e.state.imageSizes[c]&&e.state.imageSizes[c].width,u=e.state.imageSizes[c]&&e.state.imageSizes[c].height,d=e.state.imageSizes[c];if(!d||!d.status)return Q.createElement(V.View,{key:c,style:{width:o,height:n}});if(l>o){var v=o/l;l*=v,u*=v}if(u>n){var g=n/u;l*=g,u*=g}var S=function(O){var w=O.children,x=lg(O,["children"]);return Q.createElement(dp.default,h({cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(c),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,pinchToZoom:e.props.enableImageZoom,enableDoubleClickZoom:e.props.enableImageZoom,doubleClickInterval:e.props.doubleClickInterval},x),w)};switch(d.status){case"loading":return Q.createElement(S,{key:c,style:ir({},e.styles.modalContainer,e.styles.loadingContainer),imageWidth:o,imageHeight:n},Q.createElement(V.View,{style:e.styles.loadingContainer},e.props.loadingRender()));case"success":return a.props||(a.props={}),a.props.style||(a.props.style={}),a.props.style=ir({},e.styles.imageStyle,a.props.style,{width:l,height:u}),typeof a.props.source=="number"||(a.props.source||(a.props.source={}),a.props.source=ir({uri:a.url},a.props.source)),e.props.enablePreload&&e.preloadImage(e.state.currentShowIndex||0),Q.createElement(dp.default,{key:c,ref:function(O){return e.imageRefs[c]=O},cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(c),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,imageWidth:l,imageHeight:u,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,panToMove:!e.state.isShowMenu,pinchToZoom:e.props.enableImageZoom&&!e.state.isShowMenu,enableDoubleClickZoom:e.props.enableImageZoom&&!e.state.isShowMenu,doubleClickInterval:e.props.doubleClickInterval,minScale:e.props.minScale,maxScale:e.props.maxScale},e.props.renderImage(a.props));case"fail":return Q.createElement(S,{key:c,style:e.styles.modalContainer,imageWidth:e.props.failImageSource?e.props.failImageSource.width:o,imageHeight:e.props.failImageSource?e.props.failImageSource.height:n},e.props.failImageSource&&e.props.renderImage({source:{uri:e.props.failImageSource.url},style:{width:e.props.failImageSource.width,height:e.props.failImageSource.height}}))}});return Q.createElement(V.Animated.View,{style:{zIndex:9}},Q.createElement(V.Animated.View,{style:ir({},this.styles.container,{opacity:this.fadeAnim})},this.props.renderHeader(this.state.currentShowIndex),Q.createElement(V.View,{style:this.styles.arrowLeftContainer},Q.createElement(V.TouchableWithoutFeedback,{onPress:this.goBack},Q.createElement(V.View,null,this.props.renderArrowLeft()))),Q.createElement(V.View,{style:this.styles.arrowRightContainer},Q.createElement(V.TouchableWithoutFeedback,{onPress:this.goNext},Q.createElement(V.View,null,this.props.renderArrowRight()))),Q.createElement(V.Animated.View,{style:ir({},this.styles.moveBox,{transform:[{translateX:this.positionX}],width:this.width*this.props.imageUrls.length})},i),this.props.renderIndicator((this.state.currentShowIndex||0)+1,this.props.imageUrls.length),this.props.imageUrls[this.state.currentShowIndex||0]&&this.props.imageUrls[this.state.currentShowIndex||0].originSizeKb&&this.props.imageUrls[this.state.currentShowIndex||0].originUrl&&Q.createElement(V.View,{style:this.styles.watchOrigin},Q.createElement(V.TouchableOpacity,{style:this.styles.watchOriginTouchable},Q.createElement(V.Text,{style:this.styles.watchOriginText},"\u67E5\u770B\u539F\u56FE(2M)"))),Q.createElement(V.View,{style:[{bottom:0,position:"absolute",zIndex:9},this.props.footerContainerStyle]},this.props.renderFooter(this.state.currentShowIndex||0))))},r.prototype.getMenu=function(){return this.state.isShowMenu?this.props.menus?Q.createElement(V.View,{style:this.styles.menuContainer},this.props.menus({cancel:this.handleLeaveMenu,saveToLocal:this.saveToLocal})):Q.createElement(V.View,{style:this.styles.menuContainer},Q.createElement(V.View,{style:this.styles.menuShadow}),Q.createElement(V.View,{style:this.styles.menuContent},Q.createElement(V.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.saveToLocal,style:this.styles.operateContainer},Q.createElement(V.Text,{style:this.styles.operateText},this.props.menuContext.saveToLocal)),Q.createElement(V.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.handleLeaveMenu,style:this.styles.operateContainer},Q.createElement(V.Text,{style:this.styles.operateText},this.props.menuContext.cancel)))):null},r.prototype.render=function(){var e=null;return e=Q.createElement(V.View,null,this.getContent(),this.getMenu()),Q.createElement(V.View,{onLayout:this.handleLayout,style:ir({flex:1,overflow:"hidden"},this.props.style)},e)},r.defaultProps=new Zi.Props,r}(Q.Component);Ot.default=ug});var hp=ft(go=>{s();"use strict";Object.defineProperty(go,"__esModule",{value:!0});var gp=mp();go.ImageViewer=gp.default;var pg=Ji();go.ImageViewerPropsDefine=pg.Props;go.default=gp.default});s();(function(){"use strict";var t="ListFormat"in Intl;function r(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}function e(y,_){for(var b=0;b<_.length;b++){var E=_[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}function o(y,_,b){return _&&e(y.prototype,_),b&&e(y,b),y}var n=["conjunction","disjunction","unit"],i=["long","short","narrow"],a=["lookup","best fit"];function c(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(b){return typeof b}:c=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},c(y)}function l(y){return typeof Symbol=="function"&&c(Symbol.iterator)==="symbol"?l=function(b){return c(b)}:l=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":c(b)},l(y)}function u(y){if(y==null)throw new TypeError("Argument ".concat(y," cannot be converted to an Object"));return typeof y=="boolean"?new Boolean(y):typeof y=="number"?new Number(y):typeof y=="string"?new String(y):l(y)==="symbol"?new Object(y):y}var d;function v(y){d=y}function g(){return d}function S(){if(d==null)throw new ReferenceError("Could not determine locale: No default locale has been configured");return d}var O=new WeakMap,w={relevantExtensionKeys:[],localeData:{},availableLocales:[]};function x(y,_,b){var E=O.get(y);E==null&&(E=Object.create(null),O.set(y,E)),E[_]=b}function M(y,_){var b=O.get(y);if(b==null)throw new ReferenceError("No internal slots has been allocated for the given instance of ListFormat");return b[_]}function H(y,_){var b=O.get(y);return b!=null&&_ in b}var J=/-u(?:-[0-9a-z]{2,8})+/gi;function le(y){return y.replace(J,"")}function G(y,_){for(var b=_;;){if(y.includes(b))return b;var E=b.lastIndexOf("-");if(E===-1)return;E>=2&&b.charAt(E-2)==="-"&&(E-=2),b=b.slice(0,E)}}function pe(y,_){var b=[],E=!0,j=!1,$=void 0;try{for(var ue=_[Symbol.iterator](),Z;!(E=(Z=ue.next()).done);E=!0){var ce=Z.value,ie=le(ce),me=G(y,ie);me!==void 0&&b.push(ce)}}catch(ze){j=!0,$=ze}finally{try{!E&&ue.return!=null&&ue.return()}finally{if(j)throw $}}return b}function ur(y,_){return pe(y,_)}function Gt(y){return typeof y=="string"||l(y)==="symbol"}function Tt(y,_){if(l(y)!=="object")throw new TypeError("Given argument ".concat(y," must be of type Object"));if(!Gt(_))throw new TypeError("Given argument ".concat(_," must be a PropertyKey"));return y[_]}function md(y){return Boolean(y)}function gd(y){return y+""}function So(y,_,b,E,j){var $=Tt(y,_);if($!==void 0){if(b!=="boolean"&&b!=="string")throw new TypeError("Expected type ".concat(b," to be 'boolean' or 'string"));if(b==="boolean"&&($=md($)),b==="string"&&($=gd($)),E!==void 0&&!E.includes($))throw new RangeError("Value ".concat($," out of range for options property ").concat(_));return $}else return j}function hd(y,_,b){var E;return b!==void 0?(b=u(b),E=So(b,"localeMatcher","string",a,"best fit")):E="best fit",E==="best fit"?ur(y,_):pe(y,_)}function ma(y){var _=y.availableLocales,b=y.requestedLocales,E=Object.create(null),j=!0,$=!1,ue=void 0;try{for(var Z=b[Symbol.iterator](),ce;!(j=(ce=Z.next()).done);j=!0){var ie=ce.value,me=le(ie),ze=G(_,me);if(ze!==void 0){if(E.locale=ze,ie!==me){var st=ie.match(J);E.extension=st==null?"":st[0]}return E}}}catch(wo){$=!0,ue=wo}finally{try{!j&&Z.return!=null&&Z.return()}finally{if($)throw ue}}var dt=S();return E.locale=dt,E}function yd(y){return ma(y)}function vd(y,_,b,E,j){var $=b.localeMatcher,ue=$==="lookup"?ma({availableLocales:y,requestedLocales:_}):yd({availableLocales:y,requestedLocales:_}),Z=ue.locale,ce=Object.create(null);ce.dataLocale=Z;var ie="-u";if(ie.length>2){var me=String.prototype.indexOf.call(Z,"-x-");if(me===-1)Z="".concat(Z).concat(ie);else{var ze=Z.slice(0,me),st=Z.slice(me);Z="".concat(ze).concat(ie).concat(st)}Z=Intl.getCanonicalLocales(Z)[0]}return ce.locale=Z,ce}function bd(y){if(Array.isArray(y)){for(var _=0,b=new Array(y.length);_<y.length;_++)b[_]=y[_];return b}}function Sd(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}function wd(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Td(y){return bd(y)||Sd(y)||wd()}function ga(y){if(y===void 0)return[];var _=Td(y);if(_.some(function(b){return typeof b!="string"}))throw new TypeError("All List items must be strings");return _}function Cd(y){return Object.prototype.toString.call(y)==="[object Object]"}function Pd(y){return Array.isArray(y)||Cd(y)}function ha(y,_){for(var b=[],E=String.prototype.indexOf.call(y,"{",0),j=0,$=y.length;y[E]!==void 0;){var ue=String.prototype.indexOf.call(y,"}",E);if(ue<=E)throw new TypeError("Expected endIndex: ".concat(ue," to be greater than beginIndex: ").concat(E));if(E>j){var Z=y.slice(j,E);b.push({type:"literal",value:Z})}var ce=y.slice(E+1,ue);if(_[Number(ce)]==null)throw new TypeError("Expected placeables to have a part for PropertyKey: ".concat(ce));var ie=_[Number(ce)];if(Pd(ie.value)){var me=!0,ze=!1,st=void 0;try{for(var dt=ie.value[Symbol.iterator](),wo;!(me=(wo=dt.next()).done);me=!0){var xd=wo.value;b.push(xd)}}catch(Ed){ze=!0,st=Ed}finally{try{!me&&dt.return!=null&&dt.return()}finally{if(ze)throw st}}}else b.push(ie);j=ue+1,E=String.prototype.indexOf.call(y,"{",j)}if(j<$){var Id=y.slice(j,$);b.push({type:"literal",value:Id})}return b}function ya(y,_){var b,E=_.length;if(E===0)return[];if(E===2){b=M(y,"templatePair");var j={type:"element",value:_[0]},$={type:"element",value:_[1]},ue={0:j,1:$};return ha(b,ue)}for(var Z={type:"element",value:_[E-1]},ce=[Z],ie=E-2;ie>=0;){ie===0?b=M(y,"templateStart"):ie<E-2?b=M(y,"templateMiddle"):b=M(y,"templateEnd");var me={type:"element",value:_[ie]},ze={type:"element",value:ce},st={0:me,1:ze};ce=ha(b,st),ie--}return ce}function Rd(y,_){var b=ya(y,_),E="",j=!0,$=!1,ue=void 0;try{for(var Z=b[Symbol.iterator](),ce;!(j=(ce=Z.next()).done);j=!0){var ie=ce.value;E+=ie.value}}catch(me){$=!0,ue=me}finally{try{!j&&Z.return!=null&&Z.return()}finally{if($)throw ue}}return E}function kd(y,_){return ya(y,_)}var va=function(){function y(){r(this,y);var _=arguments[0],b=arguments[1];if((this instanceof y?this.constructor:void 0)===void 0)throw new TypeError("Constructor Intl.ListFormat requires 'new'");var E=Intl.getCanonicalLocales(_);b=b===void 0?Object.create(null):u(b);var j=Object.create(null),$=So(b,"localeMatcher","string",a,"best fit");j.localeMatcher=$;var ue=So(b,"type","string",n,"conjunction");x(this,"type",ue);var Z=So(b,"style","string",i,"long");x(this,"style",Z);var ce=w.localeData,ie=vd(w.availableLocales,E,j),me=ie.dataLocale,ze=ce[me],st=ze.formats[ue],dt=st[Z];x(this,"templatePair",dt.Pair),x(this,"templateStart",dt.Start),x(this,"templateMiddle",dt.Middle),x(this,"templateEnd",dt.End),x(this,"locale",ie.locale),x(this,"initializedListFormat",this)}return o(y,[{key:"format",value:function(b){var E=this;if(!(E instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));if(!H(E,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));var j=ga(b);return Rd(E,j)}},{key:"formatToParts",value:function(b){var E=this;if(!(E instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));if(!H(E,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));var j=ga(b);return kd(E,j)}},{key:"resolvedOptions",value:function(){var b=this;if(!(b instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));if(!H(b,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));var E=M(this,"locale"),j=M(this,"type"),$=M(this,"style");return{locale:E,type:j,style:$}}}],[{key:"supportedLocalesOf",value:function(b){var E=arguments[1],j=w.availableLocales,$=Intl.getCanonicalLocales(b);return hd(j,$,E)}},{key:"__addLocaleData",value:function(b){var E=b.data,j=b.locale,$=g();$==null&&v(j),w.localeData[j]=E,w.availableLocales.includes(j)||w.availableLocales.push(j)}}]),y}();Object.defineProperty(va.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,value:"Intl.ListFormat",configurable:!0});function Od(){if(typeof Intl=="undefined")throw new TypeError("Could not define Intl.ListFormat: Expected 'Intl' to exist. Remember to include polyfill for Intl.getCanonicalLocales before applying this polyfill");Intl.ListFormat=va}t||Od()})();s();"__addLocaleData"in Intl.ListFormat&&Intl.ListFormat.__addLocaleData({locale:"en",data:{formats:{conjunction:{long:{Pair:"{0} and {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, and {1}"},short:{Pair:"{0} & {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, & {1}"},narrow:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"}},disjunction:{long:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},short:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},narrow:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"}},unit:{long:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},short:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},narrow:{Pair:"{0} {1}",Start:"{0} {1}",Middle:"{0} {1}",End:"{0} {1}"}}}}});s();var L=T(C());W();s();s();s();function Zr(t,r){return Zr=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o},Zr(t,r)}function tn(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,Zr(t,r)}var $e=T(C());var Zh=T(Ld());s();function Vt(){return Vt=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Vt.apply(this,arguments)}s();function eo(t,r){if(t==null)return{};var e={},o=Object.keys(t),n,i;for(i=0;i<o.length;i++)n=o[i],!(r.indexOf(n)>=0)&&(e[n]=t[n]);return e}var rn=function(t){tn(r,t);function r(){for(var o,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o=t.call.apply(t,[this].concat(i))||this,o.history=za(o.props),o}var e=r.prototype;return e.render=function(){return $e.default.createElement(ui,{history:this.history,children:this.props.children})},r}($e.default.Component),ny=function(t){tn(r,t);function r(){for(var o,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o=t.call.apply(t,[this].concat(i))||this,o.history=Ba(o.props),o}var e=r.prototype;return e.render=function(){return $e.default.createElement(ui,{history:this.history,children:this.props.children})},r}($e.default.Component),Ti=function(r,e){return typeof r=="function"?r(e):r},Xc=function(r,e){return typeof r=="string"?Va(r,null,null,e):r},Ci=function(r){return r},xr=$e.default.forwardRef;typeof xr=="undefined"&&(xr=Ci);function Nd(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var Vd=xr(function(t,r){var e=t.innerRef,o=t.navigate,n=t.onClick,i=eo(t,["innerRef","navigate","onClick"]),a=i.target,c=Vt({},i,{onClick:function(u){try{n&&n(u)}catch(d){throw u.preventDefault(),d}!u.defaultPrevented&&u.button===0&&(!a||a==="_self")&&!Nd(u)&&(u.preventDefault(),o())}});return Ci!==xr?c.ref=r||e:c.ref=e,$e.default.createElement("a",c)}),zd=xr(function(t,r){var e=t.component,o=e===void 0?Vd:e,n=t.replace,i=t.to,a=t.innerRef,c=eo(t,["component","replace","to","innerRef"]);return $e.default.createElement(li.Consumer,null,function(l){l||ci(!1);var u=l.history,d=Xc(Ti(i,l.location),l.location),v=d?u.createHref(d):"",g=Vt({},c,{href:v,navigate:function(){var O=Ti(i,l.location),w=n?u.replace:u.push;w(O)}});return Ci!==xr?g.ref=r||a:g.innerRef=a,$e.default.createElement(o,g)})});var $c=function(r){return r},on=$e.default.forwardRef;typeof on=="undefined"&&(on=$c);function Bd(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return r.filter(function(o){return o}).join(" ")}var iy=on(function(t,r){var e=t["aria-current"],o=e===void 0?"page":e,n=t.activeClassName,i=n===void 0?"active":n,a=t.activeStyle,c=t.className,l=t.exact,u=t.isActive,d=t.location,v=t.strict,g=t.style,S=t.to,O=t.innerRef,w=eo(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return $e.default.createElement(li.Consumer,null,function(x){x||ci(!1);var M=d||x.location,H=Xc(Ti(S,M),M),J=H.pathname,le=J&&J.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),G=le?Ha(M.pathname,{path:le,exact:l,strict:v}):null,pe=!!(u?u(G,M):G),ur=pe?Bd(c,i):c,Gt=pe?Vt({},g,{},a):g,Tt=Vt({"aria-current":pe&&o||null,className:ur,style:Gt,to:H},w);return $c!==on?Tt.ref=r||O:Tt.innerRef=O,$e.default.createElement(zd,Tt)})});s();var Ir=T(C()),nn=T(Md());function Kc(t=5e3){let[r,e]=Ir.useState(!1),o=Ir.useRef(null);return Ir.useEffect(()=>(!r&&typeof window!="undefined"&&(o.current=setTimeout(()=>(0,nn.unstable_runWithPriority)(nn.unstable_IdlePriority,()=>e(!0)),t)),()=>{o.current&&clearTimeout(o.current)}),[]),r}s();var an=T(C());function Yc(t,r){let[e,o]=an.useState(t);return an.useEffect(()=>{let n=typeof r=="number"?r:r[t],i=setTimeout(()=>{o(t)},n);return()=>{clearTimeout(i)}},[t,r]),e}s();var _r=T(C());W();s();var Er=T(C());W();var Hd=A.createResponsiveComponent(mt);function Qc(t){let[,r]=R(jd),{close:e}=_t(),o=br()==="mobile",n=t.closeable||o,i=()=>{t.onClose&&t.onClose(),e(t.id)},a=vr(()=>new ct.Value(100)).current;return Er.useEffect(()=>{let c=ct.timing(a,{toValue:0,duration:Io.TRANSITION_DURATION_SHORT,useNativeDriver:!1,easing:Ta.ease});return c.start(),()=>{c.stop()}},[]),Er.createElement(ct.View,{style:[{transform:[{translateY:a}]}]},Er.createElement(Hd,{mobileStyle:r.toastMobile,desktopStyle:r.toastDesktop,onPress:()=>{t.onOpen&&t.onOpen(),n&&i()}},Er.createElement(Ds,I(h({},t),{onClose:n?i:void 0,style:r.alert}))))}var jd=D.create({toastDesktop:{width:"auto",minWidth:420,maxWidth:720,marginBottom:p.small},toastMobile:{width:"100%",minWidth:0},alert:t=>I(h({},t.shadows.pop),{borderColor:t.colors.border.main})});function Jc(t){let r=Xr(Ao),e=Xr(Is),o=_r.useRef(null);if(e.length===0)return null;let n=Fd[r];return _r.createElement(ht,{ref:o},_r.createElement(A.View,{style:[Wd.toaster],mobileStyle:n.mobile,desktopStyle:n.desktop},e.map(i=>_r.createElement(Qc,I(h({},i),{key:i.id})))))}var Wd=ge.create({toaster:{position:"absolute",zIndex:gr.TOAST}}),Fd={"bottom-right":ge.create({desktop:{bottom:p.medium,right:p.medium},mobile:{bottom:p.medium,right:p.medium,left:p.medium}}),"bottom-right-with-bar":ge.create({desktop:{bottom:p.xxlarge,right:p.medium},mobile:{bottom:p.xxlarge+p.xlarge+p.medium,right:p.medium,left:p.medium}})};s();var Zc=T(C());function el(t){let r=mr(Ao);Zc.useEffect(()=>{r(t)},[r,t])}s();var sn=T(C());function cn(t){let{children:r}=t;return sn.createElement(ds,null,sn.createElement(Ts,null,r),sn.createElement(Jc,null))}s();var to=T(C());s();W();function Pi(t){let{src:r,bestHeight:e,maxWidth:o,style:n}=t;return ba("img",{src:r,style:[{maxHeight:e,maxWidth:o,width:"auto",height:"auto"},n]})}s();var tl=T(Ad()),Ud={getCurrentValue:()=>typeof navigator!="undefined"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,subscribe:t=>(window.addEventListener("online",t),window.addEventListener("offline",t),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",t)})};function rl(){return(0,tl.useSubscription)(Ud)}s();var Ke=T(C());function Gd(t){if(typeof t.key!="string")throw new Error("Need a key getter");return t.key}function ol(t){let{items:r,scrollTo:e,onSelect:o,getKey:n=Gd}=t,[i,a]=(0,Ke.useState)(null),c=(0,Ke.useRef)(!1),l=(0,Ke.useMemo)(()=>qd(r,i,n),[r,i,n]),u=ms(l),d=(0,Ke.useCallback)(S=>a(n(S)),[a,n]),v=(0,Ke.useCallback)(S=>{c.current||d(S)},[d]),g=(0,Ke.useCallback)(S=>{if(S>0&&u.current.next){let{next:O}=u.current;d(O),e(O)}else if(S<0&&u.current.prev){let{prev:O}=u.current;d(O),e(O)}},[e,d]);return(0,Ke.useEffect)(()=>{let S=()=>{c.current=!1,document.removeEventListener("mousemove",S)},O=w=>{let x=c.current;w.key==="Enter"?(w.preventDefault(),w.stopPropagation(),u.current.current&&o(u.current.current)):w.key==="ArrowDown"?(w.preventDefault(),w.stopPropagation(),c.current=!0,g(1)):w.key==="ArrowUp"&&(w.preventDefault(),w.stopPropagation(),c.current=!0,g(-1)),c.current&&x!==c.current&&document.addEventListener("mousemove",S)};return document.addEventListener("keydown",O,{capture:!0}),()=>{document.removeEventListener("keydown",O,{capture:!0}),document.removeEventListener("mousemove",S)}},[g,o]),{cursor:l,setCursor:d,hoverItem:v}}function qd(t,r,e){let o=null,n=null,i=null;return t.some(a=>(e(a)===r?i=a:i?i&&!n&&(n=a):o=a,i!=null&&n!=null)),i||(o=null,i=t[0],n=t[1]),{prev:o,next:n,current:i}}function nl(){let t=_t();Xd(t)}function Xd(t){let r=rl(),e=to.useRef(r),o=to.useRef(0);to.useEffect(()=>{if(r){e.current||oe({type:"app_back_online",offlineDuration:(Date.now()-o.current)/1e3});return}return o.current=Date.now(),t.notify({icon:k.CloudOff,title:"No connection.",details:"Go online to get the latest updates.",timeout:0,closeable:!1,kind:"danger"})},[r])}s();var $d=rs({key:"firestoreReacheable",default:!0,effects_UNSTABLE:[t=>{typeof window!="undefined"&&fetch("https://firestore.googleapis.com/$discovery/rest").catch(()=>{t.setSelf(!1)})}]});function il(){return Xr($d)}s();function ln(){let t=Ee(),[r]=er([fr(t.uid)]),e=er(r.map(o=>It(o.organization)));return r.map((o,n)=>[e[n],o]).filter(([o])=>!!o)}s();var un=T(C());function al(t){var n,i;let r=un.useContext(Ws),e=r.preview||r.mode!=="public-content"||!((n=t==null?void 0:t.intercom)==null?void 0:n.enabled)||(i=t==null?void 0:t.intercom)==null?void 0:i.appID,o=Kc();return Zt(a=>{o&&e&&!undefined&&a.writeAsync({type:"script",src:`https://widget.intercom.io/widget/${e}`,onLoad:async()=>{window.Intercom&&window.Intercom("boot",{app_id:e})}})}),un.useEffect(()=>()=>{!window.Intercom||(window.Intercom("shutdown"),window.Intercom=void 0)},[]),null}s();var ve=T(C());W();s();var pn=434,ro=355,Be=16,sl=204;function cl(t,r){let{x:e,y:o,width:n,height:i}=t,a,c,l,u,d=o+i+Be+ro>=r.height,v=o-Be-ro<=0;return d?v?(l=Be,ro+2*Be>r.height&&(c=Be)):l=r.height-(o-Be):c=o+i+Be,d&&v?e+n+Be+pn>=r.width?u=r.width-(e-Be):a=e+n+Be:e+Be+pn>=r.width?u=r.width-(e+n-Be):a=e+Be,{left:a,top:c,bottom:l,right:u}}s();var ae=T(C());W();s();var U=T(C());W();var ll="Label",ul="Label",pl="Label",dl="Label",Ri="Caption",fl=Ri;function ml(t){let{command:r,query:e,active:o,inline:n,executeCommand:i,onHoverIn:a}=t,c=typeof r.checked=="boolean"&&r.checked,[l,u]=R(Y),[,d]=R(Kd),[v,g]=gs(!1),S=u.text,O=u.textMid,w=u.primary,x=l.colors.background.main;c?(S=u.textInsideColor,O=u.textInsideColor,w=u.textInsideColor,x=l.colors.primary.main):o&&(S=u.textStandout,O=u.textMid,x=l.colors.background.muted);let M=[u.Bold],H=U.useCallback(()=>{let G=i(r);G instanceof Promise&&g(()=>G)},[r,i]),J=U.useCallback(()=>a(r),[r,a]),le=re.useInteractiveState({onHoverIn:J});return U.createElement(Fe,I(h({component:mt},le.events),{onMouseDown:G=>{G.preventDefault()},onPress:H,backgroundColor:x,style:[f.directionRow,f.alignCenter,n||r.size==="small"?p.Padding.smallVertical:p.Padding.mediumVertical,n?p.Padding.mediumHorizontal:p.Padding.largeHorizontal,{height:ki(r,n)}]}),v?U.createElement(m,{style:[p.Padding.mediumRight]},U.createElement(gt,{size:P.ICON_M})):U.createElement(U.Fragment,null,r.icon?U.createElement(m,{style:[p.Padding.mediumRight]},U.createElement(r.icon,{size:P.ICON_M,style:w})):null),U.createElement(m,{style:f.flex1},U.createElement(m,{style:f.directionRow},U.createElement(m,{style:f.flex1},r.title?U.createElement(m,null,U.createElement(q,{style:[n?u[ul]:u[ll],S,r.subtitle?u.Bold:u.Medium],numberOfLines:1},U.createElement(Fo,{query:e,text:r.title,highlight:M}))):null,r.subtitle?U.createElement(m,null,U.createElement(q,{style:[n?u[dl]:u[pl],O],numberOfLines:n?1:void 0},U.createElement(Fo,{query:e,text:r.subtitle,highlight:M}))):null),r.label?U.createElement(m,{style:[f.directionRow,f.alignCenter,p.Margin.smallLeft,p.Padding.smallHorizontal,d.commandLabel]},r.label.icon?U.createElement(m,{style:[p.Padding.smallRight]},U.createElement(r.label.icon,{size:P.ICON_S,style:u.textInsideColor})):null,U.createElement(m,null,U.createElement(q,{style:[u.Caption,u.textInsideColor]},r.label.title))):null,n||!r.shortcut?null:U.createElement(m,{style:[f.directionRow,f.alignCenter]},U.createElement(m,{style:[p.Margin.smallLeft,p.Padding.smallHorizontal]},U.createElement(Ho,{shortcut:r.shortcut})))),r.body?U.createElement(m,{style:[d.commandBody,p.Padding.smallLeft,p.Margin.smallTop]},r.body.map((G,pe)=>U.createElement(m,{key:pe},U.createElement(q,{style:[n?u[fl]:u[Ri],u.textMid],numberOfLines:1},U.createElement(Fo,{query:e,text:G,highlight:M}))))):null),typeof r.checked=="boolean"?U.createElement(m,{style:[p.Padding.mediumLeft]},U.createElement(Cs,{value:r.checked,onValueChange:H,size:n?P.ICON_S:P.ICON_M})):null)}function ki(t,r){let e=0;return e+=2*(r||t.size==="small"?p.small:p.medium),e+=Math.max(t.title&&(r?Yt[ul]:Yt[ll]).lineHeight||0,t.icon?P.ICON_M:0,typeof t.checked=="boolean"?r?P.ICON_S:P.ICON_M:0),t.subtitle&&(e+=(r?Yt[dl]:Yt[pl]).lineHeight||0),t.body&&(e+=p.small,e+=t.body.length*((r?Yt[fl]:Yt[Ri]).lineHeight||0)),e}var Kd=D.create({commandLabel:t=>({height:P.BUTTON_S,borderRadius:P.RADIUS_L,backgroundColor:t.colors.primary.main,textColor:t.colors.primary.textInside}),commandBody:t=>({borderLeftWidth:1,borderLeftColor:t.colors.border.mid})});function gl(t){let{computed:{listId:r,items:e,sections:o,areMoreLoading:n},palette:i,setPalette:a}=t,c=br(),l=ae.useRef(null),[,u]=R(hl),d=ae.useCallback(async G=>{a(await Gs(i,G))},[a]),v=ae.useCallback(G=>{let pe=-1;return{sectionIndex:o.findIndex(Gt=>(pe=Gt.data.findIndex(Tt=>Tt.key===G),pe>=0)),itemIndex:pe,viewPosition:.5}},[o]),g=ae.useCallback(G=>{var pe;return(pe=l.current)==null?void 0:pe.scrollToLocation(v(G.key))},[v]),{cursor:S,hoverItem:O}=ol({items:e,onSelect:d,scrollTo:g}),w=!!i.anchorRef,x=w?o.length>1:!0,M=ae.useMemo(()=>ps({getItemHeight:({item:G})=>ki(G,w),getSectionSeparatorHeight:({section:G,leadingItem:pe,leadingSection:ur,trailingItem:Gt,trailingSection:Tt})=>ur&&!pe&&!G.group.title?2*(p.small-1)+1:Tt&&!Gt?w?P.S/4:P.S/2:0,getSectionHeaderHeight:({section:G})=>x&&G.group.title?P.S:0}),[w,x]),H=ae.useMemo(()=>x?({section:G})=>G.group.title?ae.createElement(Yd,{group:G.group,inline:w}):null:void 0,[w,x]),J=ae.useCallback(G=>ae.createElement(Qd,I(h({},G),{inline:w})),[w]),le=n&&!!i.anchorRef;return!le&&o.length===0?null:ae.createElement(m,{style:[f.flex1,u.listWrapper]},ae.createElement(wa,{key:r,ref:l,sections:o,extraData:S,getItemLayout:M,renderItem:({item:G})=>{var pe;return ae.createElement(ml,{active:c==="desktop"&&G.key===((pe=S.current)==null?void 0:pe.key),command:G,query:i.query.text,inline:w,executeCommand:d,onHoverIn:O})},SectionSeparatorComponent:J,renderSectionHeader:H,contentContainerStyle:[w?p.Padding.smallVertical:p.Padding.mediumVertical]}),le?ae.createElement(m,{style:[f.directionRow,f.justifyContentCenter,p.Padding.medium]},ae.createElement(gt,{size:P.ICON_L})):null)}function Yd(t){let{group:r,inline:e}=t,[,o]=R(Y);return ae.createElement(m,{style:[Jd.paletteGroupHeader,f.directionRow,f.alignCenter,p.Padding.smallHorizontal]},ae.createElement(m,{style:[e?p.Padding.mediumHorizontal:p.Padding.largeHorizontal]},ae.createElement(q,{style:[o.Heading4,o.textMuted]},r.title)))}function Qd(t){let{leadingSection:r,section:e,leadingItem:o,inline:n,trailingSection:i,trailingItem:a}=t,[,c]=R(hl);return r&&!o&&!e.group.title?ae.createElement(m,{style:c.paletteDividerUntitled}):(i&&!a&&(m,n?c.paletteDividerFooterInline:c.paletteDividerFooter),null)}var Jd=ge.create({paletteGroupHeader:{height:P.S}}),hl=D.create({paletteDividerUntitled:(t,r)=>({marginTop:p.small-1,marginBottom:p.small-1,borderTopColor:r.color==="light"?t.colors.border.mid:t.colors.sidebar.itemBorder,borderTopWidth:1}),listWrapper:(t,r)=>({borderTopColor:r.color==="light"?t.colors.border.mid:t.colors.sidebar.itemBorder,borderTopWidth:1}),paletteDividerFooter:{height:P.S/2},paletteDividerFooterInline:{height:P.S/4}});s();var ye=T(C());W();var yl=ye.forwardRef(function(r,e){let{palette:o,setPalette:n,defaultTitle:i,loading:a}=r,c=Do(2e3),[,l]=R(ef),[u,d]=R(Y),v=Yc(a?"loading":"stale",{loading:400,stale:800}),g=vr(()=>new ct.Value(0)).current;ye.useEffect(()=>{let M=ct.timing(g,{useNativeDriver:!0,toValue:v==="loading"?.7:0,duration:Io.TRANSITION_DURATION_SHORT});return M.start(),()=>{M.stop()}},[g,v]);let[S,O]=hs(o.query.text,[o]),w=M=>{O(M),n(H=>!o||!H?o:qs(H,M))},x=M=>{M.nativeEvent.key==="Backspace"&&o.query.text.length===0?n(H=>H&&Object.keys(H.query.filters).length>0?$s(H):H):M.nativeEvent.key==="Escape"?n(null):c(()=>{oe(h({type:"palette_search",length:o.query.text.length},o.analyticsContext))})};return ye.createElement(m,null,ye.createElement(m,{style:[f.directionRow,f.alignCenter,l.paletteInput,o.anchorRef?p.Margin.small:p.Margin.medium]},o.anchorRef?null:ye.createElement(m,{style:[p.Margin.largeLeft]},ye.createElement(k.Search,{size:P.ICON_L,style:d.textMuted})),ye.createElement(m,{style:[f.flex1]},ye.createElement(Ca,{ref:e,value:S,placeholder:o.title?o.title:i,placeholderTextColor:u.colors.text.muted,onChangeText:w,onKeyPress:x,selectTextOnFocus:!0,style:[o.anchorRef?d.Caption:d.Body,d.text,o.anchorRef?p.Padding.mediumHorizontal:p.Padding.largeHorizontal,o.anchorRef?p.Padding.smallVertical:p.Padding.mediumVertical]})),o.anchorRef?null:ye.createElement(ct.View,{style:[p.Margin.smallHorizontal,p.Margin.largeRight,{opacity:g}]},ye.createElement(gt,{spinnerIcon:k.SpinnerNeutral,size:P.ICON_M,style:d.textMuted})),ye.createElement(A.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[p.Margin.smallHorizontal]},ye.createElement(ee,{icon:k.X,size:"large",onPress:()=>n(null)}))),ye.createElement(Zd,{palette:o,setPalette:n}))});function Zd(t){let{palette:r,setPalette:e}=t,o=Object.entries(r.query.filters);if(o.length===0)return null;let n=i=>{e(a=>Xs(a,i))};return ye.createElement(m,{style:[f.directionRow,p.Padding.largeHorizontal,p.Padding.mediumBottom]},o.map(([i,a])=>ye.createElement(Ps,{key:i,kind:"primary",size:"small",onPress:()=>n(i),style:p.Margin.smallRight},`${i}: ${a.text}`)))}var ef=D.create({paletteInput:t=>({backgroundColor:t.colors.background.muted,borderRadius:P.RADIUS_L})});s();var Dr=T(C());function vl(t){let[r,e]=Dr.useState(!1),o=vr(()=>new WeakMap),n=Dr.useRef(null),{items:i,sections:a,listId:c}=Dr.useMemo(()=>{let l=[],u=[];t.groups.forEach(g=>{let S=tf(t,g);if(S instanceof Promise){let O=o.current.get(g);O&&l.push(O),u.push(S)}else S&&(o.current.set(g,S),l.push(S))});let d=l.filter(g=>g.data.length>0).sort((g,S)=>g.priority>S.priority?-1:g.priority<S.priority?1:0),v=d.reduce((g,S)=>(g.push(...S.data),g),[]);if(u.length>0){e(!0);let g=n.current=Promise.all(u);g.then(()=>{g===n.current&&(e(!1),n.current=null)}).catch(S=>xa(new Error(S)))}return{listId:Date.now(),items:v,sections:d,areMoreLoading:r}},[t,r,o]);return{sections:a,items:i,areMoreLoading:r,listId:c}}function tf(t,r){try{if(Object.keys(t.query.filters).length>0&&typeof r.commands!="function")return;let e=typeof r.commands=="function"?r.commands(t):r.commands;if(e instanceof Promise)throw e;{let o=typeof r.commands!="function"||r.commands.length===0,n=r.priority||5;if(o){let i=rf(t.query.text,e);n=i.reduce((a,c)=>typeof c.score!="undefined"?Math.max((1-c.score)*10,a):a,n),e=i.map(a=>a.item)}return{group:r,priority:n,data:e}}}catch(e){if(e instanceof Promise)return e;throw e}}function rf(t,r){return t?new Za(r,{threshold:.3,location:0,distance:100,shouldSort:!0,includeScore:!0,minMatchCharLength:1,isCaseSensitive:!1,keys:["title","keywords"]}).search(t):r.map(o=>({item:o,score:void 0}))}var of=A.createResponsiveComponent(Fe);function dn(t){let{defaultTitle:r="Type a command or search\u2026",defaultVariant:e}=t,[o,n]=xe(Ks),{color:i}=yr();return o?ve.createElement(nf,{palette:o,setPalette:n,defaultTitle:r,paletteVariant:o.variants||e||{color:i}}):null}function nf(t){var u;let{palette:r,setPalette:e,paletteVariant:o}=t,[n,i]=ve.useState(null),[,a]=R(bl);Yo(r.anchorRef?null:"palette",[!!r.anchorRef]);let c=()=>e(null);ve.useEffect(()=>{var v;if(!((v=r.anchorRef)==null?void 0:v.current))return i(null);let d=(g,S,O,w)=>{let x=Sa.get("window");i(cl({x:g,y:S,width:O,height:w},x))};if(r.anchorRef.current instanceof HTMLElement){let g=r.anchorRef.current.getBoundingClientRect();d(g.left,g.top,g.width,g.height)}else r.anchorRef.current.measureInWindow(d)},[(u=r.anchorRef)==null?void 0:u.current]);let l=vs(ys.OUTSIDE_CLICK);return Mo({opened:!0,closeOnEsc:!!r.controlled,closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,onClose:c}),ve.createElement(ht,null,ve.createElement(ai,{onPressIn:()=>{l&&c()}},ve.createElement(m,{style:[a.paletteBackdrop,r.anchorRef&&a.paletteBackdropInline]},ve.createElement(Se,{theme:o},ve.createElement(af,I(h({},t),{inlinePosition:n}))))))}function af(t){let{palette:r,setPalette:e,inlinePosition:o,defaultTitle:n}=t,i=ve.useRef(null),[a,c]=R(bl),l=vl(r);return ve.useEffect(()=>{!r.controlled&&i.current&&i.current.focus()},[r]),ve.createElement(ai,{onPress:u=>u.preventDefault()},ve.createElement(of,{backgroundColor:a.colors.background.main,style:[c.palette,r.anchorRef&&!o?ls.hidden:null],mobileStyle:c.paletteMobile,desktopStyle:o?[c.paletteInline,o]:c.paletteDesktop,onStartShouldSetResponder:()=>!0},r.controlled?null:ve.createElement(yl,{ref:i,palette:r,setPalette:e,defaultTitle:n,loading:l.areMoreLoading}),ve.createElement(gl,{computed:l,palette:r,setPalette:e})))}var bl=D.create({paletteBackdrop:t=>({flexDirection:"row",alignItems:"flex-start",justifyContent:"center",position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:gr.POPOVER,backgroundColor:t.colors.backdrop.background}),paletteBackdropInline:t=>({backgroundColor:t.colors.backdrop.backgroundLight}),palette:t=>({borderRadius:P.RADIUS_XL,shadowColor:t.colors.border.muted,borderColor:t.colors.border.main,borderWidth:1,shadowOffset:{width:0,height:3},shadowOpacity:.37,shadowRadius:2.65,elevation:6,overflow:"hidden"}),paletteDesktop:{marginTop:p.xxlarge,width:640,maxHeight:480},paletteMobile:{position:"absolute",marginTop:0,top:p.small,left:p.small,right:p.small,maxHeight:440,width:"auto",maxWidth:"100%",minWidth:"auto"},paletteInline:{position:"absolute",maxWidth:pn,minWidth:sl,maxHeight:ro}});s();var ku=T(Pl()),wn=T(C());s();var He;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(He||(He={}));s();s();s();s();s();s();var Lr="dnd-core/INIT_COORDS",zt="dnd-core/BEGIN_DRAG",Mr="dnd-core/PUBLISH_DRAG_SOURCE",Bt="dnd-core/HOVER",Ht="dnd-core/DROP",jt="dnd-core/END_DRAG";function xi(t,r){return{type:Lr,payload:{sourceClientOffset:r||null,clientOffset:t||null}}}s();function fn(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fn=function(e){return typeof e}:fn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(t)}function Rl(t,r,e){return r.split(".").reduce(function(o,n){return o&&o[n]?o[n]:e||null},t)}function kl(t,r){return t.filter(function(e){return e!==r})}function mn(t){return fn(t)==="object"}function Ol(t,r){var e=new Map,o=function(a){e.set(a,e.has(a)?e.get(a)+1:1)};t.forEach(o),r.forEach(o);var n=[];return e.forEach(function(i,a){i===1&&n.push(a)}),n}function xl(t,r){return t.filter(function(e){return r.indexOf(e)>-1})}var pf={type:Lr,payload:{clientOffset:null,sourceClientOffset:null}};function Il(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},n=o.publishSource,i=n===void 0?!0:n,a=o.clientOffset,c=o.getSourceClientOffset,l=t.getMonitor(),u=t.getRegistry();t.dispatch(xi(a)),df(e,l,u);var d=gf(e,l);if(d===null){t.dispatch(pf);return}var v=null;if(a){if(!c)throw new Error("getSourceClientOffset must be defined");ff(c),v=c(d)}t.dispatch(xi(a,v));var g=u.getSource(d),S=g.beginDrag(l,d);if(S!=null){mf(S),u.pinSource(d);var O=u.getSourceType(d);return{type:zt,payload:{itemType:O,item:S,sourceId:d,clientOffset:a||null,sourceClientOffset:v||null,isSourcePublic:!!i}}}}}function df(t,r,e){N(!r.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(o){N(e.getSource(o),"Expected sourceIds to be registered.")})}function ff(t){N(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function mf(t){N(mn(t),"Item must be an object.")}function gf(t,r){for(var e=null,o=t.length-1;o>=0;o--)if(r.canDragSource(t[o])){e=t[o];break}return e}s();function El(t){return function(){var e=t.getMonitor();if(e.isDragging())return{type:Mr}}}s();s();function no(t,r){return r===null?t===null:Array.isArray(t)?t.some(function(e){return e===r}):t===r}function _l(t){return function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=o.clientOffset;hf(e);var i=e.slice(0),a=t.getMonitor(),c=t.getRegistry();yf(i,a,c);var l=a.getItemType();return vf(i,c,l),bf(i,a,c),{type:Bt,payload:{targetIds:i,clientOffset:n||null}}}}function hf(t){N(Array.isArray(t),"Expected targetIds to be an array.")}function yf(t,r,e){N(r.isDragging(),"Cannot call hover while not dragging."),N(!r.didDrop(),"Cannot call hover after drop.");for(var o=0;o<t.length;o++){var n=t[o];N(t.lastIndexOf(n)===o,"Expected targetIds to be unique in the passed array.");var i=e.getTarget(n);N(i,"Expected targetIds to be registered.")}}function vf(t,r,e){for(var o=t.length-1;o>=0;o--){var n=t[o],i=r.getTargetType(n);no(i,e)||t.splice(o,1)}}function bf(t,r,e){t.forEach(function(o){var n=e.getTarget(o);n.hover(r,o)})}s();function Dl(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,o)}return e}function Ll(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Dl(Object(e),!0).forEach(function(o){Sf(t,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Dl(Object(e)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))})}return t}function Sf(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function Ml(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=t.getMonitor(),n=t.getRegistry();wf(o);var i=Pf(o);i.forEach(function(a,c){var l=Tf(a,c,n,o),u={type:Ht,payload:{dropResult:Ll(Ll({},e),l)}};t.dispatch(u)})}}function wf(t){N(t.isDragging(),"Cannot call drop while not dragging."),N(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function Tf(t,r,e,o){var n=e.getTarget(t),i=n?n.drop(o,t):void 0;return Cf(i),typeof i=="undefined"&&(i=r===0?{}:o.getDropResult()),i}function Cf(t){N(typeof t=="undefined"||mn(t),"Drop result must either be an object or undefined.")}function Pf(t){var r=t.getTargetIds().filter(t.canDropOnTarget,t);return r.reverse(),r}s();function Al(t){return function(){var e=t.getMonitor(),o=t.getRegistry();Rf(e);var n=e.getSourceId();if(n!=null){var i=o.getSource(n,!0);i.endDrag(e,n),o.unpinSource()}return{type:jt}}}function Rf(t){N(t.isDragging(),"Cannot call endDrag while not dragging.")}function Nl(t){return{beginDrag:Il(t),publishDragSource:El(t),hover:_l(t),drop:Ml(t),endDrag:Al(t)}}function kf(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Vl(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Of(t,r,e){return r&&Vl(t.prototype,r),e&&Vl(t,e),t}var zl=function(){function t(r,e){var o=this;kf(this,t),this.isSetUp=!1,this.handleRefCountChange=function(){var n=o.store.getState().refCount>0;o.backend&&(n&&!o.isSetUp?(o.backend.setup(),o.isSetUp=!0):!n&&o.isSetUp&&(o.backend.teardown(),o.isSetUp=!1))},this.store=r,this.monitor=e,r.subscribe(this.handleRefCountChange)}return Of(t,[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,o=this.store.dispatch;function n(a){return function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var d=a.apply(e,l);typeof d!="undefined"&&o(d)}}var i=Nl(this);return Object.keys(i).reduce(function(a,c){var l=i[c];return a[c]=n(l),a},{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}]),t}();s();s();s();function Ye(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Bl=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ii=function(){return Math.random().toString(36).substring(7).split("").join(".")},Hl={INIT:"@@redux/INIT"+Ii(),REPLACE:"@@redux/REPLACE"+Ii(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ii()}};function xf(t){if(typeof t!="object"||t===null)return!1;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}function Ei(t,r,e){var o;if(typeof r=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(Ye(0));if(typeof r=="function"&&typeof e=="undefined"&&(e=r,r=void 0),typeof e!="undefined"){if(typeof e!="function")throw new Error(Ye(1));return e(Ei)(t,r)}if(typeof t!="function")throw new Error(Ye(2));var n=t,i=r,a=[],c=a,l=!1;function u(){c===a&&(c=a.slice())}function d(){if(l)throw new Error(Ye(3));return i}function v(w){if(typeof w!="function")throw new Error(Ye(4));if(l)throw new Error(Ye(5));var x=!0;return u(),c.push(w),function(){if(!!x){if(l)throw new Error(Ye(6));x=!1,u();var H=c.indexOf(w);c.splice(H,1),a=null}}}function g(w){if(!xf(w))throw new Error(Ye(7));if(typeof w.type=="undefined")throw new Error(Ye(8));if(l)throw new Error(Ye(9));try{l=!0,i=n(i,w)}finally{l=!1}for(var x=a=c,M=0;M<x.length;M++){var H=x[M];H()}return w}function S(w){if(typeof w!="function")throw new Error(Ye(10));n=w,g({type:Hl.REPLACE})}function O(){var w,x=v;return w={subscribe:function(H){if(typeof H!="object"||H===null)throw new Error(Ye(11));function J(){H.next&&H.next(d())}J();var le=x(J);return{unsubscribe:le}}},w[Bl]=function(){return this},w}return g({type:Hl.INIT}),o={dispatch:g,subscribe:v,getState:d,replaceReducer:S},o[Bl]=O,o}s();s();s();var If=function(r,e){return r===e};function jl(t,r){return!t&&!r?!0:!t||!r?!1:t.x===r.x&&t.y===r.y}function Wl(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:If;if(t.length!==r.length)return!1;for(var o=0;o<t.length;++o)if(!e(t[o],r[o]))return!1;return!0}function Fl(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,o)}return e}function Ul(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Fl(Object(e),!0).forEach(function(o){Ef(t,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Fl(Object(e)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))})}return t}function Ef(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Gl={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function ql(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Gl,r=arguments.length>1?arguments[1]:void 0,e=r.payload;switch(r.type){case Lr:case zt:return{initialSourceClientOffset:e.sourceClientOffset,initialClientOffset:e.clientOffset,clientOffset:e.clientOffset};case Bt:return jl(t.clientOffset,e.clientOffset)?t:Ul(Ul({},t),{},{clientOffset:e.clientOffset});case jt:case Ht:return Gl;default:return t}}s();s();var io="dnd-core/ADD_SOURCE",ao="dnd-core/ADD_TARGET",so="dnd-core/REMOVE_SOURCE",rr="dnd-core/REMOVE_TARGET";function Xl(t){return{type:io,payload:{sourceId:t}}}function $l(t){return{type:ao,payload:{targetId:t}}}function Kl(t){return{type:so,payload:{sourceId:t}}}function Yl(t){return{type:rr,payload:{targetId:t}}}function Ql(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,o)}return e}function Qe(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Ql(Object(e),!0).forEach(function(o){_f(t,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ql(Object(e)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))})}return t}function _f(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Df={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Jl(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Df,r=arguments.length>1?arguments[1]:void 0,e=r.payload;switch(r.type){case zt:return Qe(Qe({},t),{},{itemType:e.itemType,item:e.item,sourceId:e.sourceId,isSourcePublic:e.isSourcePublic,dropResult:null,didDrop:!1});case Mr:return Qe(Qe({},t),{},{isSourcePublic:!0});case Bt:return Qe(Qe({},t),{},{targetIds:e.targetIds});case rr:return t.targetIds.indexOf(e.targetId)===-1?t:Qe(Qe({},t),{},{targetIds:kl(t.targetIds,e.targetId)});case Ht:return Qe(Qe({},t),{},{dropResult:e.dropResult,didDrop:!0,targetIds:[]});case jt:return Qe(Qe({},t),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}s();function Zl(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case io:case ao:return t+1;case so:case rr:return t-1;default:return t}}s();s();var Ar=[],gn=[];Ar.__IS_NONE__=!0;gn.__IS_ALL__=!0;function eu(t,r){if(t===Ar)return!1;if(t===gn||typeof r=="undefined")return!0;var e=xl(r,t);return e.length>0}function tu(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ar,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case Bt:break;case io:case ao:case rr:case so:return Ar;case zt:case Mr:case jt:case Ht:default:return gn}var e=r.payload,o=e.targetIds,n=o===void 0?[]:o,i=e.prevTargetIds,a=i===void 0?[]:i,c=Ol(n,a),l=c.length>0||!Wl(n,a);if(!l)return Ar;var u=a[a.length-1],d=n[n.length-1];return u!==d&&(u&&c.push(u),d&&c.push(d)),c}s();function ru(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t+1}function ou(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,o)}return e}function nu(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?ou(Object(e),!0).forEach(function(o){Lf(t,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ou(Object(e)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))})}return t}function Lf(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function iu(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:tu(t.dirtyHandlerIds,{type:r.type,payload:nu(nu({},r.payload),{},{prevTargetIds:Rl(t,"dragOperation.targetIds",[])})}),dragOffset:ql(t.dragOffset,r),refCount:Zl(t.refCount,r),dragOperation:Jl(t.dragOperation,r),stateId:ru(t.stateId)}}s();s();function Mf(t,r){return{x:t.x+r.x,y:t.y+r.y}}function au(t,r){return{x:t.x-r.x,y:t.y-r.y}}function su(t){var r=t.clientOffset,e=t.initialClientOffset,o=t.initialSourceClientOffset;return!r||!e||!o?null:au(Mf(r,o),e)}function cu(t){var r=t.clientOffset,e=t.initialClientOffset;return!r||!e?null:au(r,e)}function Af(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function lu(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Nf(t,r,e){return r&&lu(t.prototype,r),e&&lu(t,e),t}var uu=function(){function t(r,e){Af(this,t),this.store=r,this.registry=e}return Nf(t,[{key:"subscribeToStateChange",value:function(e){var o=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},i=n.handlerIds;N(typeof e=="function","listener must be a function."),N(typeof i=="undefined"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,c=function(){var u=o.store.getState(),d=u.stateId;try{var v=d===a||d===a+1&&!eu(u.dirtyHandlerIds,i);v||e()}finally{a=d}};return this.store.subscribe(c)}},{key:"subscribeToOffsetChange",value:function(e){var o=this;N(typeof e=="function","listener must be a function.");var n=this.store.getState().dragOffset,i=function(){var c=o.store.getState().dragOffset;c!==n&&(n=c,e())};return this.store.subscribe(i)}},{key:"canDragSource",value:function(e){if(!e)return!1;var o=this.registry.getSource(e);return N(o,"Expected to find a valid source. sourceId=".concat(e)),this.isDragging()?!1:o.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var o=this.registry.getTarget(e);if(N(o,"Expected to find a valid target. targetId=".concat(e)),!this.isDragging()||this.didDrop())return!1;var n=this.registry.getTargetType(e),i=this.getItemType();return no(n,i)&&o.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var o=this.registry.getSource(e,!0);if(N(o,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()||!this.isSourcePublic())return!1;var n=this.registry.getSourceType(e),i=this.getItemType();return n!==i?!1:o.isDragging(this,e)}},{key:"isOverTarget",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!e)return!1;var n=o.shallow;if(!this.isDragging())return!1;var i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!no(i,a))return!1;var c=this.getTargetIds();if(!c.length)return!1;var l=c.indexOf(e);return n?l===c.length-1:l>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return su(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return cu(this.store.getState().dragOffset)}}]),t}();s();s();var Vf=0;function pu(){return Vf++}s();function hn(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hn=function(e){return typeof e}:hn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(t)}function du(t){N(typeof t.canDrag=="function","Expected canDrag to be a function."),N(typeof t.beginDrag=="function","Expected beginDrag to be a function."),N(typeof t.endDrag=="function","Expected endDrag to be a function.")}function fu(t){N(typeof t.canDrop=="function","Expected canDrop to be a function."),N(typeof t.hover=="function","Expected hover to be a function."),N(typeof t.drop=="function","Expected beginDrag to be a function.")}function yn(t,r){if(r&&Array.isArray(t)){t.forEach(function(e){return yn(e,!1)});return}N(typeof t=="string"||hn(t)==="symbol",r?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}s();s();s();function co(t){bt.length||(vn(),mu=!0),bt[bt.length]=t}var bt=[],mu=!1,vn,St=0,zf=1024;function gu(){for(;St<bt.length;){var t=St;if(St=St+1,bt[t].call(),St>zf){for(var r=0,e=bt.length-St;r<e;r++)bt[r]=bt[r+St];bt.length-=St,St=0}}bt.length=0,St=0,mu=!1}var hu=typeof window!="undefined"?window:self,yu=hu.MutationObserver||hu.WebKitMutationObserver;typeof yu=="function"?vn=Bf(gu):vn=vu(gu);co.requestFlush=vn;function Bf(t){var r=1,e=new yu(t),o=document.createTextNode("");return e.observe(o,{characterData:!0}),function(){r=-r,o.data=r}}function vu(t){return function(){var e=setTimeout(n,0),o=setInterval(n,50);function n(){clearTimeout(e),clearInterval(o),t()}}}co.makeRequestCallFromTimer=vu;var bn=[],_i=[],Hf=co.makeRequestCallFromTimer(jf);function jf(){if(_i.length)throw _i.shift()}function Sn(t){var r;bn.length?r=bn.pop():r=new Wf,r.task=t,co(r)}var Wf=function(){function t(){}return t.prototype.call=function(){try{this.task.call()}catch(r){Sn.onerror?Sn.onerror(r):(_i.push(r),Hf())}finally{this.task=null,bn[bn.length]=this}},t}();function Ff(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function bu(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Uf(t,r,e){return r&&bu(t.prototype,r),e&&bu(t,e),t}function Gf(t,r){return Kf(t)||$f(t,r)||Xf(t,r)||qf()}function qf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xf(t,r){if(!!t){if(typeof t=="string")return Su(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Su(t,r)}}function Su(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,o=new Array(r);e<r;e++)o[e]=t[e];return o}function $f(t,r){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(t)))){var e=[],o=!0,n=!1,i=void 0;try{for(var a=t[Symbol.iterator](),c;!(o=(c=a.next()).done)&&(e.push(c.value),!(r&&e.length===r));o=!0);}catch(l){n=!0,i=l}finally{try{!o&&a.return!=null&&a.return()}finally{if(n)throw i}}return e}}function Kf(t){if(Array.isArray(t))return t}function Yf(t){var r=pu().toString();switch(t){case He.SOURCE:return"S".concat(r);case He.TARGET:return"T".concat(r);default:throw new Error("Unknown Handler Role: ".concat(t))}}function wu(t){switch(t[0]){case"S":return He.SOURCE;case"T":return He.TARGET;default:N(!1,"Cannot parse handler ID: ".concat(t))}}function Tu(t,r){var e=t.entries(),o=!1;do{var n=e.next(),i=n.done,a=Gf(n.value,2),c=a[1];if(c===r)return!0;o=!!i}while(!o);return!1}var Cu=function(){function t(r){Ff(this,t),this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=r}return Uf(t,[{key:"addSource",value:function(e,o){yn(e),du(o);var n=this.addHandler(He.SOURCE,e,o);return this.store.dispatch(Xl(n)),n}},{key:"addTarget",value:function(e,o){yn(e,!0),fu(o);var n=this.addHandler(He.TARGET,e,o);return this.store.dispatch($l(n)),n}},{key:"containsHandler",value:function(e){return Tu(this.dragSources,e)||Tu(this.dropTargets,e)}},{key:"getSource",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;N(this.isSourceId(e),"Expected a valid source ID.");var n=o&&e===this.pinnedSourceId,i=n?this.pinnedSource:this.dragSources.get(e);return i}},{key:"getTarget",value:function(e){return N(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return N(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return N(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){var o=wu(e);return o===He.SOURCE}},{key:"isTargetId",value:function(e){var o=wu(e);return o===He.TARGET}},{key:"removeSource",value:function(e){var o=this;N(this.getSource(e),"Expected an existing source."),this.store.dispatch(Kl(e)),Sn(function(){o.dragSources.delete(e),o.types.delete(e)})}},{key:"removeTarget",value:function(e){N(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Yl(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var o=this.getSource(e);N(o,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=o}},{key:"unpinSource",value:function(){N(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,o,n){var i=Yf(e);return this.types.set(i,o),e===He.SOURCE?this.dragSources.set(i,n):e===He.TARGET&&this.dropTargets.set(i,n),i}}]),t}();function Pu(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,n=Qf(o),i=new uu(n,new Cu(n)),a=new zl(n,i),c=t(a,r,e);return a.receiveBackend(c),a}function Qf(t){var r=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Ei(iu,t&&r&&r({name:"dnd-core",instanceId:"dnd-core"}))}var Jf=["children"];function Zf(t,r){return om(t)||rm(t,r)||tm(t,r)||em()}function em(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tm(t,r){if(!!t){if(typeof t=="string")return Ru(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ru(t,r)}}function Ru(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,o=new Array(r);e<r;e++)o[e]=t[e];return o}function rm(t,r){var e=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var o=[],n=!0,i=!1,a,c;try{for(e=e.call(t);!(n=(a=e.next()).done)&&(o.push(a.value),!(r&&o.length===r));n=!0);}catch(l){i=!0,c=l}finally{try{!n&&e.return!=null&&e.return()}finally{if(i)throw c}}return o}}function om(t){if(Array.isArray(t))return t}function nm(t,r){if(t==null)return{};var e=im(t,r),o,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)o=i[n],!(r.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,o)||(e[o]=t[o]))}return e}function im(t,r){if(t==null)return{};var e={},o=Object.keys(t),n,i;for(i=0;i<o.length;i++)n=o[i],!(r.indexOf(n)>=0)&&(e[n]=t[n]);return e}var Ou=0,Tn=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),xu=(0,wn.memo)(function(r){var e=r.children,o=nm(r,Jf),n=am(o),i=Zf(n,2),a=i[0],c=i[1];return(0,wn.useEffect)(function(){if(c){var l=Iu();return++Ou,function(){--Ou==0&&(l[Tn]=null)}}},[]),(0,ku.jsx)(Ko.Provider,Object.assign({value:a},{children:e}),void 0)});function am(t){if("manager"in t){var r={dragDropManager:t.manager};return[r,!1]}var e=sm(t.backend,t.context,t.options,t.debugMode),o=!t.context;return[e,o]}function sm(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Iu(),e=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,n=r;return n[Tn]||(n[Tn]={dragDropManager:Pu(t,r,e,o)}),n[Tn]}function Iu(){return window}s();var Di=T(C());function cm(t,r){return dm(t)||pm(t,r)||um(t,r)||lm()}function lm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function um(t,r){if(!!t){if(typeof t=="string")return Eu(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Eu(t,r)}}function Eu(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,o=new Array(r);e<r;e++)o[e]=t[e];return o}function pm(t,r){var e=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var o=[],n=!0,i=!1,a,c;try{for(e=e.call(t);!(n=(a=e.next()).done)&&(o.push(a.value),!(r&&o.length===r));n=!0);}catch(l){i=!0,c=l}finally{try{!n&&e.return!=null&&e.return()}finally{if(i)throw c}}return o}}function dm(t){if(Array.isArray(t))return t}function Cn(t){var r=rc(),e=r.getMonitor(),o=oc(e,t),n=cm(o,2),i=n[0],a=n[1];return(0,Di.useEffect)(function(){return e.subscribeToOffsetChange(a)}),(0,Di.useEffect)(function(){return e.subscribeToStateChange(a)}),i}s();var ep=T(C());s();s();s();s();s();function fm(t,r){var e;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(e=mm(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,a=!1,c;return{s:function(){e=t[Symbol.iterator]()},n:function(){var u=e.next();return i=u.done,u},e:function(u){a=!0,c=u},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(a)throw c}}}}function mm(t,r){if(!!t){if(typeof t=="string")return _u(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _u(t,r)}}function _u(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,o=new Array(r);e<r;e++)o[e]=t[e];return o}function gm(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Li(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function Pn(t,r){var e=Du(t,r,"get");return hm(t,e)}function hm(t,r){return r.get?r.get.call(t):r.value}function ym(t,r,e){var o=Du(t,r,"set");return vm(t,o,e),e}function Du(t,r,e){if(!r.has(t))throw new TypeError("attempted to "+e+" private field on non-instance");return r.get(t)}function vm(t,r,e){if(r.set)r.set.call(t,e);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=e}}var Nr=new WeakMap,Lu=function t(){var r=this;gm(this,t),Nr.set(this,{writable:!0,value:void 0}),Li(this,"register",function(e){Pn(r,Nr).push(e)}),Li(this,"unregister",function(e){for(var o;(o=Pn(r,Nr).indexOf(e))!==-1;)Pn(r,Nr).splice(o,1)}),Li(this,"backendChanged",function(e){var o=fm(Pn(r,Nr)),n;try{for(o.s();!(n=o.n()).done;){var i=n.value;i.backendChanged(e)}}catch(a){o.e(a)}finally{o.f()}}),ym(this,Nr,[])};function bm(t){return Cm(t)||Tm(t)||wm(t)||Sm()}function Sm(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wm(t,r){if(!!t){if(typeof t=="string")return Mi(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Mi(t,r)}}function Tm(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}function Cm(t){if(Array.isArray(t))return Mi(t)}function Mi(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,o=new Array(r);e<r;e++)o[e]=t[e];return o}function Pm(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function wt(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function z(t,r){var e=Mu(t,r,"get");return Rm(t,e)}function Rm(t,r){return r.get?r.get.call(t):r.value}function Vr(t,r,e){var o=Mu(t,r,"set");return km(t,o,e),e}function Mu(t,r,e){if(!r.has(t))throw new TypeError("attempted to "+e+" private field on non-instance");return r.get(t)}function km(t,r,e){if(r.set)r.set.call(t,e);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=e}}var Je=new WeakMap,Rn=new WeakMap,Ze=new WeakMap,Wt=new WeakMap,or=new WeakMap,Au=new WeakMap,Nu=new WeakMap,Vu=new WeakMap,Ai=new WeakMap,Ni=new WeakMap,kn=new WeakMap,Vi=function t(r,e,o){var n=this;if(Pm(this,t),Je.set(this,{writable:!0,value:void 0}),Rn.set(this,{writable:!0,value:void 0}),Ze.set(this,{writable:!0,value:void 0}),Wt.set(this,{writable:!0,value:void 0}),or.set(this,{writable:!0,value:void 0}),Au.set(this,{writable:!0,value:function(a,c,l){var u,d;if(!l.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(JSON.stringify(l)));var v=l.backend(a,c,l.options),g=l.id,S=!l.id&&v&&v.constructor;if(S&&(g=v.constructor.name),g)S&&console.warn(`Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.
        This might be unsupported in the future, please specify 'id' explicitely for every backend.`);else throw new Error("You must specify an 'id' property in your Backend entry: ".concat(JSON.stringify(l),`
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx`));if(z(n,Ze)[g])throw new Error(`You must specify a unique 'id' property in your Backend entry:
        `.concat(JSON.stringify(l)," (conflicts with: ").concat(JSON.stringify(z(n,Ze)[g]),")"));return{id:g,instance:v,preview:(u=l.preview)!==null&&u!==void 0?u:!1,transition:l.transition,skipDispatchOnTransition:(d=l.skipDispatchOnTransition)!==null&&d!==void 0?d:!1}}}),wt(this,"setup",function(){if(typeof window!="undefined"){if(t.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");t.isSetUp=!0,z(n,Nu).call(n,window),z(n,Ze)[z(n,Je)].instance.setup()}}),wt(this,"teardown",function(){typeof window!="undefined"&&(t.isSetUp=!1,z(n,Vu).call(n,window),z(n,Ze)[z(n,Je)].instance.teardown())}),wt(this,"connectDragSource",function(i,a,c){return z(n,kn).call(n,"connectDragSource",i,a,c)}),wt(this,"connectDragPreview",function(i,a,c){return z(n,kn).call(n,"connectDragPreview",i,a,c)}),wt(this,"connectDropTarget",function(i,a,c){return z(n,kn).call(n,"connectDropTarget",i,a,c)}),wt(this,"profile",function(){return z(n,Ze)[z(n,Je)].instance.profile()}),wt(this,"previewEnabled",function(){return z(n,Ze)[z(n,Je)].preview}),wt(this,"previewsList",function(){return z(n,Rn)}),wt(this,"backendsList",function(){return z(n,Wt)}),Nu.set(this,{writable:!0,value:function(a){z(n,Wt).forEach(function(c){c.transition&&a.addEventListener(c.transition.event,z(n,Ai))})}}),Vu.set(this,{writable:!0,value:function(a){z(n,Wt).forEach(function(c){c.transition&&a.removeEventListener(c.transition.event,z(n,Ai))})}}),Ai.set(this,{writable:!0,value:function(a){var c=z(n,Je);if(z(n,Wt).some(function(v){return v.id!==z(n,Je)&&v.transition&&v.transition.check(a)?(Vr(n,Je,v.id),!0):!1}),z(n,Je)!==c){var l;z(n,Ze)[c].instance.teardown(),Object.keys(z(n,or)).forEach(function(v){var g,S=z(n,or)[v];S.unsubscribe(),S.unsubscribe=(g=z(n,Ni)).call.apply(g,[n,S.func].concat(bm(S.args)))}),z(n,Rn).backendChanged(n);var u=z(n,Ze)[z(n,Je)];if(u.instance.setup(),u.skipDispatchOnTransition)return;var d=null;try{d=a.constructor(a.type,a)}catch(v){d=document.createEvent("Event"),d.initEvent(a.type,a.bubbles,a.cancelable)}(l=a.target)===null||l===void 0||l.dispatchEvent(d)}}}),Ni.set(this,{writable:!0,value:function(a,c,l,u){return z(n,Ze)[z(n,Je)].instance[a](c,l,u)}}),kn.set(this,{writable:!0,value:function(a,c,l,u){var d="".concat(a,"_").concat(c),v=z(n,Ni).call(n,a,c,l,u);return z(n,or)[d]={func:a,args:[c,l,u],unsubscribe:v},function(){z(n,or)[d].unsubscribe(),delete z(n,or)[d]}}}),!o||!o.backends||o.backends.length<1)throw new Error(`You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx`);Vr(this,Rn,new Lu),Vr(this,Ze,{}),Vr(this,Wt,[]),o.backends.forEach(function(i){var a=z(n,Au).call(n,r,e,i);z(n,Ze)[a.id]=a,z(n,Wt).push(a)}),Vr(this,Je,z(this,Wt)[0].id),Vr(this,or,{})};wt(Vi,"isSetUp",!1);var On=function(r,e,o){return new Vi(r,e,o)};s();var zr=function(r,e){return{event:r,check:e}};s();var zi=zr("touchstart",function(t){var r=t;return r.touches!==null&&r.touches!==void 0}),Om=zr("dragstart",function(t){return t.type.indexOf("drag")!==-1||t.type.indexOf("drop")!==-1}),xm=zr("mousedown",function(t){return t.type.indexOf("touch")===-1&&t.type.indexOf("mouse")!==-1}),Bi=zr("pointerdown",function(t){var r=t;return r.pointerType=="mouse"});s();var xn=T(C());var zu=(0,xn.createContext)(null);s();var En=T(C()),Uu=T(Dd());s();s();var Wu=T(C());s();var Hu=T(C());s();var Hi=function(r,e){return{x:r.x-e.x,y:r.y-e.y}},Im=function(r){var e=r.getInitialClientOffset(),o=r.getInitialSourceClientOffset();return e===null||o===null||e.x===void 0||e.y===void 0?{x:0,y:0}:Hi(e,o)},Bu=function(r,e){var o=r.getClientOffset();if(o===null)return null;if(!e.current||!e.current.getBoundingClientRect)return Hi(o,Im(r));var n=e.current.getBoundingClientRect(),i={x:n.width/2,y:n.height/2};return Hi(o,i)};var Em=function(r){var e="translate(".concat(r.x,"px, ").concat(r.y,"px)");return{pointerEvents:"none",position:"fixed",top:0,left:0,transform:e,WebkitTransform:e}},In=function(){var r=(0,Hu.useRef)(null),e=Cn(function(o){return{currentOffset:Bu(o,r),isDragging:o.isDragging(),itemType:o.getItemType(),item:o.getItem(),monitor:o}});return!e.isDragging||e.currentOffset===null?{display:!1}:{display:!0,itemType:e.itemType,item:e.item,style:Em(e.currentOffset),monitor:e.monitor,ref:r}};s();var ju=T(C()),lo=(0,ju.createContext)(void 0);function _m(t,r){if(t==null)return{};var e=Dm(t,r),o,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)o=i[n],!(r.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,o)||(e[o]=t[o]))}return e}function Dm(t,r){if(t==null)return{};var e={},o=Object.keys(t),n,i;for(i=0;i<o.length;i++)n=o[i],!(r.indexOf(n)>=0)&&(e[n]=t[n]);return e}var ji=function(r){var e=In();if(!e.display)return null;var o=e.display,n=_m(e,["display"]),i;return"children"in r&&typeof r.children=="function"?i=r.children(n):"children"in r?i=r.children:i=r.generator(n),Wu.default.createElement(lo.Provider,{value:n},i)};s();var Br=T(C());function Lm(t,r){return Vm(t)||Nm(t,r)||Am(t,r)||Mm()}function Mm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Am(t,r){if(!!t){if(typeof t=="string")return Fu(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Fu(t,r)}}function Fu(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,o=new Array(r);e<r;e++)o[e]=t[e];return o}function Nm(t,r){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(t)))){var e=[],o=!0,n=!1,i=void 0;try{for(var a=t[Symbol.iterator](),c;!(o=(c=a.next()).done)&&(e.push(c.value),!(r&&e.length===r));o=!0);}catch(l){n=!0,i=l}finally{try{!o&&a.return!=null&&a.return()}finally{if(n)throw i}}return e}}function Vm(t){if(Array.isArray(t))return t}var Wi=function(){var r=(0,Br.useState)(!1),e=Lm(r,2),o=e[0],n=e[1],i=(0,Br.useContext)(Ko);return(0,Br.useEffect)(function(){var a,c=i==null||(a=i.dragDropManager)===null||a===void 0?void 0:a.getBackend(),l={backendChanged:function(d){n(d.previewEnabled())}};return n(c.previewEnabled()),c.previewsList().register(l),function(){c.previewsList().unregister(l)}},[i,i.dragDropManager]),o};var zm=function(r){var e=Wi(),o=(0,En.useContext)(zu);if(!e)return null;var n=En.default.createElement(ji,r);return o!==null?(0,Uu.createPortal)(n,o):n};zm.Context=lo;s();s();s();var Bm=T(C());s();s();s();s();s();var Rt;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(Rt||(Rt={}));s();var jm={Left:1,Right:2,Center:4},Wm={Left:0,Center:1,Right:2};function _n(t){return t.button===void 0||t.button===Wm.Left}function Gu(t){return t.buttons===void 0||(t.buttons&jm.Left)==0}function Dn(t){return!!t.targetTouches}s();var Fm=1;function qu(t){var r=t.nodeType===Fm?t:t.parentElement;if(!!r){var e=r.getBoundingClientRect(),o=e.top,n=e.left;return{x:n,y:o}}}function Um(t,r){if(t.targetTouches.length===1)return uo(t.targetTouches[0]);if(r&&t.touches.length===1&&t.touches[0].target===r.target)return uo(t.touches[0])}function uo(t,r){return Dn(t)?Um(t,r):{x:t.clientX,y:t.clientY}}s();function Xu(t,r,e,o){return Math.sqrt(Math.pow(Math.abs(e-t),2)+Math.pow(Math.abs(o-r),2))}function $u(t,r,e,o,n){if(!n)return!1;for(var i=Math.atan2(o-r,e-t)*180/Math.PI+180,a=0;a<n.length;++a)if((n[a].start==null||i>=n[a].start)&&(n[a].end==null||i<=n[a].end))return!0;return!1}s();var Fi=function(){var t=!1;try{addEventListener("test",function(){},Object.defineProperty({},"passive",{get:function(){return t=!0,!0}}))}catch(r){}return t}();s();function Gm(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Ku(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function qm(t,r,e){return r&&Ku(t.prototype,r),e&&Ku(t,e),t}function Yu(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Qu=function(){function t(r,e){Gm(this,t),Yu(this,"args",void 0),Yu(this,"context",void 0),this.args=r,this.context=e}return qm(t,[{key:"delay",get:function(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}},{key:"scrollAngleRanges",get:function(){return this.args.scrollAngleRanges}},{key:"getDropTargetElementsAtPoint",get:function(){return this.args.getDropTargetElementsAtPoint}},{key:"ignoreContextMenu",get:function(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}},{key:"enableHoverOutsideTarget",get:function(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}},{key:"enableKeyboardEvents",get:function(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}},{key:"enableMouseEvents",get:function(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}},{key:"enableTouchEvents",get:function(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}},{key:"touchSlop",get:function(){return this.args.touchSlop||0}},{key:"delayTouchStart",get:function(){var e,o,n,i;return(e=(o=(n=this.args)===null||n===void 0?void 0:n.delayTouchStart)!==null&&o!==void 0?o:(i=this.args)===null||i===void 0?void 0:i.delay)!==null&&e!==void 0?e:0}},{key:"delayMouseStart",get:function(){var e,o,n,i;return(e=(o=(n=this.args)===null||n===void 0?void 0:n.delayMouseStart)!==null&&o!==void 0?o:(i=this.args)===null||i===void 0?void 0:i.delay)!==null&&e!==void 0?e:0}},{key:"window",get:function(){if(this.context&&this.context.window)return this.context.window;if(typeof window!="undefined")return window}},{key:"document",get:function(){var e;if((e=this.context)!==null&&e!==void 0&&e.document)return this.context.document;if(this.window)return this.window.document}},{key:"rootElement",get:function(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}}]),t}();var po;function Xm(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Ju(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $m(t,r,e){return r&&Ju(t.prototype,r),e&&Ju(t,e),t}function K(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var fo=(po={},K(po,Rt.mouse,{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"}),K(po,Rt.touch,{start:"touchstart",move:"touchmove",end:"touchend"}),K(po,Rt.keyboard,{keydown:"keydown"}),po),Ui=function(){function t(r,e,o){var n=this;Xm(this,t),K(this,"options",void 0),K(this,"actions",void 0),K(this,"monitor",void 0),K(this,"sourceNodes",void 0),K(this,"sourcePreviewNodes",void 0),K(this,"sourcePreviewNodeOptions",void 0),K(this,"targetNodes",void 0),K(this,"_mouseClientOffset",void 0),K(this,"_isScrolling",void 0),K(this,"listenerTypes",void 0),K(this,"moveStartSourceIds",void 0),K(this,"waitingForDelay",void 0),K(this,"timeout",void 0),K(this,"dragOverTargetIds",void 0),K(this,"draggedSourceNode",void 0),K(this,"draggedSourceNodeRemovalObserver",void 0),K(this,"lastTargetTouchFallback",void 0),K(this,"getSourceClientOffset",function(i){var a=n.sourceNodes.get(i);return a&&qu(a)}),K(this,"handleTopMoveStartCapture",function(i){!_n(i)||(n.moveStartSourceIds=[])}),K(this,"handleMoveStart",function(i){Array.isArray(n.moveStartSourceIds)&&n.moveStartSourceIds.unshift(i)}),K(this,"handleTopMoveStart",function(i){if(!!_n(i)){var a=uo(i);a&&(Dn(i)&&(n.lastTargetTouchFallback=i.targetTouches[0]),n._mouseClientOffset=a),n.waitingForDelay=!1}}),K(this,"handleTopMoveStartDelay",function(i){if(!!_n(i)){var a=i.type===fo.touch.start?n.options.delayTouchStart:n.options.delayMouseStart;n.timeout=setTimeout(n.handleTopMoveStart.bind(n,i),a),n.waitingForDelay=!0}}),K(this,"handleTopMoveCapture",function(){n.dragOverTargetIds=[]}),K(this,"handleMove",function(i,a){n.dragOverTargetIds&&n.dragOverTargetIds.unshift(a)}),K(this,"handleTopMove",function(i){if(n.timeout&&clearTimeout(n.timeout),!(!n.document||n.waitingForDelay)){var a=n.moveStartSourceIds,c=n.dragOverTargetIds,l=n.options.enableHoverOutsideTarget,u=uo(i,n.lastTargetTouchFallback);if(!!u){if(n._isScrolling||!n.monitor.isDragging()&&$u(n._mouseClientOffset.x||0,n._mouseClientOffset.y||0,u.x,u.y,n.options.scrollAngleRanges)){n._isScrolling=!0;return}if(!n.monitor.isDragging()&&n._mouseClientOffset.hasOwnProperty("x")&&a&&Xu(n._mouseClientOffset.x||0,n._mouseClientOffset.y||0,u.x,u.y)>(n.options.touchSlop?n.options.touchSlop:0)&&(n.moveStartSourceIds=void 0,n.actions.beginDrag(a,{clientOffset:n._mouseClientOffset,getSourceClientOffset:n.getSourceClientOffset,publishSource:!1})),!!n.monitor.isDragging()){var d=n.sourceNodes.get(n.monitor.getSourceId());n.installSourceNodeRemovalObserver(d),n.actions.publishDragSource(),i.cancelable&&i.preventDefault();var v=(c||[]).map(function(J){return n.targetNodes.get(J)}).filter(function(J){return!!J}),g=n.options.getDropTargetElementsAtPoint?n.options.getDropTargetElementsAtPoint(u.x,u.y,v):n.document.elementsFromPoint(u.x,u.y),S=[];for(var O in g)if(!!g.hasOwnProperty(O)){var w=g[O];for(S.push(w);w;)w=w.parentElement,w&&S.indexOf(w)===-1&&S.push(w)}var x=S.filter(function(J){return v.indexOf(J)>-1}).map(function(J){return n._getDropTargetId(J)}).filter(function(J){return!!J}).filter(function(J,le,G){return G.indexOf(J)===le});if(l)for(var M in n.targetNodes){var H=n.targetNodes.get(M);if(d&&H&&H.contains(d)&&x.indexOf(M)===-1){x.unshift(M);break}}x.reverse(),n.actions.hover(x,{clientOffset:u})}}}}),K(this,"_getDropTargetId",function(i){for(var a=n.targetNodes.keys(),c=a.next();c.done===!1;){var l=c.value;if(i===n.targetNodes.get(l))return l;c=a.next()}}),K(this,"handleTopMoveEndCapture",function(i){if(n._isScrolling=!1,n.lastTargetTouchFallback=void 0,!!Gu(i)){if(!n.monitor.isDragging()||n.monitor.didDrop()){n.moveStartSourceIds=void 0;return}i.cancelable&&i.preventDefault(),n._mouseClientOffset={},n.uninstallSourceNodeRemovalObserver(),n.actions.drop(),n.actions.endDrag()}}),K(this,"handleCancelOnEscape",function(i){i.key==="Escape"&&n.monitor.isDragging()&&(n._mouseClientOffset={},n.uninstallSourceNodeRemovalObserver(),n.actions.endDrag())}),this.options=new Qu(o,e),this.actions=r.getActions(),this.monitor=r.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Rt.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Rt.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Rt.keyboard)}return $m(t,[{key:"profile",value:function(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}},{key:"document",get:function(){return this.options.document}},{key:"setup",value:function(){var e=this.options.rootElement;!e||(N(!t.isSetUp,"Cannot have two Touch backends at the same time."),t.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}},{key:"teardown",value:function(){var e=this.options.rootElement;!e||(t.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}},{key:"addEventListener",value:function(e,o,n,i){var a=Fi?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(c){var l=fo[c][o];l&&e.addEventListener(l,n,a)})}},{key:"removeEventListener",value:function(e,o,n,i){var a=Fi?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(c){var l=fo[c][o];l&&e.removeEventListener(l,n,a)})}},{key:"connectDragSource",value:function(e,o){var n=this,i=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,o),this.addEventListener(o,"start",i),function(){n.sourceNodes.delete(e),n.removeEventListener(o,"start",i)}}},{key:"connectDragPreview",value:function(e,o,n){var i=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,o),function(){i.sourcePreviewNodes.delete(e),i.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDropTarget",value:function(e,o){var n=this,i=this.options.rootElement;if(!this.document||!i)return function(){};var a=function(l){if(!(!n.document||!i||!n.monitor.isDragging())){var u;switch(l.type){case fo.mouse.move:u={x:l.clientX,y:l.clientY};break;case fo.touch.move:u={x:l.touches[0].clientX,y:l.touches[0].clientY};break}var d=u!=null?n.document.elementFromPoint(u.x,u.y):void 0,v=d&&o.contains(d);if(d===o||v)return n.handleMove(l,e)}};return this.addEventListener(this.document.body,"move",a),this.targetNodes.set(e,o),function(){n.document&&(n.targetNodes.delete(e),n.removeEventListener(n.document.body,"move",a))}}},{key:"getTopMoveStartHandler",value:function(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}},{key:"installSourceNodeRemovalObserver",value:function(e){var o=this;this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(function(){e&&!e.parentElement&&(o.resurrectSourceNode(),o.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}},{key:"resurrectSourceNode",value:function(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}},{key:"uninstallSourceNodeRemovalObserver",value:function(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}}]),t}();K(Ui,"isSetUp",void 0);var Zu=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Ui(r,e,o)};function Ln(t){return ep.createElement(xu,{backend:On,options:Km},t.children)}var Km={backends:[{id:"html5",backend:Mc,transition:Bi},{id:"touch",backend:Zu,options:{enableMouseEvents:!0,delayMouseStart:100,delayTouchStart:250},transition:zi}]};s();var kt=T(C());W();function tp(){let{isDragging:t,item:r,currentOffset:e}=Cn(i=>({item:i.getItem(),currentOffset:i.getClientOffset(),isDragging:i.isDragging()})),[,o]=R(Qm),[,n]=R(Y);return kt.useEffect(()=>{t?window.document.body.classList.add("dragging"):window.document.body.classList.remove("dragging")},[t]),!t||!(r==null?void 0:r.previewLabel)?null:kt.createElement(ht,null,kt.createElement(m,{style:[f.directionRow,f.alignCenter,o.dragAndDropPreview,Ym(e)],pointerEvents:"none"},r.previewIcon?kt.createElement(m,{style:[p.Margin.mediumRight]},kt.createElement(k[r.previewIcon],{size:P.ICON_S,style:n.textInsideColor})):null,kt.createElement(m,null,kt.createElement(q,{style:[n.Label,n.textInsideColor]},r.previewLabel||"Drop to insert"))))}function Ym(t){if(!t)return{display:"none"};let{x:r,y:e}=t;return{transform:[{translateX:r},{translateY:e}]}}var Qm=D.create({dragAndDropPreview:t=>h({position:"absolute",paddingHorizontal:p.large,paddingVertical:p.small,backgroundColor:t.colors.primary.main,borderRadius:P.RADIUS_L,zIndex:gr.DRAGGED_ITEM},t.shadows.base)});s();function rp(t,r,e=void 0){switch(r){case"light":case"dark":return I(h({},t),{color:r});case"none":return t;case"bold":return I(h({},t),{color:us(e||Kt.PRIMARY)});default:Po(r)}}var Gi=1,qi={none:D.create({spaceHeader:t=>I(h({borderBottomWidth:1,borderBottomColor:t.colors.border.main,backgroundColor:t.colors.background.main},t.shadows.base),{zIndex:1}),separator:{}}),light:D.create({spaceHeader:t=>I(h({borderBottomWidth:1,borderBottomColor:t.colors.border.main,backgroundColor:t.colors.background.main},t.shadows.pop),{zIndex:1}),separator:t=>({width:Gi,height:40,backgroundColor:t.colors.border.main})}),dark:D.create({spaceHeader:t=>I(h({borderBottomWidth:1,borderBottomColor:t.colors.border.main,backgroundColor:t.colors.background.main},t.shadows.base),{zIndex:1}),separator:t=>({width:Gi,height:40,backgroundColor:t.colors.border.main})}),bold:D.create({spaceHeader:t=>I(h({borderBottomWidth:1,borderBottomColor:t.colors.primary.main,backgroundColor:t.colors.primary.main},t.shadows.base),{zIndex:1}),separator:t=>({width:Gi,height:40,backgroundColor:t.colors.text.main})})};s();var mo=T(C());function op(t){let{navigate:r}=te(),e=_t(),{spaces:o}=kr(),n=Ee(),i=mo.useRef(new Set);return mo.useEffect(()=>{let a=o.filter(c=>{var l;return Ma(c)&&((l=Co(c.edits))==null?void 0:l.user)===n.uid});i.current.forEach(c=>{if(a.some(u=>u.key===c))return;i.current.delete(c);let l=o.find(u=>u.key===c);l?e.notifyOrUpdate({id:l.key,title:`"${l.title}" created`,details:"Space successfully duplicated.",kind:"success",icon:k.Duplicate,closeable:!0,timeout:5e3,onOpen:()=>{r({screen:{type:"space",space:l.key}})}}):e.close(c)}),a.forEach(c=>{i.current.has(c.key)||(i.current.add(c.key),e.notifyOrUpdate({id:c.key,title:`Copying content to "${c.title}"\u2026`,details:"Hang tight. This process may take a few seconds, up to a few minutes, depending on the number of pages and files.",kind:"default",icon:gt,closeable:!0,timeout:0,onOpen:()=>{r({screen:{type:"space",space:c.key}})}}))})},[o]),mo.useEffect(()=>()=>{i.current.forEach((a,c)=>{e.close(c)})},[]),null}s();var np=T(C());W();function ip(t){return np.createElement(q,h({},t))}s();var _e=T(C());W();var yp=T(hp());function zn(t){let r=_e.useRef(null),[e,o]=xe(Ic),{medias:n,currentIndex:i}=e,a=()=>{o({medias:[],currentIndex:0})},c=()=>{o(d=>I(h({},d),{currentIndex:Math.max(d.currentIndex-1,0)}))},l=()=>{o(d=>I(h({},d),{currentIndex:Math.min(d.currentIndex+1,d.medias.length-1)}))},u=d=>{o(v=>I(h({},v),{currentIndex:d}))};return Mo({opened:n.length>0,closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,closeOnEsc:!0,onClose:a},r),Rr(n.length?{Left:()=>c(),Right:()=>l()}:{},"all",[o,!n.length]),n.length?_e.createElement(ht,{ref:r},_e.createElement(m,{style:Hr.imagesZoonPortal},_e.createElement(yp.default,{imageUrls:n.map(d=>({url:d.url})),index:i,renderIndicator:d=>_e.createElement(m,{style:Hr.indactor},_e.createElement(m,{style:Hr.indicatorElement}),_e.createElement(m,{style:[Hr.indicatorElement,f.alignCenter,f.justifyContentCenter]},_e.createElement(q,{style:Hr.indicatorText},`${d}/${n.length}`)),_e.createElement(m,{style:[Hr.indicatorElement,f.alignEnd,f.justifyContentCenter]},_e.createElement(ee,{icon:k.X,defaultTextStyle:{color:Kt.WHITE},onPress:()=>a()}))),renderArrowLeft:()=>_e.createElement(ee,{icon:k.ChevronLeft,defaultTextStyle:{color:Kt.WHITE},onPress:()=>c()}),renderArrowRight:()=>_e.createElement(ee,{icon:k.ChevronRight,defaultTextStyle:{color:Kt.WHITE},onPress:()=>l()}),onChange:d=>u(d),onCancel:()=>a(),enableSwipeDown:!0}))):null}var Hr=ge.create({imagesZoonPortal:{position:"absolute",top:0,left:0,right:0,bottom:0},indactor:{height:48,position:"absolute",left:0,top:0,right:0,display:"flex",flexDirection:"row",zIndex:20},indicatorElement:{flex:1},indicatorText:{color:Kt.WHITE}});s();var Ft=T(C());function vp(t){let{children:r}=t,[e,o]=Ft.useState(!1);return Ft.useEffect(()=>{o(!0)},[]),e?Ft.createElement(Ft.Fragment,null,r):null}s();var ho=T(C());function bp(t){let{children:r,statusCode:e}=t;return ho.createElement(ja,{render:({staticContext:o})=>(o&&(o.statusCode=e),ho.createElement(ho.Fragment,null,r))})}s();var De=T(C());W();var dg=To("app:crash");function ar(t){let{children:r}=t,e=De.useCallback((o,n,i)=>{dg.emergency(`An error occured during rendering:

`,o,`

The error is located at:
`,n),oe({type:"crash",sentryEvent:i})},[]);return De.createElement(ka,{fallback:o=>De.createElement(fg,h({},o)),onError:e,beforeCapture:mg},r)}function fg(t){let{eventId:r}=t,[,e]=R(gg),o=he(),n=()=>{Ra({eventId:r})},i=()=>{window.location.reload()};return De.useEffect(()=>{let a=document.querySelector(".gitbook-splashscreen");a==null||a.remove()},[]),De.createElement(m,{style:[e.background]},De.createElement(Bo,{title:o("something_wrong"),action:De.createElement(De.Fragment,null,De.createElement(ee,{kind:"primary",size:"medium",onPress:i,style:p.Margin.smallRight},o("reload")),De.createElement(ee,{kind:"secondary",size:"medium",onPress:n},o("let_us_know")))},o("we_have_been_notified")))}function mg(t){t.setTag(Oa.ERROR_CATEGORY,"react-crash")}var gg=D.create({background:t=>({backgroundColor:t.colors.background.main,minHeight:"100vh"})});s();var et=T(C());s();var Sp=T(C());function ea(t){let[,{open:r}]=qe(),e=Ys(),o=Sp.useMemo(()=>h({[Pr.PALETTE_OPEN]:()=>r()},e),[r,e]);return Rr(o,["application","editor-selection-collapsed"],[o]),null}s();function wp(t){let r=Ee(),{navigate:e}=te();return Mt(()=>({key:"navigation",title:"Navigation",commands:[{key:"navigation.goToSettings",title:"Go to settings",icon:k.ArrowRight,trigger:()=>{e({overlay:{type:"account",tab:"profile"}})}},{key:"navigation.switchOrganization",title:"Go to organization\u2026",icon:k.ArrowRight,trigger:()=>hg(r.uid,o=>{e({screen:{type:"home",organization:o.key}})},()=>{oe({type:"organization_open_create",reason:"sidebar_menu"}),e({overlay:{type:"welcome",onlyOrganizations:!0,hash:"sidebar_menu"}})})}]}),[e,r.uid]),null}function hg(t,r,e){return yt({title:"Search organizations\u2026",groups:[{key:"organizations",commands:()=>{let[o]=vt([fr(t)]);return vt(o.map(i=>It(i.organization))).filter(Re).map(i=>({key:i.key,title:i.title,icon:Ue(Xe,{org:i}),trigger:()=>{r(i)}}))}},{key:"organization-controls",commands:[{key:"create-organization",title:"Create an organization",icon:k.Organization,trigger:()=>{e()}}]}]})}s();var Bn=T(C());function Tp(t){let{navigate:r}=te();return Mt(()=>[vg(r),yg(r),bg(r)],[,r]),null}function yg(t){return{key:"search.content",title:"Search",filters:[Sg,wg],commands:r=>{if(!ta(r))return[];let e=Pt.read({query:r.query.text,types:r.query.text?["pages","sections"]:["pages"],filters:{pages:Hn(r),sections:Hn(r)},analyticsTags:ra(r)});return js(e,o=>{if(o.index!=="pages"&&o.index!=="sections")return null;let[[n],i]=Ls([()=>vt([Ro(o.object.space)]),()=>Lc(o.object.space,o.object.revision)]);if(!n||!i)return null;let a=i.pages[o.object.page];if(!a)return null;let c=a.emoji?Ue(Sr,{code:a.emoji}):void 0,l={title:n.title||We,icon:Ue(Qr,{space:n})};switch(o.index){case"pages":return{key:o.object.objectID,icon:c,label:l,title:o.object.title,subtitle:o.object.description,trigger:()=>{oe(h({type:"palette_open_search_result",index:o.index},r.analyticsContext)),t({screen:{type:"space",space:o.object.space,page:o.object.path}})}};case"sections":return{key:o.object.objectID,icon:c,label:l,title:o.object.title?o.object.title:a.title,subtitle:o.object.title?a.title:void 0,body:o.object.body.split(`
`).filter(Boolean).slice(0,5),trigger:()=>{oe(h({type:"palette_open_search_result",index:o.index},r.analyticsContext)),t({screen:{type:"space",space:o.object.space,page:Xt(i,a.key),hash:o.object.anchor}})}}}}).filter(Re)}}}function vg(t){return{key:"search.spaces",title:"Spaces",commands:r=>ta(r)?Pt.read({query:r.query.text,types:["spaces"],filters:{spaces:Hn(r)},analyticsTags:ra(r)}).map(o=>o.index!=="spaces"?null:jn(o,()=>{t({screen:{type:"space",space:o.object.objectID,page:""}}),oe(h({type:"palette_open_search_result",index:o.index},r.analyticsContext))})).filter(Re):[]}}function bg(t){return{key:"search.users",title:"Users",commands:r=>ta(r)?Pt.read({query:r.query.text,types:["users"],filters:{users:Hn(r)},analyticsTags:ra(r)}).map(o=>o.index!=="users"?null:jn(o,()=>{oe(h({type:"palette_open_search_result",index:o.index},r.analyticsContext))})).filter(Re):[]}}var Sg={key:"in",title:"space or organization",commands:t=>Pt.read({query:t.query.text,types:["spaces","organizations"]}).map(e=>jn(e,o=>{switch(e.index){case"organizations":return Uo(o,"in",{text:e.object.title,value:{organization:e.object.objectID}});case"spaces":return Uo(o,"in",{text:e.object.title,value:{space:e.object.objectID}})}}))},wg={key:"by",title:"anyone who has edited or created content",commands:t=>Pt.read({query:t.query.text,types:["users"]}).map(e=>{if(e.index!=="users")throw new Error("invalid result");return jn(e,o=>Uo(o,"by",{text:e.object.displayName,value:e.object.objectID}))})};function ta(t){return Boolean(t.query.text||Object.keys(t.query.filters).length>0)}function Hn(t){let{filters:r}=t.query,e=[];return r.in&&(r.in.value.organization?e.push(`organization:${r.in.value.organization}`):r.in.value.space&&e.push(`space:${r.in.value.space}`)),r.by&&e.push(`editedBy:${r.by.value}`),e.length>0?e.join(" AND "):void 0}function ra(t){let{filters:r}=t.query,e=[];return r.in&&r.in.value.space&&e.push({type:"space",space:r.in.value.space}),e}function jn(t,r){switch(t.index){case"organizations":return{key:t.object.objectID,title:t.object.title,icon:()=>Bn.createElement(Xe,{org:t.object,size:P.ICON_XL}),trigger:r};case"spaces":return{key:t.object.objectID,title:t.object.title,icon:()=>Bn.createElement(Qr,{space:t.object,size:P.ICON_XL}),trigger:r};case"users":return{key:t.object.objectID,title:t.object.displayName,icon:()=>Bn.createElement(Nt,{user:t.object,size:P.ICON_XL}),trigger:r}}}s();var Cp=T(C());function Wn(t){let[r,{close:e,setQuery:o}]=qe(),n=Cr(),i=Do(1e3);return Qs(a=>{if(!a||!!a.anchorRef){typeof r!="undefined"&&(i.cancel(),e());return}a.query.text!==r&&i(()=>o(a.query.text))}),Cp.useEffect(()=>{if(typeof r!="undefined"&&!n.opened){n.open(),n.typeQuery(r);return}},[n,r]),null}function Pp(t){let{screen:r}=Lt();return r.type!=="back_office"?et.createElement(et.Fragment,null,et.createElement(Tp,null),et.createElement(ea,null),et.createElement(wp,null),et.createElement(Wn,null)):et.createElement(et.Fragment,null,et.createElement(cc,null),et.createElement(ea,null))}s();var je=T(C());W();s();var ke=T(C());W();s();var Le=T(C());s();var tt=T(C());W();function Rp(t){let{onClose:r}=t,[,e]=R(Tg),o=Cc();return tt.createElement(Rs,{title:"Help and Feedback",onClose:r,size:"small"},tt.createElement(m,{style:[e.cardsWrapper]},tt.createElement(m,{style:e.actionCard},tt.createElement(Dt,{kind:"blank",url:"https://docs.gitbook.com/resources/keyboard-shortcuts"},tt.createElement(k.EnterKey,{style:p.Margin.smallRight}),"Keyboard shortcuts")),tt.createElement(m,{style:e.actionCard},tt.createElement(Dt,{kind:"blank",url:"https://docs.gitbook.com/"},tt.createElement(k.Page,{style:p.Margin.smallRight}),"Read the docs")),tt.createElement(m,{style:e.actionCard},tt.createElement(Dt,{kind:"blank",onPress:()=>o()},tt.createElement(k.Send,{style:p.Margin.smallRight}),"Contact support"))))}var Tg=D.create({actionCard:t=>({flexBasis:"100%",marginBottom:p.small,borderWidth:1,borderColor:t.colors.border.main,borderRadius:4,padding:p.small}),cardsWrapper:{flexDirection:"column"}});function kp(t){let[r,e]=Le.useState(null),{signOut:o}=Pc(),{navigate:n}=te(),i=Ee(),c=yr().color==="light",l=Le.useMemo(()=>({key:"settings",commands:()=>{let[g]=vt([fr(i.uid)]);return[...vt(g.map(O=>It(O.organization))).map((O,w)=>{let x=g[w];return!O||!Et(x.role,"admin-profile")?null:{key:`settings.${O.key}`,title:`${O.title} Settings`,icon:Ue(Xe,{org:O}),trigger:()=>{n({overlay:{type:"org_settings",organization:O.key,tab:"profile"}})}}}).filter(Re),{key:"settings.personal",title:"Personal Settings",icon:Ue(Nt,{user:i,squared:!0}),trigger:()=>{n({overlay:{type:"account",tab:"profile"}})}}]}}),[i.uid,n]),u=Le.useMemo(()=>({key:"theme",commands:[{key:"theme.switch",icon:c?k.ThemeDark:k.ThemeLight,title:`Switch to ${c?"dark":"light"} mode`,keywords:["theme","dark","light"],trigger:()=>{let g=Ya(i.uid),S=c?"dark":"light";g.set({theme:S},{merge:!0}),oe({type:"account_edit_theme",theme:S})}}]}),[i.uid,c]),d=Le.useMemo(()=>({key:"account",commands:[{key:"account.help",icon:k.HelpCircle,title:"Help & Feedback",trigger:()=>{e("help")}},{key:"account.signout",icon:k.Leave,title:"Sign Out",trigger:()=>{o()}}]}),[]),v=Le.useMemo(()=>yt({controlled:!0,variants:c?{color:"light"}:{color:"dark"},groups:[l,u,d]}),[c,l,u,d]);return Mt([u,d],[u,d]),Le.createElement(Le.Fragment,null,Le.createElement(Go,{testID:"sidebar.settingsButton",icon:k.Settings,size:"large",kind:"grey",rounded:!0,palette:v}),r==="help"?Le.createElement(Se,{theme:c?{color:"light"}:{color:"dark"}},Le.createElement(Rp,{onClose:()=>{e(null)}})):null)}s();var be=T(C());W();function Op(t){let r=be.useRef(null),{compact:e}=be.useContext(Ce);return be.createElement(ws,{ref:r,wrapper:Os,anchor:({ref:o,opened:n,toggle:i})=>be.createElement(_s,{ref:o,testID:"sidebar.createButton",icon:k.Plus,kind:"primary",rounded:!0,onPress:i,animatedAngle:45,active:n})},be.createElement(ks,{align:e?"end":"middle",position:e?"east":"north"},be.createElement(Cg,null)))}function Cg(t){let{navigate:r}=te(),e=ln(),o=Lo();return be.createElement(As,null,e.map(([n,i])=>be.createElement(Rg,{key:n.key,organization:n,membership:i})),be.createElement(Pg,null),be.createElement(Ns,null),be.createElement(zo,{icon:k.Organization,onPress:()=>{o.close(),oe({type:"organization_open_create",reason:"sidebar_menu"}),r({overlay:{type:"welcome",onlyOrganizations:!0,hash:"sidebar_menu"}})}},"Create organization"))}function Pg(t){let r=Ee(),e=Lo(),{createSpace:o}=Jr({user:r.uid}),n=async()=>{e.close(),o()},i=Ct(Nt,{user:r,size:20,squared:!0},[r]);return be.createElement(zo,{icon:i,onPress:n},"New ",be.createElement(q,{style:hr.Bold},"Personal")," Space")}function Rg(t){let{organization:r}=t,e=Lo(),{createSpace:o}=Jr({organization:r.key}),n=async()=>{e.close(),o&&o()},i=Ct(Xe,{org:r,size:20},[r]);return be.createElement(zo,{disabled:!o,title:o?null:`Insufficient permission to
create spaces in this organization`,icon:i,onPress:n},"New ",be.createElement(q,{style:hr.Bold},r.title)," Space")}function xp(t){let{compact:r}=ke.useContext(Ce),e=ke.createElement(Og,null),o=ke.createElement(m,{style:[f.flex1,r?p.Margin.mediumBottom:f.alignCenter]},ke.createElement(Op,null));return ke.createElement(m,{style:[...r?[f.alignCenter,f.justifyContentEnd,f.flex1,p.Padding.smallHorizontal,p.Margin.mediumVertical]:[p.Padding.mediumHorizontal,p.Margin.mediumVertical]]},ke.createElement(m,{style:[...r?[f.directionColumn]:[f.directionRow,f.alignCenter,f.flex1]]},r?ke.createElement(ke.Fragment,null,o,e):ke.createElement(ke.Fragment,null,e,o),ke.createElement(m,{style:r?p.Margin.smallTop:null},ke.createElement(kg,null))))}var kg=gi(kp,t=>I(h({},t),{color:"dark"})),Og=gi(Wc,t=>I(h({},t),{color:"dark"}));s();var sr=T(C());W();var Ip=P.L,xg=A.createResponsiveComponent(Ho);function Ep(t){let{compact:r}=sr.useContext(Ce),[,e]=R(Ig),[,{open:o}]=qe();return sr.createElement(A.View,{style:[e.sidebarHeader,f.directionRow,f.alignCenter,f.justifyContentCenter,!r&&p.Padding.mediumHorizontal],mobileStyle:"hidden",desktopStyle:"visible"},sr.createElement(m,{style:[f.flex1,r&&f.alignCenter]},sr.createElement(ee,{testID:"sidebar.findButton",icon:k.Search,size:"medium",kind:"sidebar_secondary",style:r?null:e.sidebarButton,alignIcons:"end",rightIcon:r?void 0:()=>sr.createElement(xg,{tabletStyle:"hidden",desktopStyle:"visible",shortcut:Pr.PALETTE_OPEN,kind:"primary"}),onPress:()=>o()},r?null:"Quick find")))}var Ig=D.create({sidebarHeader:t=>({height:Ip,maxHeight:Ip}),sidebarButton:{paddingRight:4}});s();var ne=T(C());s();var cr=T(C());W();s();var we=T(C());W();function jr(t){let{onPress:r,active:e=!1,indent:o=0,onToggle:n,href:i}=t,[,a]=R(_p),c=_o();return we.createElement(re.TouchableOpacity,{href:i,onPress:r,style:[a.sidebarMenuItem,e&&a.sidebarMenuItemActive,{paddingLeft:p.medium+o*p.medium-(n?p.medium/4:0)}],hoverStyle:e?null:a.sidebarMenuItemToggleHovered},we.createElement(Se,{theme:{color:"dark"}},we.createElement(Eg,I(h({},t),{topLevelTheme:c.color}))))}function Eg(t){let{icon:r,children:e,topLevelTheme:o,active:n=!1,buttons:i=[],buttonsVisibility:a="active",opened:c,onToggle:l}=t,[,u]=R(Y),[,d]=R(_p),g=br()==="mobile";return we.createElement(we.Fragment,null,l?we.createElement(re.TouchableOpacity,{onPress:S=>{S.preventDefault(),l()},style:[r&&p.Margin.smallRight,d.sidebarMenuItemToggle],hoverStyle:d.sidebarMenuItemToggleHovered},c?we.createElement(k.ChevronDown,{size:P.ICON_S,style:n?u.text:u.textMuted}):we.createElement(k.ChevronRight,{size:P.ICON_S,style:n?u.text:u.textMuted})):null,r?we.createElement(m,null,we.createElement(r,{size:P.ICON_M,style:n?u.text:u.textMuted})):null,we.createElement(m,{style:[f.flex1,l&&!r?d.textLineWithToggle:p.Padding.smallLeft]},we.createElement(Jt,{style:[u.Label,n?[u.Medium,u.text]:u.textMid]},e)),i.length>0?we.createElement(re.View.Child,{style:[f.directionRow,f.alignCenter],hoverStyle:d.sidebarMenuItemButtonActive,inactiveStyle:g||a==="active"&&n||a==="always"?d.sidebarMenuItemButtonActive:d.sidebarMenuItemButtonInactive},we.createElement(Se,{theme:{color:o}},i.map((S,O)=>we.createElement(m,{key:O,style:[O>0&&p.Margin.smallLeft]},S)))):null)}var _p=D.create({sidebarMenuItem:{flexDirection:"row",alignItems:"center",height:P.S,paddingVertical:p.small/4,paddingHorizontal:p.medium,marginBottom:1},sidebarMenuItemActive:t=>h({backgroundColor:t.colors.sidebar.activeItem},Eo.Medium),sidebarMenuItemToggle:{padding:p.small/2,borderRadius:P.RADIUS_M},sidebarMenuItemToggleHovered:{backgroundColor:"rgba(0,0,0,0.1)"},sidebarMenuItemButtonInactive:{display:"none",opacity:0},sidebarMenuItemButtonActive:{display:"flex",opacity:1},textLineWithToggle:{paddingLeft:p.small-(P.ICON_M-P.ICON_S)}});s();var de=T(C());W();var _g=re.createInteractiveComponent(Jt);function Fn(t){let{title:r,titleTarget:e,icon:o,children:n,details:i,buttons:a=[]}=t,{compact:c}=de.useContext(Ce),[,l]=R(Lg),{getNavigationLinkProps:u}=te();return de.createElement(m,{style:[l.borderTop,p.Padding.mediumVertical]},de.createElement(Se,{theme:{color:"dark"}},de.createElement(m,{style:[p.Margin.smallHorizontal,de.Children.count(n)>0?p.Margin.smallBottom:{},!c&&i?[l.detailsBox,p.Padding.smallVertical]:null]},de.createElement(m,{style:[f.directionRow,f.alignCenter,p.Padding.smallHorizontal]},o?de.createElement(o,{size:P.XS}):null,c?null:de.createElement(de.Fragment,null,de.createElement(m,{style:[o&&p.Margin.smallLeft,f.flex1,f.directionRow,f.alignCenter]},de.createElement(Dg,h({style:f.flex1},u(e)),r)),a.length>0?de.createElement(m,{style:[f.directionRow,f.alignCenter]},a.map((d,v)=>de.createElement(m,{key:v,style:[v>0&&p.Margin.smallLeft]},d))):null)),c?null:i)),n)}function Dg(t){let n=t,{children:r}=n,e=pr(n,["children"]),[,o]=R(Y);return de.createElement(re.TouchableOpacity,h({},e),de.createElement(_g.Child,{style:[o.Body,o.text],activeStyle:o.textSidebarPrimary},r))}var Lg=D.create({borderTop:t=>({borderTopColor:t.colors.sidebar.itemBorder,borderTopWidth:1}),detailsBox:t=>({backgroundColor:t.colors.sidebar.activeItem,borderColor:t.colors.sidebar.inputBorder,borderWidth:1,borderRadius:P.RADIUS_L})});s();var rt=T(C());s();var Un=T(C());W();function Wr(t){let{owner:r,children:e,onDropHover:o,style:n}=t,[i,a]=wi(r,{collect:c=>({hovered:c.isOver({shallow:!0})&&c.canDrop()})});return Un.createElement(Vo,{ref:a,style:n,onDropHover:o,dropHovered:i.hovered},e)}function Fr(t){let{accept:r,owner:e,at:o}=t,[n,i]=wi(e,{at:o,accept:[r],collect:a=>({hovered:a.isOver()&&a.canDrop()})});return Un.createElement(m,{style:Mg.collectionDropLine},Un.createElement(Es,{ref:i,dropHovered:n.hovered,position:"top"}))}var Mg=ge.create({collectionDropLine:{position:"relative",zIndex:10}});function Gn(t){let{space:r,active:e,previousOrderIndex:o,nextOrderIndex:n,indent:i}=t,a=rt.useRef(null),[c,l]=Nc(r),u=Cr(a),d=ko(r),v=La(r),{getNavigationLinkProps:g}=te(),S=g({screen:{type:"space",space:r.key,organization:"organization"in r?r.organization:void 0,changeRequest:void 0,page:"/"}}),[,O]=Uc(r),[w,x]=Gc(r,{collect:le=>({hovered:le.isOver({shallow:!0})&&le.canDrop()})}),M=()=>{S.onPress()},H=Ct(Qr,{space:r,withBackground:!1},[r]),J=rt.createElement(rt.Fragment,null,l,rt.createElement(jr,I(h({icon:H,active:e},S),{indent:i,buttonsVisibility:u.opened?"always":"hover",buttons:c.commands.length?[rt.createElement(ee,{ref:a,icon:k.MoreVertical,kind:"sidebar_blank",size:"small",active:u.opened,onPress:le=>{le.preventDefault(),u.open(yt({controlled:!0,groups:[c]}))}})]:void 0}),r.title||We));return v?J:rt.createElement(Vo,{ref:x,dropHovered:w.hovered,onDropHover:M},rt.createElement(Fr,{accept:"space",owner:d,at:{before:o,after:r.orderIndex}}),rt.createElement(No,{ref:O},J),rt.createElement(Fr,{accept:"space",owner:d,at:{before:r.orderIndex,after:n}}))}function Dp(t){let{indent:r=0,screenSpace:e}=t,[o,n]=xe(Zo("trash")),{spaces:i}=xc(),[,a]=R(Ag),c=()=>{n(!o)};return i.length===0?null:cr.createElement(m,{style:[a.borderTop,p.Padding.mediumTop]},cr.createElement(jr,{opened:o,onToggle:c,indent:r,icon:k.Trashcan,onPress:c},"Trash"),o?cr.createElement(cr.Fragment,null,i.map(l=>cr.createElement(Gn,{key:l.key,space:l,indent:r,active:l.key===e}))):null)}var Ag=D.create({borderTop:t=>({borderTopColor:t.colors.sidebar.itemBorder,borderTopWidth:1})});s();var Me=T(C());W();var Lp="@content:hide-personal-user-cta";function Mp(t){let[r,e]=Me.default.useState(!1),[,o]=R(Ng),{compact:n}=Me.default.useContext(Ce),[,i]=R(Y);if(hi.get(Lp)||r)return null;function c(){hi.set(Lp,!0),e(!0)}return Me.default.createElement(Se,{theme:{color:"dark"}},Me.default.createElement(m,{style:[o.wrapper]},Me.default.createElement(m,{style:[f.alignCenter,p.Margin.mediumHorizontal,p.Padding.mediumVertical,n?null:[o.detailsBox,p.Padding.smallVertical]]},Me.default.createElement(m,{style:o.iconWrapperStyle},Me.default.createElement(m,{style:o.iconInner},Me.default.createElement(k.Bulb,{size:P.ICON_M,style:o.iconStyle}))),Me.default.createElement(m,{style:[f.alignCenter,p.Padding.smallHorizontal,p.Margin.smallTop]},Me.default.createElement(m,{style:p.Margin.mediumBottom},Me.default.createElement(q,{style:[o.detailsText,i.Label,i.Medium,i.textSidebarStandout]},"Want to collaborate with others, unlock advanced custom branding, and explore new ways of sharing content?")),Me.default.createElement(At,{kind:"upgrade",size:"medium",to:{overlay:{type:"welcome",onlyOrganizations:!0,hash:"personal_user_cta"}},onPress:()=>{oe({type:"organization_open_create",reason:"personal_user_cta"})},style:p.Margin.smallBottom},"Create an organization"),Me.default.createElement(ee,{size:"small",defaultTextStyle:i.textMuted,onPress:c},"Dismiss")))))}var Ng=D.create({iconWrapperStyle:t=>({flexGrow:0,flexDirection:"row",justifyContent:"center",alignItems:"center",outlineStyle:"none",borderWidth:1,borderColor:"transparent",height:P.BUTTON_M,backgroundColor:t.colors.upgrade.main,borderRadius:100,width:P.BUTTON_M,paddingHorizontal:0,marginTop:-((P.BUTTON_M+p.medium)/2)}),iconInner:{flexShrink:1},iconStyle:t=>({color:t.colors.upgrade.textInside}),detailsText:{textAlign:"center"},wrapper:t=>({borderTopColor:t.colors.sidebar.itemBorder,borderTopWidth:1,paddingTop:p.large+P.ICON_M/2,paddingBottom:p.large}),detailsBox:t=>({backgroundColor:t.colors.sidebar.activeItem,borderColor:t.colors.sidebar.inputBorder,borderWidth:1,borderRadius:P.RADIUS_L})});s();var Ae=T(C());W();s();var qn=T(C());function oa(t){let{createSpace:r,createCollection:e}=Jr(t),{navigate:o}=te(),n=Jo(t);return qn.useMemo(()=>({key:"owner",commands:[r?{key:"new_space",icon:k.Space,title:"New Space",trigger:async()=>{await r()}}:null,e?{key:"new_collection",icon:k.Collection,title:"New Collection",trigger:async()=>{await e()}}:null,t.organization&&Et(n,"add-guests")?{key:"invite_members",icon:k.UserPlus,title:"Invite Members",trigger:async()=>{o({overlay:{type:"org_invite",organization:t.organization}})}}:null].filter(Re)}),[r,e])}function Xn(t){let n=t,{owner:r}=n,e=pr(n,["owner"]),o=oa(r);return o.commands.length?qn.createElement(Go,h({palette:()=>yt({controlled:!0,groups:[o]}),icon:k.Plus,size:"small"},e)):null}function Ap(t){let{organization:r,children:e}=t,o=Jo({organization:r.key}),[{result:n}]=Qo([Xa(r.key)]),i=ac(r,n),a=i===null,c={organization:r.key},l=Et(o,"admin-billing"),u=Ct(Xe,{org:r},[r]);return Ae.createElement(Wr,{owner:c},Ae.createElement(Fn,{title:r.title,titleTarget:{screen:{type:"home",organization:r.key}},icon:u,buttons:[Ae.createElement(Js,{command:"navigation.switchOrganization",size:"small",title:"Go to organization",icon:k.ChevronDown}),Ae.createElement(Xn,{owner:c,title:`Create content in ${r.title}`})],details:n&&((n==null?void 0:n.status)==="trialing"&&!!n.trialEnd&&l||a)?Ae.createElement(Vg,{organization:r,billing:n,canAdminBilling:l,featuresSet:i}):void 0},e))}function Vg(t){var l;let{organization:r,billing:e,canAdminBilling:o,featuresSet:n}=t,[,i]=R(Y),a=((l=e.trialEnd)==null?void 0:l.toDate())||new Date(0),c=Math.floor((a.getTime()-Date.now())/(24*60*60*1e3));return Vs(a),Ae.createElement(Se,{theme:{color:"dark"}},Ae.createElement(m,{style:[f.alignCenter,p.Padding.smallHorizontal,p.Margin.mediumTop]},Ae.createElement(m,{style:[p.Margin.smallBottom]},e.status==="trialing"?Ae.createElement(q,{style:[Np.detailsText,i.Label,i.text]},"Your trial ends"," ",Ae.createElement(q,{style:[i.Bold]},c===0?"today":c===1?"tomorrow":`in ${c} days`),". Upgrade to keep access to premium features."):Ae.createElement(q,{style:[Np.detailsText,i.Label,i.text]},"Your organization has been ",Ae.createElement(q,{style:[i.Bold]},"disabled"),"."," ",o?"Upgrade to keep access to premium features.":"Contact your organization administrator to upgrade and keep access to premium features.")),o?Ae.createElement(At,{kind:"upgrade",size:"medium",to:{overlay:{type:"org_settings",organization:r.key,tab:"plans",hash:"sidebar_cta"}},onPress:()=>{oe(os(r.key,{type:"organization_open_upgrade",currentFeaturesSet:n,reason:"sidebar_cta"}))},style:[p.Margin.smallTop,p.Margin.smallBottom]},"Upgrade Now"):null))}var Np=ge.create({detailsText:{textAlign:"center"}});s();var $n=T(C());function Vp(t){let{children:r}=t,e=Ee(),o={user:e.uid},n=Ct(Nt,{user:e,squared:!0},[e]);return $n.createElement(Wr,{owner:o},$n.createElement(Fn,{title:"Personal",titleTarget:{screen:{type:"home",organization:void 0}},icon:n,buttons:[$n.createElement(Xn,{owner:o,title:"Create personal content"})]},r))}s();var ot=T(C());function zp(t){let{collection:r,active:e,indent:o,previousOrderIndex:n,nextOrderIndex:i,children:a}=t,c=ko(r),l=I(h({},c),{collection:r.key}),u=ot.useRef(null),d=Cr(u),v=oa(l),[g,S]=Ac(r),[O,w]=xe(Zo(r.key)),[,x]=Fc(r),M=()=>{w(!0)},{getNavigationLinkProps:H}=te(),J=H({screen:{type:"collection",collection:r.key,organization:"organization"in r?r.organization:void 0}});return ot.createElement(Wr,{owner:l,onDropHover:M},ot.createElement(Fr,{accept:"collection",owner:c,at:{before:n,after:r.orderIndex}}),ot.createElement(No,{ref:x},S,ot.createElement(jr,I(h({active:e},J),{opened:O,onToggle:()=>w(!O),buttonsVisibility:d.opened?"always":"hover",buttons:[v.commands.length||g.commands.length?ot.createElement(ee,{ref:u,onPress:le=>{le.preventDefault(),d.open(yt({controlled:!0,groups:[v.commands.length?v:null,g.commands.length?g:null].filter(Re)}))},icon:k.MoreVertical,kind:"sidebar_blank",size:"small",active:d.opened}):null],indent:o}),r.title)),O?ot.createElement(ot.Fragment,null,a):ot.createElement(Fr,{accept:"collection",owner:c,at:{before:r.orderIndex,after:i}}))}s();var Bp=T(C());function Hp(t){let r=kr(),e=mr(Ec);Bp.useEffect(()=>{if(!(t==null?void 0:t.type))return;let o=t.type==="space"?zg(r,t.space):na(r,t.collection);o.length>0&&e(n=>{let i=n;return o.forEach(a=>{i=i[a]?i:I(h({},i),{[a]:!0})}),i})},[r,e,t==null?void 0:t.type,t==null?void 0:t.space,t==null?void 0:t.collection])}function na(t,r){let e=t.collections.find(o=>o.key===r);return e?e.collection?[...na(t,e.collection),e.collection]:[]:[]}function zg(t,r){let e=t.spaces.find(o=>o.key===r);return(e==null?void 0:e.collection)?[...na(t,e.collection),e.collection]:[]}function jp(t){let{screenSpace:r,screenCollection:e}=t,{compact:o}=ne.useContext(Ce),n=Ee();return Hp((r?{type:"space",space:r}:void 0)||(e?{type:"collection",collection:e}:void 0)),o?null:ne.createElement(ne.Fragment,null,ne.createElement(Vp,null,ne.createElement(ia,I(h({},t),{owner:{user:n.uid}}))),ne.createElement(ne.Suspense,{fallback:null},ne.createElement(Bg,h({},t))),ne.createElement(Dp,{screenSpace:r}))}function Bg(t){let{screenOrganization:r}=t,{permissions:e}=kr(),o=Object.keys(e.organizations),[n,i]=ne.useState(void 0),[a]=er([n&&o.includes(n)?It(n):null]);return ne.useEffect(()=>{r&&o.includes(r)?i(r):n||i(o[0]||null)},[r,o.length]),qo(r&&(a==null?void 0:a.key)===r?a.title:r?"":"Personal"),n===void 0?null:a?ne.createElement(Ap,{organization:a},ne.createElement(ia,I(h({},t),{owner:{organization:a.key}}))):ne.createElement(Mp,null)}function ia(t){let{indent:r=0,owner:e,screenSpace:o,screenCollection:n}=t,{spaces:i,collections:a}=Oc(e,{includeOrphans:!0});return ne.createElement(ne.Fragment,null,i.map((c,l)=>{let u=l>0?i[l-1]:null,d=i[l+1];return ne.createElement(Gn,{key:c.key,space:c,active:o===c.key,previousOrderIndex:u?u.orderIndex:void 0,nextOrderIndex:d?d.orderIndex:void 0,indent:r})}),a.map((c,l)=>{let u=l>0?a[l-1]:null,d=a[l+1];return ne.createElement(zp,{key:c.key,collection:c,active:n===c.key,previousOrderIndex:u?u.orderIndex:void 0,nextOrderIndex:d?d.orderIndex:void 0,indent:r},ne.createElement(ia,I(h({},t),{owner:I(h({},e),{collection:c.key}),indent:r+1})))}))}var Hg=22;function Wp(t){let{screen:r}=t;return je.createElement(jg,{screenOrganization:"organization"in r?r.organization:void 0,screenSpace:r.type==="space"?r.space:void 0,screenCollection:r.type==="collection"?r.collection:void 0})}var jg=je.memo(function(r){let[e,o]=R(Wg);return je.createElement(Fe,{backgroundColor:e.colors.sidebar.background,style:[o.sidebar,f.flex1,f.directionColumn]},ic()?je.createElement(nc,{style:{height:Hg}}):null,je.createElement(Ep,null),je.createElement(xt,{style:[f.flex1]},je.createElement(je.Suspense,{fallback:null},je.createElement(jp,h({},r)))),je.createElement(xp,null))}),Wg=D.create({sidebar:t=>({borderRightColor:t.colors.sidebar.itemBorder,borderRightWidth:1})});s();var B=T(C());W();function Fp(t){let{screen:r}=t,[e,o]=R(Y),[,n]=R(aa),{compact:i}=B.useContext(Ce),a=mr(_c);return B.useEffect(()=>{i&&a(!0)},[i,a]),qo("Settings"),B.createElement(Fe,{style:[f.directionColumn,f.flex1,n.wrapper,p.Padding.medium],backgroundColor:e.colors.background.main},B.createElement(m,{style:[f.directionRow,f.alignCenter]},B.createElement(At,{kind:"grey",testID:"settings.closeButton",icon:k.ChevronLeft,to:{overlay:null},size:"large",title:"Return to app"}),B.createElement(m,{style:[f.flex1,p.Margin.smallLeft]},B.createElement(q,{style:[o.Heading2,o.text]},"Settings"))),B.createElement(xt,{style:[f.flex1]},B.createElement(B.Suspense,{fallback:B.createElement(Ie,{size:"small"})},B.createElement(Fg,{screen:r}),B.createElement(Ug,{screen:r}))))}function Fg(t){let{screen:r}=t,{getNavigationLinkProps:e}=te(),o=bi(fi.FEATURE_FLAG_TEMPLATES),[,n]=R(aa),i=a=>e({current:{type:"account",tab:a}});return B.createElement(Ge,{direction:"vertical"},B.createElement(m,{style:[n.personalSettings,p.Padding.mediumVertical]},B.createElement(Ge.Tab,I(h({active:r.type==="account"&&r.tab==="profile"},i("profile")),{icon:k.User}),"Account"),o?B.createElement(Ge.Tab,h({active:r.type==="account"&&r.tab==="templates"},i("templates")),"Templates"):null,B.createElement(Ge.Tab,I(h({active:r.type==="account"&&r.tab==="developer"},i("developer")),{icon:k.Code}),"Developer Settings")))}function Ug(t){let{screen:r}=t,e=ln();return B.createElement(m,{style:[p.Padding.largeVertical]},e.map(([o,n])=>Et(n.role,"admin-billing")?B.createElement(Gg,{key:o.key,screen:r,organization:o}):null))}function Gg(t){let{screen:r,organization:e}=t,{getNavigationLinkProps:o}=te(),n=bi(fi.FEATURE_FLAG_TEMPLATES),i=a=>o({current:{type:"org_settings",organization:e.key,tab:a}});return B.createElement(qg,h({icon:B.createElement(Xe,{org:e,size:P.BUTTON_S}),title:e.title,expanded:"organization"in r&&r.organization===e.key},i("profile")),B.createElement(m,{style:[p.Padding.largeLeft]},B.createElement(Ge.Tab,I(h({active:r.type==="org_settings"&&r.tab==="profile"&&r.organization===e.key},i("profile")),{icon:k.Organization}),"General"),B.createElement(Ge.Tab,I(h({active:r.type==="org_settings"&&r.tab==="members"&&r.organization===e.key},i("members")),{icon:k.Team}),"Members"),B.createElement(Ge.Tab,I(h({active:r.type==="org_settings"&&r.tab==="sso"&&r.organization===e.key},i("sso")),{icon:k.Email}),"SSO"),n?B.createElement(Ge.Tab,h({active:r.type==="org_settings"&&r.tab==="templates"&&r.organization===e.key},i("templates")),"Templates"):null,B.createElement(Ge.Tab,I(h({active:r.type==="org_settings"&&r.tab==="plans"&&r.organization===e.key},i("plans")),{icon:k.Grid}),"Plans"),e.type!=="legacy-enterprise"?B.createElement(Ge.Tab,I(h({active:r.type==="org_settings"&&r.tab==="billing"&&r.organization===e.key},i("billing")),{icon:k.ExternalLink}),"Billing"):null))}function qg(t){let u=t,{icon:r,title:e,children:o,expanded:n}=u,i=pr(u,["icon","title","children","expanded"]),[,a]=R(Y),[,c]=R(aa),l=re.useInteractiveComponent(n?k.ChevronDown:k.ChevronRight);return B.createElement(m,{style:[p.Margin.mediumBottom]},B.createElement(re.TouchableOpacity,h({style:[p.Margin.mediumBottom,p.Padding.smallHorizontal,f.directionRow,f.alignCenter,f.flex1]},i),B.createElement(m,{style:p.Margin.smallRight},r),B.createElement(m,{style:f.flex1},B.createElement(re.Text.Child,{style:[a.Label,a.text,a.Bold],activeStyle:a.primary},e)),B.createElement(m,{style:p.Margin.smallLeft},B.createElement(l.Child,{size:P.ICON_XS,style:[a.textMid],activeStyle:a.primary}))),n?B.createElement(m,null,B.createElement(Ge,{direction:"vertical",style:c.fullWidth},o)):null)}var aa=D.create({fullWidth:{width:"100%"},wrapper:t=>({borderRightColor:t.colors.border.main,borderRightWidth:1}),personalSettings:t=>({width:"100%",borderBottomColor:t.colors.border.main,borderBottomWidth:1})});function Xg(){return L.createElement(Oo,null,L.createElement(ar,null,L.createElement(L.Suspense,{fallback:L.createElement(Up,null)},L.createElement(Ln,null,L.createElement(cn,null,L.createElement(m,{style:[f.flex1,f.directionColumn]},L.createElement($g,null,L.createElement(rn,null,L.createElement(Tr,{persist:!0},L.createElement(kc,null,L.createElement(uc,null,L.createElement(Kg,null),L.createElement(dn,null),L.createElement(Pp,null),L.createElement(ec,null),L.createElement(zn,null),L.createElement(tp,null),L.createElement(op,null))),L.createElement(Jg,null))))))))))}function $g(t){let{children:r}=t;return L.useEffect(()=>{let e=document.querySelector(".gitbook-splashscreen");e==null||e.remove()},[]),L.createElement(L.Fragment,null,r)}function Kg(){return nl(),Us(),L.createElement(wc,{Screen:Yg,fallback:L.createElement(Up,null)})}function Yg(t){let{screen:r,isOverlay:e=!1}=t;switch(r.type){case"account":case"org_settings":return L.createElement(yi,{sidebar:L.createElement(Fp,{screen:r}),screen:r},L.createElement(pc,{screen:r}));case"account_verification":return L.createElement(vc,null);case"org_join":return L.createElement(hc,{screen:r});case"org_invite":return L.createElement(yc,{screen:r,isOverlay:e});case"welcome":return L.createElement(fc,{screen:r});case"quickstart":return L.createElement(dc,{screen:r,isOverlay:e});case"back_office":return L.createElement(sc,{screen:r});case"legacy_account":return L.createElement(bc,{screen:r});case"legacy_space":return L.createElement(Sc,{screen:r});default:return L.createElement(yi,{sidebar:L.createElement(Wp,{screen:r}),sidebarCollapsable:!0,screen:r},L.createElement(Qg,{screen:r}))}}function Qg(t){let{screen:r}=t;switch(r.type){case"root":return L.createElement(mc,{screen:r});case"home":return L.createElement(gc,{screen:r});case"space":return L.createElement(lc,{screen:r});case"collection":return L.createElement(Zs,{screen:r});default:return null}}function Up(){let[t]=R();return L.createElement(Fe,{backgroundColor:t.colors.background.muted,style:[f.flex1]},L.createElement(Ie,{size:"xlarge"}))}function Jg(){let t=Lt();return el(t.screen.type==="space"&&(t.screen.changeRequest||t.screen.revision)?"bottom-right-with-bar":"bottom-right"),null}s();var Ut=T(C());s();var Pe=T(C());s();var X=T(C());W();s();var Oe=T(C());W();var{TOC_DESKTOP_WIDTH:Zg}=Xo,eh=A.createResponsiveComponent(mt),th=re.createInteractiveComponent(eh),sa=Zg-p.large-p.large;function Kn(t){let{space:r,collection:e,mobileStyle:o,desktopStyle:n}=t,[,i]=R(Y),{getNavigationLinkProps:a}=te(),c=(e?(e==null?void 0:e.publishedTitle)||(e==null?void 0:e.title):r.publishedTitle||r.title)||We,l=c.length>14,u=l?2:1,d=e?e.logoURL:r.logoURL;return Oe.createElement(th,I(h({style:[f.directionRow,f.alignCenter],mobileStyle:o,desktopStyle:n},a({screen:{space:r.key,page:""}})),{testID:"public.headerHomeLink"}),d?Oe.createElement(A.View,{style:[f.flex1,f.directionRow,f.alignCenter,Yn.headerDesktop],mobileStyle:Yn.logoMobile,desktopStyle:Yn.logoDesktop},Oe.createElement(A.View,{desktopStyle:"visible",mobileStyle:"hidden"},Oe.createElement(Pi,{src:$r(d,{height:40,fit:"contain"}),bestHeight:40,maxWidth:sa})),Oe.createElement(A.View,{desktopStyle:"hidden",mobileStyle:"visible"},Oe.createElement(Pi,{src:$r(d,{height:30,fit:"contain"}),bestHeight:30,maxWidth:sa}))):Oe.createElement(m,{style:[Yn.headerDesktop,f.flex1,f.directionRow,f.justifyContentStart,f.alignCenter]},Oe.createElement(m,null,Oe.createElement(A.View,{mobileStyle:"hidden",desktopStyle:"visible"},Oe.createElement(Si,{content:e||r,renderFor:"public-content",size:P.BUTTON_L,style:[p.Margin.mediumRight]})),Oe.createElement(A.View,{mobileStyle:"visible",desktopStyle:"hidden"},Oe.createElement(Si,{content:e||r,renderFor:"public-content",size:P.ICON_XL,style:[p.Margin.mediumRight]}))),Oe.createElement(A.Text,{mobileStyle:[i.Heading3],desktopStyle:[l?i.Heading3:i.Heading2]},Oe.createElement(re.Text.Child,{numberOfLines:u,ellipsizeMode:"tail",accessibilityLabel:c,inactiveStyle:i.text,activeStyle:t.space.headerTheme==="bold"?i.textStandout:i.primary},c))))}var Yn=ge.create({logoMobile:{height:30},logoDesktop:{height:40},headerDesktop:{maxWidth:sa}});var{PAGE_BODY_DESKTOP_H_PADDING:rh,getPageOutlineWrapperWidth:oh,getToCWrapperDesktopWidth:nh}=Xo,ih=P.XL,ah=P.L,sh=A.createResponsiveComponent(ee);function Gp(t){let{space:r}=t,e=$a(r.headerTheme,r.themeMode),o=_o(),n=X.useMemo(()=>rp(o,e,r.primaryColor),[e,r.primaryColor,o]);return X.createElement(Se,{theme:n},r.headerTheme==="none"?X.createElement(A.View,{desktopStyle:"hidden",mobileStyle:"visible"},X.createElement(qp,I(h({},t),{headerTheme:e}))):X.createElement(qp,I(h({},t),{headerTheme:e})))}function qp(t){let{space:r,headerTheme:e,revision:o,collection:n,currentPageLayout:i}=t,[,a]=R(qi[e]),c=wr(xe(Or),X.useState(!1)),l=i==="docs",u=i==="landing";return X.createElement(A.View,{desktopStyle:yo.desktopHeight,mobileStyle:yo.mobileHeight,style:[a.spaceHeader,f.directionRow,f.alignCenter]},l?X.createElement(sh,{desktopStyle:"hidden",mobileStyle:"visible",icon:k.Menu,style:p.Margin.smallRight,kind:"grey",rounded:!0,title:c.opened?"Hide Table of Content":"Show Table of Content",onPress:c.toggle}):null,X.createElement(Kn,{space:r,collection:n,mobileStyle:[yo.autoWidth,p.Padding.noneHorizontal,f.justifyContentStart,l?null:p.Margin.smallLeft],desktopStyle:[{width:nh()},p.Padding.largeHorizontal,f.justifyContentEnd]}),l?X.createElement(Xp,{headerTheme:e,direction:"Left"}):null,X.createElement(lh,{space:r,revision:o}),u?null:X.createElement(Xp,{headerTheme:e,direction:"Right"}),X.createElement(ch,{headerTheme:e}))}function Xp(t){let[,r]=R(qi[t.headerTheme]);return X.createElement(A.View,{style:[r.separator,{[`margin${t.direction}`]:-1}],mobileStyle:"hidden",desktopStyle:"visible"})}function ch(t){let[,{open:r}]=qe(),e=he();return X.createElement(A.View,{mobileStyle:yo.autoWidth,desktopStyle:{width:oh()}},X.createElement(m,{style:[f.flex1,f.alignStart,p.Padding.largeLeft,p.Padding.smallRight]},X.createElement(A.View,{mobileStyle:"hidden",desktopStyle:"visible"},X.createElement(ee,{icon:k.SearchPublic,size:"medium",kind:t.headerTheme==="bold"?"default_bold":"default",alignIcons:"end",onPress:r,style:[p.Padding.noneHorizontal]},e("search"))),X.createElement(A.View,{mobileStyle:"visible",desktopStyle:"hidden"},X.createElement(ee,{icon:k.SearchPublic,size:"medium",kind:"default",alignIcons:"end",onPress:r,style:[p.Padding.noneHorizontal]}))))}function lh(t){let{space:r}=t;return X.createElement(X.Fragment,null,X.createElement(A.View,{style:[f.directionRow,f.alignCenter,f.flex1],tabletStyle:"visible",desktopStyle:"hidden"}),X.createElement(A.View,{style:[f.directionRow,f.alignCenter,f.flex1],tabletStyle:"hidden",desktopStyle:yo.headerLinks},(r.headerLinks||[]).map(e=>e.title?X.createElement(X.Suspense,{fallback:null,key:e.title},X.createElement(uh,h({title:e.title,contentRef:e.to},t))):null)))}function uh(t){let{contentRef:r,space:e,revision:o}=t,n=en(r,{space:e.key,revision:o.key});return X.createElement(Dt,{url:n.href,onPress:i=>{i.nativeEvent.metaKey||i.nativeEvent.ctrlKey||(i.preventDefault(),n.open())},kind:t.space.headerTheme==="bold"?"bold":"default",sameWebTab:!1,style:[p.Padding.mediumHorizontal,hr.Body,hr.Medium],numberOfLines:2,ellipsizeMode:"tail",accessibilityLabel:t.title},t.title)}var yo=ge.create({autoWidth:{width:"auto"},headerLinks:{paddingHorizontal:rh-p.medium},mobileHeight:{height:ah},desktopHeight:{height:ih}});s();var ca=T(C());function Qn(t){let{children:r,ssrRequestPath:e,ssrRouterContext:o}=t;return o?ca.createElement(Wa,{location:e,context:o},r):ca.createElement(rn,null,r)}s();var Jn=T(C());function $p(t="https://policies.gitbook.com/privacy/cookies",r=!1){let e=_t(),o=he();Jn.useEffect(()=>{if(!r)return;let n=!1;if(as()!==null)return;let i=e.notify({title:o("cookies"),details:o("cookie_prompt",Jn.createElement(Dt,{url:t},o("cookie_policy"))),timeout:0,icon:k.Cookies,actions:[{label:o("reject_all"),onPress:()=>{n=!0,mi(!1),i()}}],onClose:()=>{n||mi(!0)}})},[])}s();var fe=T(C());s();var Ne=T(C());W();s();var lt=T(C());W();function Kp(t){let{space:r,revision:e,page:o,analyticsContext:n}=t,i=is(),[,a]=R(Y),c=he(),[{result:l,error:u}]=Qo([Qa(r.key,o.key,i)]);if(u)return null;let d=v=>{v!==(l==null?void 0:l.rating)&&(oe(I(h({},n),{type:"public_content_page_feedback_post",rating:v})),Ia(g=>{Ja(g,{space:r.key,page:o.key,revision:e.key,visitorId:i,rating:v,previousRating:l==null?void 0:l.rating})}))};return lt.createElement(m,{style:[f.directionRow,f.alignCenter]},lt.createElement(m,null,lt.createElement(q,{style:[a.Heading4,a.textMuted]},c("was_it_helpful"))),lt.createElement(m,{style:[f.directionRow,f.alignCenter]},lt.createElement(la,{tooltip:c("poor_content"),active:(l==null?void 0:l.rating)===$t.BAD,rating:$t.BAD,onPress:d}),lt.createElement(la,{tooltip:c("ok_content"),active:(l==null?void 0:l.rating)===$t.OK,rating:$t.OK,onPress:d}),lt.createElement(la,{tooltip:c("excellent_content"),active:(l==null?void 0:l.rating)===$t.GOOD,rating:$t.GOOD,onPress:d})))}function la(t){let{active:r,tooltip:e,rating:o,onPress:n}=t;return lt.createElement(xs,{tooltip:e},(i,a)=>lt.createElement(mt,h({ref:a,onPress:()=>n(o),style:[p.Margin.smallLeft],accessibilityLabel:e},i.events),lt.createElement(qc,{active:r,interactive:!0,rating:o,size:P.BUTTON_S})))}s();var ut=T(C());W();var ua=30,ph=re.createInteractiveComponent(Ss);function Ur(t){return ut.createElement(Qt,null,ut.createElement(dh,h({},t)))}function dh(t){let{space:r,floating:e}=t,[,o]=R(fh),[,n]=R(Y),i=he(),a=`https://${dr.homepage.domain}/?utm_source=content&utm_medium=trademark&utm_campaign=${r.key}`,c=()=>{oe(xo(r,{type:"public_content_click_trademark"}))};return ut.createElement(m,{style:e&&o.wrapper},ut.createElement(m,{style:e&&[p.Padding.noneHorizontal]},ut.createElement(re.TouchableOpacity,{style:[f.directionRow,f.alignCenter,...e?[o.trademarkFloating,p.Padding.smallVertical,p.Padding.mediumHorizontal,p.Padding.xlargeLeft,p.Margin.mediumTop]:[o.tradeMarkDefault]],onPress:c,href:a,target:"_blank"},ut.createElement(m,null,ut.createElement(ph.Child,{size:ua,style:n.textMuted,activeStyle:n.primary})),ut.createElement(m,{style:[p.Padding.smallLeft]},ut.createElement(re.Text.Child,{style:[n.Label,n.textMuted],activeStyle:n.primary},i("powered_by",ut.createElement(ip,{style:n.Bold},"GitBook")))))))}var fh=D.create({wrapper:{position:"absolute",bottom:0,zIndex:1,width:"100%"},tradeMarkDefault:t=>({backgroundColor:"transparent"}),trademarkFloating:t=>({backgroundColor:t.colors.background.standout})});function Yp(t){let{space:r,revision:e,page:o,analyticsContext:n}=t,[,i]=R(Y),[,a]=R(mh),c=he(),l=Co(o.edits),u=qt(o),d=!!l,v=r.hasPublicFeedback,g=!r.hideTrademark&&(u==="editorial"||u==="landing");if(!d&&!v)return null;let S=Ne.createElement(vp,null,Ne.createElement(Ne.Suspense,{fallback:null},Ne.createElement(Kp,{space:r,revision:e,page:o,analyticsContext:n})));return Ne.createElement(m,{style:[p.Padding.largeTop,p.Margin.largeTop,a.footer]},Ne.createElement(A.View,{tabletStyle:f.directionColumn,desktopStyle:f.directionRow,style:[f.alignCenter,f.justifySpaceBetween]},d?Ne.createElement(A.View,{tabletStyle:p.Margin.mediumBottom,style:g?[]:[f.flex1]},Ne.createElement(q,{style:[i.textMuted,i.Label]},c("last_modified",Ne.createElement(zs,{value:l.updatedAt.toDate(),onlyDate:!1})))):null,g?Ne.createElement(Ur,{space:r,floating:!1}):null,v?Ne.createElement(A.View,{tabletStyle:g?"hidden":"visible",desktopStyle:"visible"},S):null),g&&v?Ne.createElement(A.View,{tabletStyle:"visible",desktopStyle:"hidden",style:[f.directionRow,f.flex1,f.justifyContentCenter,p.Margin.largeTop]},S):null)}var mh=D.create({footer:t=>({borderTopColor:t.colors.border.mid,borderTopWidth:1})});s();var Gr=T(C());s();var pt=T(C());W();s();var gh=750,hh=p.xxlarge,Qp=gh+2*hh,Zn=300,yh=220;function Jp(t=0){return t+Zn+Qp+yh}function Zp(t){let r=`(100vw - ${Qp}px) / 2 - ${t||0}px`;return`max(${Zn}px, calc(${r}))`}s();var vo=T(C());W();s();var Te=T(C());W();s();var nt=T(C());W();var vh=A.createResponsiveComponent(re.TouchableOpacity),bh=re.createInteractiveComponent(A.View),ed=nt.forwardRef(function(r,e){let{leftIcon:o,icon:n,rightIcon:i,kind:a="primary",children:c,button:l,active:u=!1,onPress:d,textStyle:v,href:g}=r,S=re.useInteractiveState(),[,O]=R(Sh),[,w]=R(Y),x=a==="primary"?w.textMid:w.textMuted,M=u?w.primary:x;return nt.createElement(d?vh:bh,I(h({ref:e},S.events),{style:[O.tocMenuItem,p.Padding.mediumHorizontal,u&&O.tocMenuItemActive],hoverStyle:d&&!u?O.tocMenuItemHovered:null,mobileStyle:O.tocMenuItemMobile,desktopStyle:O.tocMenuItemDesktop,onPress:d,href:g&&d?g:void 0}),o?nt.createElement(m,{style:[p.Margin.mediumRight]},nt.createElement(o,{size:P.ICON_M,style:[M,v]})):null,n?nt.createElement(m,{style:[p.Margin.mediumRight]},nt.createElement(n,{size:P.ICON_M,style:[M,v]})):null,nt.createElement(q,{style:[f.flex1,p.Padding.smallVertical,a==="group"?w.Heading4:w.Label,M,v]},c),l?nt.createElement(m,{style:[f.directionRow,f.alignCenter]},l):null,i?nt.createElement(m,{style:O.tocMenuItemRightIcon},nt.createElement(i,{size:P.ICON_M,style:w.textMuted})):null)}),Sh=D.create({tocMenuItem:{flexDirection:"row",alignItems:"center",borderColor:"transparent",borderWidth:1,minHeight:P.S},tocMenuItemMobile:{borderRightWidth:1},tocMenuItemDesktop:{borderRightWidth:0},tocMenuItemHovered:t=>({backgroundColor:t.colors.background.standout}),tocMenuItemActive:t=>({backgroundColor:t.colors.background.main,borderColor:t.colors.border.main}),tocMenuItemRightIcon:{marginLeft:p.small,marginRight:(P.S-P.ICON_M)/2}});function pa(t){return Te.createElement(Te.Suspense,{fallback:Te.createElement(td,h({},t))},Te.createElement(wh,h({},t)))}function wh(t){let{revision:r,treePage:e}=t,{page:o}=e,n=en(o.kind==="link"?o.ref:void 0,{space:r.space,revision:r.key});return Te.createElement(td,I(h({},t),{contentRef:n}))}function td(t){let{revision:r,treePage:e,parent:o,currentPage:n,contentRef:i}=t,{page:a}=e,{getNavigationHref:c,navigateToPage:l}=Vc(),u=n?n.key:null,d=u===a.key,v=!!u&&Da(r,a.key,u),[g,S]=Te.useState(v),[,O]=R(Th),w=x=>{x.isDefaultPrevented()||x.nativeEvent.metaKey||x.nativeEvent.ctrlKey||(x.preventDefault(),a.kind==="sheet"?l(r,a.key):a.kind==="link"&&(i==null||i.open()))};return Te.useEffect(()=>{v&&S(!0)},[v]),Te.createElement(m,{style:[a.kind==="group"&&p.Margin.mediumVertical]},Te.createElement(ed,{kind:a.kind==="group"?"group":!o||o.kind==="group"?"primary":"secondary",icon:a.emoji?Ue(Sr,{code:a.emoji}):void 0,rightIcon:a.kind==="link"?i?i.secondaryIcon:gt:void 0,active:d,onPress:a.kind==="group"?void 0:w,href:(()=>a.kind==="link"?i==null?void 0:i.href:c(r,a.key))(),button:e.pages.length>0&&a.kind==="sheet"?Te.createElement(ee,{size:"small",icon:g?k.ChevronDown:k.ChevronRight,onPress:x=>{x.preventDefault(),S(!g)}}):null},a.title),(g||a.kind==="group")&&e.pages.length>0?Te.createElement(m,{style:[O.tocItemChildren,a.kind==="group"&&p.Margin.noneLeft]},e.pages.map((x,M)=>Te.createElement(pa,I(h({key:x.renderKey},t),{treePage:x,isLastPage:M===e.pages.length-1,parent:a}))),a.kind==="group"?null:Te.createElement(m,{style:O.tocItemChildrenLine})):null)}var Th=D.create({tocItemChildren:{position:"relative",marginLeft:p.medium},tocItemChildrenLine:t=>({position:"absolute",top:0,bottom:0,left:0,width:1,backgroundColor:t.colors.border.main})});function ei(t){let{showingTrademark:r,revision:e}=t,o=vo.useMemo(()=>Na(e.pages,e.rootPages),[e.key,e.mutationKey]);return vo.createElement(xt,{style:f.flex1,contentContainerStyle:[p.Padding.mediumVertical,r?Ch.scrollviewWithTrademark:null]},o.map((n,i)=>vo.createElement(pa,I(h({key:n.renderKey},t),{treePage:n,isLastPage:i===o.length-1}))))}var Ch=ge.create({scrollviewWithTrademark:{paddingBottom:p.medium+ua+2*p.medium}});s();var F=T(C());W();function ti(t){let{space:r,collection:e,collectionSpaces:o}=t,n=[F.createElement(Ph,{key:"mobile-closing-bar"})];return r.headerTheme==="none"&&n.push(F.createElement(Rh,{space:r,collection:e,key:"space-header"})),o&&(e==null?void 0:e.publishingType)==="variants"&&n.push(F.createElement(kh,{key:"variant-switch",currentVariant:r,collection:e,variants:o})),F.createElement(F.Fragment,null,n)}function Ph(){let[,t]=R(ri),r=wr(xe(Or),F.useState(!1));return F.createElement(A.View,{style:[t.mobileClosingBar,f.justifyContentEnd,f.directionRow],mobileStyle:"visible",desktopStyle:"hidden"},F.createElement(ee,{icon:k.X,size:"large",kind:"default",onPress:()=>r.closeMobile(),style:[f.alignSelfCenter,p.Padding.smallHorizontal]}))}function Rh(t){let{space:r,collection:e}=t,[,o]=R(ri),[,{open:n}]=qe();return F.createElement(A.View,{style:[o.spaceTitleWrapper,f.justifyContentCenter,f.directionRow],mobileStyle:"hidden",desktopStyle:"visible"},F.createElement(Kn,{space:r,collection:e,desktopStyle:f.flex1}),F.createElement(ee,{icon:k.SearchPublic,size:"large",kind:"default",alignIcons:"end",onPress:n,style:[f.alignSelfCenter,p.Margin.smallHorizontal]}))}function kh(t){let{currentVariant:r,collection:e,variants:o}=t,[,n]=R(ri),[i,a]=F.useState(!1),c=F.useCallback(()=>{a(l=>!l)},[a]);return F.createElement(F.Fragment,null,F.createElement(ee,{rightIcon:i?k.ChevronDown:k.ChevronRight,icon:k.Variants,onPress:c,alignIcons:"end",style:[p.Margin.smallVertical,p.Padding.mediumHorizontal]},F.createElement(Jt,null,r.publishedTitle||r.title||We)),F.createElement(m,{style:n.separator}),i?F.createElement(F.Fragment,null,F.createElement(F.Suspense,{fallback:F.createElement(Ie,{size:"small"})},F.createElement(xt,{style:n.variantScrollView},o.map(l=>F.createElement(Oh,{key:l.key,selected:l.key===r.key,main:l.key===e.primarySpace,variant:l,onPress:()=>{a(!1)}})))),F.createElement(m,{style:[n.separator,p.Margin.largeTop]})):null)}function Oh(t){let{variant:r,selected:e,main:o,onPress:n}=t,i=he(),{getNavigationLinkProps:a}=te(),[,c]=R(Y),[,l]=R(ri);return F.createElement(re.TouchableOpacity,h({style:[l.tab,e&&l.selectedTab],activeStyle:l.hoverTab},a({screen:{space:r.key,page:""}},n)),F.createElement(m,{style:[f.flex1]},F.createElement(Jt,{style:[c.textMid,c.Label]},r.publishedTitle||r.title||We)),o?F.createElement(m,{style:p.Margin.smallLeft},F.createElement(q,{style:[l.mainBadge,c.textMuted]},i("main"))):null)}var ri=D.create({separator:t=>({height:1,backgroundColor:t.colors.border.main}),selectedTab:t=>({borderLeftColor:t.colors.primary.main,borderLeftWidth:2}),hoverTab:t=>({backgroundColor:t.colors.background.standout}),tab:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",outlineStyle:"none",borderWidth:0,borderColor:"transparent",borderLeftWidth:2,height:P.BUTTON_M,lineHeight:P.BUTTON_M,borderRadius:0,paddingHorizontal:p.medium},mainBadge:I(h({fontFamily:ss,fontSize:cs.xxsmall,lineHeight:P.BUTTON_M},Eo.Bold),{textTransform:"uppercase",letterSpacing:1}),spaceTitleWrapper:t=>({height:P.L,borderBottomWidth:1,borderBottomColor:t.colors.border.main}),mobileClosingBar:t=>h({height:P.L,borderBottomWidth:1,borderBottomColor:t.colors.border.main,backgroundColor:t.colors.background.main},t.shadows.base),variantScrollView:{flexGrow:0,flexShrink:1,height:"fit-content"}});function rd(t){let{space:r}=t,[,e]=R(xh),{desktopSidebarWidth:o}=pt.useContext(Ce),n=pt.useMemo(()=>({[Jp(o)]:"visible"}),[o]),i=!r.hideTrademark;return pt.createElement(A.View,{testID:"page.desktopTableOfContents",mobileStyle:"hidden",desktopStyle:"visible",customBreakpointsStyles:n,style:[e.topcDesktopWrapper,f.directionRow,{width:Zp(o)},f.justifyContentEnd]},pt.createElement(m,{style:[e.tocDesktop,f.directionColumn]},pt.createElement(m,{style:[f.flex1,p.Padding.largeLeft]},pt.createElement(ti,h({},t)),pt.createElement(ei,I(h({},t),{showingTrademark:i}))),i?pt.createElement(Ur,{floating:!0,space:r}):null))}var xh=D.create({topcDesktopWrapper:t=>({borderRightWidth:1,borderRightColor:t.colors.border.main,backgroundColor:t.colors.background.mid}),tocDesktop:{width:Zn}});s();var Ve=T(C());W();var Ih=A.createResponsiveComponent(ct.View),Eh=A.createResponsiveComponent(ct.createAnimatedComponent(mt));function od(t){let{currentPage:r,space:e}=t,o=wr(xe(Or),Ve.useState(!1)),{sidebarMobileLeft:n,showOverlay:i}=Bs(o),[a,c]=R(_h);Ve.useEffect(()=>{o.close()},[r==null?void 0:r.key]);let l=!e.hideTrademark;return Ve.createElement(ht,null,Ve.createElement(Ih,{style:[c.sidebar,{left:n}],mobileStyle:"visible",desktopStyle:"hidden"},Ve.createElement(m,{style:[f.directionColumn,f.flex1]},Ve.createElement(m,{style:f.flex1},Ve.createElement(ti,h({},t)),Ve.createElement(m,{style:[p.Padding.mediumLeft,f.flex1,c.sidebarWrapper]},Ve.createElement(ei,I(h({},t),{showingTrademark:l})))),l?Ve.createElement(Ur,{floating:!0,space:e}):null)),Ve.createElement(Eh,{style:[c.screenOverlay,{backgroundColor:n.interpolate({inputRange:[-jo.MOBILE_WIDTH,0],outputRange:[a.colors.backdrop.transparent,a.colors.backdrop.background]})}],mobileStyle:i?"visible":"hidden",desktopStyle:"hidden",onPress:o.closeMobile}))}var nd=10,_h=D.create({sidebar:t=>({backgroundColor:t.colors.background.mid,width:jo.MOBILE_WIDTH,maxWidth:"100%",flexDirection:"row",position:"absolute",top:0,bottom:0,zIndex:nd}),sidebarWrapper:t=>({borderRightWidth:1,borderRightColor:t.colors.border.main}),sidebarCloseButton:{position:"absolute",width:P.BUTTON_M,height:P.BUTTON_M,top:(P.M-P.BUTTON_M)/2,left:jo.MOBILE_WIDTH+P.BUTTON_M/2},screenOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:nd-1}});function id(t){return Gr.createElement(Gr.Fragment,null,Gr.createElement(rd,h({},t)),Gr.createElement(od,h({},t)))}function ad(t){let{space:r,revision:e,screen:o,analyticsContext:n,collection:i,collectionSpaces:a,assetHostname:c}=t,l=he(),[u,d]=R(Dh);Fs(r);let[v,g]=$o(e,o);if(Zt(x=>{x.writeAsync([{type:"meta",name:"description",content:g&&"description"in g?g.description:""},{type:"meta",name:"og:description",content:g&&"description"in g?g.description:""},{type:"meta",name:"og:image",content:r.socialPreviewURL?$r(r.socialPreviewURL,{height:640,width:1280,fit:"contain"}):Mh(r,e,g)},{type:"meta",name:"twitter:card",content:"summary_large_image"}]),r.visibility==="in-collection"?(x.setTitle(g?g.title:l("page_not_found"),(i==null?void 0:i.publishedTitle)||(i==null?void 0:i.title)||We),x.writeAsync([{type:"meta",name:"robots",content:(i==null?void 0:i.visibility)!=="public"?"noindex, nofollow":"index"}])):(x.setTitle(g?g.title:l("page_not_found"),r.publishedTitle||r.title||We),x.writeAsync([{type:"meta",name:"robots",content:r.visibility!=="public"?"noindex, nofollow":"index"}]))}),Yo(g?ns(r,g,{screen:"space",visibility:r.visibility,pageLayout:qt(g)}):null,[r.key,g==null?void 0:g.key]),v)return fe.default.createElement(Tc,{to:{screen:v}});if(!g&&o.page){let[x]=vt([Aa(r.key,o.page)]);if(x&&e.pages[x.page])return fe.default.createElement(zc,{to:Xt(e,x.page)})}let S=qt(g),O=S==="docs",w=S==="docs"||S==="editorial";return fe.default.createElement(fe.default.Fragment,null,fe.default.createElement(Ah,{space:i||r,assetHostname:c}),fe.default.createElement(A.View,{style:[f.flex1],mobileStyle:f.directionColumn,desktopStyle:f.directionRow},O?fe.default.createElement(id,{space:r,revision:e,currentPage:(g==null?void 0:g.kind)==="sheet"?g:null,analyticsContext:n,collection:i,collectionSpaces:a}):null,fe.default.createElement(Fe,{style:[d.spacePageBody],backgroundColor:u.colors.background.main},fe.default.createElement(fe.default.Suspense,{fallback:fe.default.createElement(Ie,{size:"large"})},g&&g.kind==="sheet"?fe.default.createElement(tc,{key:Lh(o,e,g),space:r,changeRequest:void 0,revision:e,page:g,readOnly:!0,withComments:!1,withExpandedComments:!1,withToC:O,withOutline:w,analyticsContext:n,footer:fe.default.createElement(Yp,{space:r,revision:e,page:g,analyticsContext:n})}):fe.default.createElement(bp,{statusCode:404},fe.default.createElement(Bo,{title:l("page_not_found"),action:fe.default.createElement(At,{kind:"secondary",size:"medium",to:{screen:{type:"space",space:r.key,page:""}}},l("back_to_home"))},l("page_not_found_long")))))))}var Dh=D.create({spacePageBody:{flex:1}});function Lh(t,r,e){let o=t.space;return o+=`/${t.changeRequest||"main"}`,o+=`/${r.conflicts?"conflicts":"normal"}`,o+=`/${e.key}`,t.diff&&(o+="/diff"),t.revision&&(o+="/revision"),o}function Mh(t,r,e){let o=e&&r.rootPages[0]!==e.key?`/page/${e.key}`:"",n=`color=${encodeURIComponent(t.primaryColor||"")}&logo=${encodeURIComponent(di(t.logoURL||t.iconURL||""))}&theme=${encodeURIComponent(t.headerTheme||"")}`;return`https://${dr.firebase.authDomain}/share/space/thumbnail/${t.key}${o}.png?${n}`}function Ah(t){let{space:r,assetHostname:e}=t,o=ts(r,"public-content"),[n]=R(),[i,a]=fe.default.useState(o.iconURL||(o.emoji?`${e}${es(o.emoji)}`:null));return fe.default.useEffect(()=>{if(i)return;let c=192,l=document.createElement("canvas"),u=l.getContext("2d");if(!u)return;l.width=c,l.height=c,u.fillStyle=n.colors.background.main,u.fillRect(0,0,c,c);let d=.7;u.fillStyle=n.colors.text.main,u.font=`400 ${c*d}px gitbook-content-font`,u.textAlign="center",u.fillText(r.title.slice(0,1),c/2,c*(1-d)/2),a(l.toDataURL("image/png"))},[r.title,a]),Zt(c=>{c.writeAsync([{type:"link",rel:"icon",href:i?di(i):`${e}/public/images/icon-512.png`}])}),null}s();var it=T(C());s();var qr=T(C());s();function sd(t,r){let{navigate:e}=te();Mt(()=>[Nh(t,r,e)],[t,r,e])}function Nh(t,r,e){return{key:"search.content",commands:o=>{if(!o.query.text)return[];let n=Pt.read({query:o.query.text,types:["pages","sections"],hitsPerPage:30,analyticsTags:[{type:"space",space:t.key}]});return Vh(r,n).map(({page:i,result:a,sections:c})=>{let l=i.emoji?Ue(Sr,{code:i.emoji}):void 0;return[{key:i.key,icon:l,title:i.title,subtitle:_a(r,i.key).filter(u=>u.key!==i.key).map(u=>u.title).join(" \u203A "),trigger:()=>{var u;e({screen:{type:"space",space:r.space,page:Xt(r,i.key),hash:a||(u=c[0])==null?void 0:u.anchor,query:void 0}})}},...c.map(u=>({key:u.objectID,icon:l,title:void 0,subtitle:u.title,body:u.body.split(`
`).filter(Boolean).slice(0,5),trigger:()=>{e({screen:{type:"space",space:r.space,page:Xt(r,i.key),hash:u.anchor,query:void 0}})}}))]}).flat().filter(Re)}}}function Vh(t,r){let e=new Map;return r.forEach(o=>{if(o.index!=="pages"&&o.index!=="sections")return null;let n=t.pages[o.object.page];if(!n)return null;let i=e.get(n.key)||{sections:[],score:0};o.index==="sections"?(i.sections.push(o.object),i.score+=1):(i.result=o.object,i.score+=3),e.set(n.key,i)}),Array.from(e.entries()).map(([o,{score:n,sections:i,result:a}])=>{let c=t.pages[o];return c?{page:c,score:n,sections:i,result:a}:null}).filter(Re).sort((o,n)=>n.score-o.score)}function cd(t){let{space:r,revision:e}=t,o=he(),[,{open:n}]=qe(),i=yr();return sd(r,e),Rr({[Pr.PALETTE_OPEN]:()=>{n()},"/":()=>{n()}},["all"],[]),qr.createElement(qr.Fragment,null,qr.createElement(dn,{defaultTitle:o("search_placeholder"),defaultVariant:{color:i.color}}),qr.createElement(Wn,null))}function oi(t){var d;let{space:r,assetHostname:e,collection:o,collectionSpaces:n}=t,{screen:i}=Lt();Wo();let a=Dc(r.key,(i.type==="space"?i.revision:null)||r.revision);if(!a)throw new Error("Revision not found");al(r);let c=it.useMemo(()=>xo(r,{}),[r.key,r.organization,r.collection]);if(i.type!=="space"||i.space!==r.key)throw new Error("screen should be the space we render");it.useEffect(()=>{if(!!r.searchKey)return Rc(r.searchKey)},[r.searchKey]),Zt(v=>{v.write({type:"font",font:r.font||"Inter",fontFamilyName:"gitbook-content-font"}),i.revision&&v.write({type:"meta",name:"robots",content:"noindex"})}),$p(r.privacyPolicyURL,(d=r.googleAnalytics)==null?void 0:d.enabled);let[,l]=$o(a,i),u=qt(l);return it.createElement(it.Fragment,null,it.createElement(Gp,{space:r,revision:a,collection:o,currentPageLayout:u}),it.createElement(ad,{space:r,revision:a,screen:i,analyticsContext:c,collection:o,collectionSpaces:n,assetHostname:e}),it.createElement(cd,{space:r,revision:a}),it.createElement(zn,null))}s();var da=T(C());s();s();function lr(t,r){return t.split(r).slice(1).join(r)}function bo(t){return t?t.endsWith("/")?t:`${t}/`:""}function ld(t){return r=>{let e=`/${bo(t.basePath)}`;switch(r.type){case"back_office":case"account":case"error_notfound":case"org_invite":case"org_join":case"org_settings":case"quickstart":case"root":case"account_verification":case"welcome":throw new Error(`Cannot navigate to ${r.type} on public content`);case"home":{if(r.organization){let o=tr.read({type:"organization",organization:r.organization});e=Yr(o);break}throw new Error("Cannot navigate to home without an org on public content")}case"user":{let o=tr.read({type:"user",user:r.user});e=Yr(o);break}case"collection":{let o=tr.read({type:"collection",collection:r.collection});e=Yr(o);break}case"space":{let o=tr.read({type:"space",space:r.space});o.hostname===t.hostname&&(!t.basePath||o.pathname.startsWith(t.basePath))?(t.shareLink&&(e+=bo(t.shareLink)),o.pathname!==t.basePath&&(t.basePath?e+=bo(lr(o.pathname,bo(t.basePath))):e+=bo(o.pathname))):e=Yr(o),e+=zh(r);break}case"legacy_space":case"legacy_account":throw new Error("Cannot navigate to legacy urls");default:Po(r)}return{pathname:e,hash:r.hash,search:qa(r)}}}function zh(t){let r="";return t.revision&&(r+=`~/revisions/${t.revision}/`),r+=`${t.page[0]==="/"?t.page.slice(1):t.page}`,t.sideSheet&&(r+=`${r[r.length-1]==="/"?"":"/"}~/${t.sideSheet}`),r}s();var Bh=Pa==="test";function ud(t,r,e,o=[]){return n=>{let i=n.pathname;t.basePath?i=lr(i,t.basePath):t.hostname&&i.indexOf(`/${t.hostname}/`)!==-1&&Bh&&(i=lr(i,t.hostname)),t.shareLink&&(i=lr(i,t.shareLink));let a=r;if(!a){let l=o.find(u=>i.startsWith(`/v/${u.path}/`)||i===`/v/${u.path}`);l&&(a=l.key,i=lr(i,`/v/${l.path}`))}if(a||(a=e==null?void 0:e.primarySpace),!a)throw new Error("cannot find current space");let c={type:"space",space:a,page:""};return Hh(c,Fa(i)),n.hash&&(c.hash=n.hash.replace(/^#/,"")),h(h({},c),Ga(n))}}function Hh(t,r){Ua(r,[{path:`/~/revisions/:revision/:page${pi}`,onMatch:e=>{Object.assign(t,{page:e.params.page,revision:e.params.revision})}},{path:"/~/revisions/:revision/",onMatch:e=>{Object.assign(t,{revision:e.params.revision,page:""})}},{path:`/:page${pi}`,onMatch:e=>{Object.assign(t,{page:e.params.page,diff:!1})}},{path:"/",onMatch:e=>{Object.assign(t,{diff:!1,page:""})}}])}function ni(t,r,e,o){let n=il(),i=(0,da.useMemo)(()=>ud(t,r,e,o),[t.hostname,t.basePath,t.shareLink,r,e,o]),a=(0,da.useMemo)(()=>ld(t),[t.hostname,t.basePath,t.shareLink]);return{forceHardNavigation:!n,getNavigationScreenFromLocation:i,getLocationForNavigationScreen:a}}function pd(t){let{collection:r,basePath:e,hostname:o,customToken:n,collectionSpaces:i,ssrRequestPath:a,ssrRouterContext:c,shareLink:l,assetHostname:u,preview:d=!1}=t,v=ni({hostname:o,basePath:e,shareLink:l},void 0,r,i);if(!d&&r.publishingType!=="variants")throw new Error("we do not know how to render anything else than variants for now");return Pe.createElement(Kr,{mode:"public-content",preview:d,locale:r.language},Pe.createElement(Qt,{primaryColor:r.primaryColor},Pe.createElement(ar,null,Pe.createElement(Qn,{ssrRequestPath:a,ssrRouterContext:c},Pe.createElement(Tr,h({persist:!1},v),Pe.createElement(Pe.Suspense,{fallback:Pe.createElement(Ie,{size:"large"})},n&&typeof window=="undefined"?Pe.createElement(Ie,{size:"large"}):Pe.createElement(jh,{collection:r,collectionSpaces:i,assetHostname:u})))))))}function jh(t){let{screen:r}=Lt();if(r.type!=="space")throw new Error("screen should be a space");Wo();let[e]=er([Ro(r.space)]);if(!e)throw new Error("the space should exist");return Pe.createElement(Kr,{locale:e.language},Pe.createElement(Qt,{primaryColor:e.primaryColor},Pe.createElement(ar,null,Pe.createElement(oi,I(h({},t),{space:e})))))}s();var at=T(C());function dd(t){let{space:r,ssrRequestPath:e,ssrRouterContext:o,basePath:n,hostname:i,customToken:a,shareLink:c,assetHostname:l,preview:u=!1}=t,d=ni({hostname:i,basePath:n,shareLink:c},r.key);return at.createElement(Kr,{mode:"public-content",preview:u,locale:r.language},at.createElement(Qt,{primaryColor:r.primaryColor},at.createElement(ar,null,at.createElement(Qn,{ssrRequestPath:e,ssrRouterContext:o},at.createElement(Tr,h({persist:!1},d),at.createElement(at.Suspense,{fallback:at.createElement(Ie,{size:"large"})},a&&typeof window=="undefined"?at.createElement(Ie,{size:"large"}):at.createElement(oi,{space:r,assetHostname:l})))))))}s();var ii=T(C());var fa=To("preview:child");function fd(t,r){let[e,o]=ii.useState(t);return ii.useEffect(()=>{!r||(window.addEventListener("message",n=>{if(n.data.source!=="gitbook-preview-parent"||(fa.info("receive message",n.origin,n.data),n.origin!=="http://localhost:5000"&&n.origin!==`https://${dr.firebase.authDomain}`))return;let i=Ea(n.data.payload);fa.debug("update content with",i),o(i),window.parent.postMessage({source:"gitbook-preview-child"},"*")}),fa.info("notify parent that we are ready"),window.parent.postMessage({source:"gitbook-preview-child"},"*"))},[r]),e}function Wh(t){let r="collection"in t?t.collection:t.space,e=fd(r,!!t.preview),o=Ka(e.themeMode);return Ut.createElement(Oo,null,Ut.createElement(Se,{theme:{color:o}},Ut.createElement(fs,{theme:{color:o}},Ut.createElement(Ln,null,Ut.createElement(cn,null,"collection"in t?Ut.createElement(pd,I(h({},t),{collection:e})):Ut.createElement(dd,I(h({},t),{space:e})))))))}s();function P_(t){(t==null?void 0:t.firestore)&&vi.fromJS(t.firestore),(t==null?void 0:t.head)&&Ms.cache.fromJS(t.head),(t==null?void 0:t.images)&&(Hs.fromJS(t.images.sizes),bs.fromJS(t.images.uri)),(t==null?void 0:t.contentURLs)&&tr.fromJS(t.contentURLs),(t==null?void 0:t.contentRefs)&&Bc.fromJS(t.contentRefs),(t==null?void 0:t.screenToContentRefs)&&Hc.fromJS(t.screenToContentRefs),(t==null?void 0:t.swaggers)&&jc.fromJS(t.swaggers)}s();s();function A_(t){document.readyState==="interactive"||document.readyState==="complete"?t():document.addEventListener("DOMContentLoaded",()=>{t()})}export{Xg as a,Wh as b,P_ as c,A_ as d};
/** @license React v0.0.0-experimental-4ead6b530
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/chunk-LBK3AHLG.min.js.map
