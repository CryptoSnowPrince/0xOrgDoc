import{a as ge}from"https://app.gitbook.com/public/app/chunks/chunk-3D7BTC3O.min.js";import{a as $t,c as lk}from"https://app.gitbook.com/public/app/chunks/chunk-727HUC7Y.min.js";import{a as _,b as k,e as ta,g as m,h as fk,i as me,k as f}from"https://app.gitbook.com/public/app/chunks/chunk-COSHZCUI.min.js";var Ec=m((VB,Fc)=>{f();"use strict";Fc.exports=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}});var Yn=m((JB,Mc)=>{f();"use strict";var Xk=Ec();function Pc(t){return Xk(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}Mc.exports=function(e){var r,n;return!(Pc(e)===!1||(r=e.constructor,typeof r!="function")||(n=r.prototype,Pc(n)===!1)||n.hasOwnProperty("isPrototypeOf")===!1)}});var Vc=m((eo,rn)=>{f();(function(t){var e=typeof eo=="object"&&eo,r=typeof rn=="object"&&rn&&rn.exports==e&&rn,n=typeof window=="object"&&window;(n.global===n||n.window===n)&&(t=n);var o=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,a=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,i=function(c){c=c.replace(o,function(p,d,g){return i(g)+d}).replace(a,"$2$1");for(var l="",h=c.length;h--;)l+=c.charAt(h);return l},s={version:"0.2.0",reverse:i};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd)define(function(){return s});else if(e&&!e.nodeType)if(r)r.exports=s;else for(var u in s)s.hasOwnProperty(u)&&(e[u]=s[u]);else t.esrever=s})(eo)});var ef=m((fq,Qc)=>{f();"use strict";var Ya,Wa,Xc,Zc;Ya="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";Wa="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC";Xc=new RegExp("^[^"+Wa+"]*["+Ya+"]");Zc=new RegExp("^[^"+Ya+"]*["+Wa+"]");function mT(t){return t=t.toString(),Zc.test(t)?"rtl":Xc.test(t)?"ltr":"neutral"}Qc.exports=mT});var kr=m(nn=>{f();"use strict";Object.defineProperty(nn,"__esModule",{value:!0});var tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf=!0,Xt=Symbol("STORE_KEY"),nf=Symbol("LEAF"),to=Symbol("undefined"),of=Symbol("null"),Xa=void 0,ro=new WeakMap;function gT(t,e){var r=!0,n=!1,o=void 0;try{for(var a=function(){var c=s.value,l=t[c];if(!l)throw new Error('Object does not have a property named "'+c+'".');t[c]=function(){for(var h=arguments.length,p=Array(h),d=0;d<h;d++)p[d]=arguments[d];if(!rf)return l.apply(this,p);ro.has(this)||ro.set(this,{noArgs:{},hasArgs:{}});var g=ro.get(this),y=g.noArgs,O=g.hasArgs,T=p.length!==0,A=void 0,I=[];if(T?(I=[c].concat(p),A=yT(O,I)):A=y[c],A!==Xa)return A===to?void 0:A;var w=l.apply(this,p),P=w===void 0?to:w;return T?vT(O,I,P):y[c]=P,w}},i=e[Symbol.iterator](),s;!(r=(s=i.next()).done);r=!0)a()}catch(u){n=!0,o=u}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}}function yT(t,e){var r=!0,n=!1,o=void 0;try{for(var a=e[Symbol.iterator](),i;!(r=(i=a.next()).done);r=!0){var s=i.value;if(s===void 0?s=to:s===null&&(s=of),(typeof s=="undefined"?"undefined":tf(s))==="object"?t=t[Xt]&&t[Xt].get(s):t=t[s],t===Xa)return Xa}}catch(u){n=!0,o=u}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return t[nf]}function vT(t,e,r){var n=t,o=!0,a=!1,i=void 0;try{for(var s=e[Symbol.iterator](),u;!(o=(u=s.next()).done);o=!0){var c=u.value;if(c===void 0?c=to:c===null&&(c=of),(typeof c=="undefined"?"undefined":tf(c))!=="object"){n[c]||(n[c]={}),n=n[c];continue}if(n[Xt]||(n[Xt]=new WeakMap),!n[Xt].has(c)){var l={};n[Xt].set(c,l),n=l;continue}n=n[Xt].get(c)}}catch(h){a=!0,i=h}finally{try{!o&&s.return&&s.return()}finally{if(a)throw i}}return n[nf]=r,t}function OT(){ro=new WeakMap}function _T(t){rf=t}nn.default=gT;nn.resetMemoization=OT;nn.useMemoization=_T});var gf=m((Bz,mf)=>{f();var IT=Object.prototype.hasOwnProperty,RT=Object.prototype.toString;function CT(t){if(t==null)return!0;if(typeof t=="boolean")return!1;if(typeof t=="number")return t===0;if(typeof t=="string"||typeof t=="function"||Array.isArray(t))return t.length===0;if(t instanceof Error)return t.message==="";if(t.toString==RT)switch(t.toString()){case"[object File]":case"[object Map]":case"[object Set]":return t.size===0;case"[object Object]":{for(var e in t)if(IT.call(t,e))return!1;return!0}}return!1}mf.exports=CT});var io=m((qz,yf)=>{f();function wT(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}yf.exports=wT});var Of=m((zz,vf)=>{f();function FT(){this.__data__=[],this.size=0}vf.exports=FT});var Tr=m((Lz,_f)=>{f();function ET(t,e){return t===e||t!==t&&e!==e}_f.exports=ET});var on=m((Kz,bf)=>{f();var PT=Tr();function MT(t,e){for(var r=t.length;r--;)if(PT(t[r][0],e))return r;return-1}bf.exports=MT});var kf=m((jz,xf)=>{f();var DT=on(),BT=Array.prototype,qT=BT.splice;function zT(t){var e=this.__data__,r=DT(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():qT.call(e,r,1),--this.size,!0}xf.exports=zT});var Sf=m((Vz,Tf)=>{f();var LT=on();function KT(t){var e=this.__data__,r=LT(e,t);return r<0?void 0:e[r][1]}Tf.exports=KT});var Nf=m((Jz,Af)=>{f();var jT=on();function VT(t){return jT(this.__data__,t)>-1}Af.exports=VT});var Rf=m((Uz,If)=>{f();var JT=on();function UT(t,e){var r=this.__data__,n=JT(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}If.exports=UT});var an=m((Hz,Cf)=>{f();var HT=Of(),GT=kf(),$T=Sf(),YT=Nf(),WT=Rf();function Sr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Sr.prototype.clear=HT;Sr.prototype.delete=GT;Sr.prototype.get=$T;Sr.prototype.has=YT;Sr.prototype.set=WT;Cf.exports=Sr});var Ff=m((Gz,wf)=>{f();var XT=an();function ZT(){this.__data__=new XT,this.size=0}wf.exports=ZT});var Pf=m(($z,Ef)=>{f();function QT(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}Ef.exports=QT});var Df=m((Yz,Mf)=>{f();function eS(t){return this.__data__.get(t)}Mf.exports=eS});var qf=m((Wz,Bf)=>{f();function tS(t){return this.__data__.has(t)}Bf.exports=tS});var ti=m((Xz,zf)=>{f();var rS=typeof window=="object"&&window&&window.Object===Object&&window;zf.exports=rS});var st=m((Zz,Lf)=>{f();var nS=ti(),oS=typeof self=="object"&&self&&self.Object===Object&&self,aS=nS||oS||Function("return this")();Lf.exports=aS});var er=m((Qz,Kf)=>{f();var iS=st(),sS=iS.Symbol;Kf.exports=sS});var Uf=m((eL,Jf)=>{f();var jf=er(),Vf=Object.prototype,uS=Vf.hasOwnProperty,cS=Vf.toString,sn=jf?jf.toStringTag:void 0;function fS(t){var e=uS.call(t,sn),r=t[sn];try{t[sn]=void 0;var n=!0}catch(a){}var o=cS.call(t);return n&&(e?t[sn]=r:delete t[sn]),o}Jf.exports=fS});var Gf=m((tL,Hf)=>{f();var lS=Object.prototype,hS=lS.toString;function pS(t){return hS.call(t)}Hf.exports=pS});var tr=m((rL,Wf)=>{f();var $f=er(),dS=Uf(),mS=Gf(),gS="[object Null]",yS="[object Undefined]",Yf=$f?$f.toStringTag:void 0;function vS(t){return t==null?t===void 0?yS:gS:Yf&&Yf in Object(t)?dS(t):mS(t)}Wf.exports=vS});var dt=m((nL,Xf)=>{f();function OS(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}Xf.exports=OS});var so=m((oL,Zf)=>{f();var _S=tr(),bS=dt(),xS="[object AsyncFunction]",kS="[object Function]",TS="[object GeneratorFunction]",SS="[object Proxy]";function AS(t){if(!bS(t))return!1;var e=_S(t);return e==kS||e==TS||e==xS||e==SS}Zf.exports=AS});var el=m((aL,Qf)=>{f();var NS=st(),IS=NS["__core-js_shared__"];Qf.exports=IS});var nl=m((iL,rl)=>{f();var ri=el(),tl=function(){var t=/[^.]+$/.exec(ri&&ri.keys&&ri.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function RS(t){return!!tl&&tl in t}rl.exports=RS});var ni=m((sL,ol)=>{f();var CS=Function.prototype,wS=CS.toString;function FS(t){if(t!=null){try{return wS.call(t)}catch(e){}try{return t+""}catch(e){}}return""}ol.exports=FS});var il=m((uL,al)=>{f();var ES=so(),PS=nl(),MS=dt(),DS=ni(),BS=/[\\^$.*+?()[\]{}|]/g,qS=/^\[object .+?Constructor\]$/,zS=Function.prototype,LS=Object.prototype,KS=zS.toString,jS=LS.hasOwnProperty,VS=RegExp("^"+KS.call(jS).replace(BS,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function JS(t){if(!MS(t)||PS(t))return!1;var e=ES(t)?VS:qS;return e.test(DS(t))}al.exports=JS});var ul=m((cL,sl)=>{f();function US(t,e){return t==null?void 0:t[e]}sl.exports=US});var Lt=m((fL,cl)=>{f();var HS=il(),GS=ul();function $S(t,e){var r=GS(t,e);return HS(r)?r:void 0}cl.exports=$S});var uo=m((lL,fl)=>{f();var YS=Lt(),WS=st(),XS=YS(WS,"Map");fl.exports=XS});var un=m((hL,ll)=>{f();var ZS=Lt(),QS=ZS(Object,"create");ll.exports=QS});var dl=m((pL,pl)=>{f();var hl=un();function eA(){this.__data__=hl?hl(null):{},this.size=0}pl.exports=eA});var gl=m((dL,ml)=>{f();function tA(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}ml.exports=tA});var vl=m((mL,yl)=>{f();var rA=un(),nA="__lodash_hash_undefined__",oA=Object.prototype,aA=oA.hasOwnProperty;function iA(t){var e=this.__data__;if(rA){var r=e[t];return r===nA?void 0:r}return aA.call(e,t)?e[t]:void 0}yl.exports=iA});var _l=m((gL,Ol)=>{f();var sA=un(),uA=Object.prototype,cA=uA.hasOwnProperty;function fA(t){var e=this.__data__;return sA?e[t]!==void 0:cA.call(e,t)}Ol.exports=fA});var xl=m((yL,bl)=>{f();var lA=un(),hA="__lodash_hash_undefined__";function pA(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=lA&&e===void 0?hA:e,this}bl.exports=pA});var Tl=m((vL,kl)=>{f();var dA=dl(),mA=gl(),gA=vl(),yA=_l(),vA=xl();function Ar(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ar.prototype.clear=dA;Ar.prototype.delete=mA;Ar.prototype.get=gA;Ar.prototype.has=yA;Ar.prototype.set=vA;kl.exports=Ar});var Nl=m((OL,Al)=>{f();var Sl=Tl(),OA=an(),_A=uo();function bA(){this.size=0,this.__data__={hash:new Sl,map:new(_A||OA),string:new Sl}}Al.exports=bA});var Rl=m((_L,Il)=>{f();function xA(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}Il.exports=xA});var cn=m((bL,Cl)=>{f();var kA=Rl();function TA(t,e){var r=t.__data__;return kA(e)?r[typeof e=="string"?"string":"hash"]:r.map}Cl.exports=TA});var Fl=m((xL,wl)=>{f();var SA=cn();function AA(t){var e=SA(this,t).delete(t);return this.size-=e?1:0,e}wl.exports=AA});var Pl=m((kL,El)=>{f();var NA=cn();function IA(t){return NA(this,t).get(t)}El.exports=IA});var Dl=m((TL,Ml)=>{f();var RA=cn();function CA(t){return RA(this,t).has(t)}Ml.exports=CA});var ql=m((SL,Bl)=>{f();var wA=cn();function FA(t,e){var r=wA(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}Bl.exports=FA});var co=m((AL,zl)=>{f();var EA=Nl(),PA=Fl(),MA=Pl(),DA=Dl(),BA=ql();function Nr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Nr.prototype.clear=EA;Nr.prototype.delete=PA;Nr.prototype.get=MA;Nr.prototype.has=DA;Nr.prototype.set=BA;zl.exports=Nr});var Kl=m((NL,Ll)=>{f();var qA=an(),zA=uo(),LA=co(),KA=200;function jA(t,e){var r=this.__data__;if(r instanceof qA){var n=r.__data__;if(!zA||n.length<KA-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new LA(n)}return r.set(t,e),this.size=r.size,this}Ll.exports=jA});var fo=m((IL,jl)=>{f();var VA=an(),JA=Ff(),UA=Pf(),HA=Df(),GA=qf(),$A=Kl();function Ir(t){var e=this.__data__=new VA(t);this.size=e.size}Ir.prototype.clear=JA;Ir.prototype.delete=UA;Ir.prototype.get=HA;Ir.prototype.has=GA;Ir.prototype.set=$A;jl.exports=Ir});var Jl=m((RL,Vl)=>{f();function YA(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}Vl.exports=YA});var oi=m((CL,Ul)=>{f();var WA=Lt(),XA=function(){try{var t=WA(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();Ul.exports=XA});var lo=m((wL,Gl)=>{f();var Hl=oi();function ZA(t,e,r){e=="__proto__"&&Hl?Hl(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}Gl.exports=ZA});var ho=m((FL,$l)=>{f();var QA=lo(),eN=Tr(),tN=Object.prototype,rN=tN.hasOwnProperty;function nN(t,e,r){var n=t[e];(!(rN.call(t,e)&&eN(n,r))||r===void 0&&!(e in t))&&QA(t,e,r)}$l.exports=nN});var rr=m((EL,Yl)=>{f();var oN=ho(),aN=lo();function iN(t,e,r,n){var o=!r;r||(r={});for(var a=-1,i=e.length;++a<i;){var s=e[a],u=n?n(r[s],t[s],s,r,t):void 0;u===void 0&&(u=t[s]),o?aN(r,s,u):oN(r,s,u)}return r}Yl.exports=iN});var Xl=m((PL,Wl)=>{f();function sN(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}Wl.exports=sN});var mt=m((ML,Zl)=>{f();function uN(t){return t!=null&&typeof t=="object"}Zl.exports=uN});var eh=m((DL,Ql)=>{f();var cN=tr(),fN=mt(),lN="[object Arguments]";function hN(t){return fN(t)&&cN(t)==lN}Ql.exports=hN});var fn=m((BL,nh)=>{f();var th=eh(),pN=mt(),rh=Object.prototype,dN=rh.hasOwnProperty,mN=rh.propertyIsEnumerable,gN=th(function(){return arguments}())?th:function(t){return pN(t)&&dN.call(t,"callee")&&!mN.call(t,"callee")};nh.exports=gN});var ut=m((qL,oh)=>{f();var yN=Array.isArray;oh.exports=yN});var ih=m((zL,ah)=>{f();function vN(){return!1}ah.exports=vN});var hn=m((ln,Rr)=>{f();var ON=st(),_N=ih(),sh=typeof ln=="object"&&ln&&!ln.nodeType&&ln,uh=sh&&typeof Rr=="object"&&Rr&&!Rr.nodeType&&Rr,bN=uh&&uh.exports===sh,ch=bN?ON.Buffer:void 0,xN=ch?ch.isBuffer:void 0,kN=xN||_N;Rr.exports=kN});var pn=m((LL,fh)=>{f();var TN=9007199254740991,SN=/^(?:0|[1-9]\d*)$/;function AN(t,e){var r=typeof t;return e=e==null?TN:e,!!e&&(r=="number"||r!="symbol"&&SN.test(t))&&t>-1&&t%1==0&&t<e}fh.exports=AN});var po=m((KL,lh)=>{f();var NN=9007199254740991;function IN(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=NN}lh.exports=IN});var ph=m((jL,hh)=>{f();var RN=tr(),CN=po(),wN=mt(),FN="[object Arguments]",EN="[object Array]",PN="[object Boolean]",MN="[object Date]",DN="[object Error]",BN="[object Function]",qN="[object Map]",zN="[object Number]",LN="[object Object]",KN="[object RegExp]",jN="[object Set]",VN="[object String]",JN="[object WeakMap]",UN="[object ArrayBuffer]",HN="[object DataView]",GN="[object Float32Array]",$N="[object Float64Array]",YN="[object Int8Array]",WN="[object Int16Array]",XN="[object Int32Array]",ZN="[object Uint8Array]",QN="[object Uint8ClampedArray]",eI="[object Uint16Array]",tI="[object Uint32Array]",te={};te[GN]=te[$N]=te[YN]=te[WN]=te[XN]=te[ZN]=te[QN]=te[eI]=te[tI]=!0;te[FN]=te[EN]=te[UN]=te[PN]=te[HN]=te[MN]=te[DN]=te[BN]=te[qN]=te[zN]=te[LN]=te[KN]=te[jN]=te[VN]=te[JN]=!1;function rI(t){return wN(t)&&CN(t.length)&&!!te[RN(t)]}hh.exports=rI});var dn=m((VL,dh)=>{f();function nI(t){return function(e){return t(e)}}dh.exports=nI});var mo=m((gn,Cr)=>{f();var oI=ti(),mh=typeof gn=="object"&&gn&&!gn.nodeType&&gn,mn=mh&&typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,aI=mn&&mn.exports===mh,ai=aI&&oI.process,iI=function(){try{var t=mn&&mn.require&&mn.require("util").types;return t||ai&&ai.binding&&ai.binding("util")}catch(e){}}();Cr.exports=iI});var go=m((JL,vh)=>{f();var sI=ph(),uI=dn(),gh=mo(),yh=gh&&gh.isTypedArray,cI=yh?uI(yh):sI;vh.exports=cI});var ii=m((UL,Oh)=>{f();var fI=Xl(),lI=fn(),hI=ut(),pI=hn(),dI=pn(),mI=go(),gI=Object.prototype,yI=gI.hasOwnProperty;function vI(t,e){var r=hI(t),n=!r&&lI(t),o=!r&&!n&&pI(t),a=!r&&!n&&!o&&mI(t),i=r||n||o||a,s=i?fI(t.length,String):[],u=s.length;for(var c in t)(e||yI.call(t,c))&&!(i&&(c=="length"||o&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||dI(c,u)))&&s.push(c);return s}Oh.exports=vI});var yo=m((HL,_h)=>{f();var OI=Object.prototype;function _I(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||OI;return t===r}_h.exports=_I});var si=m((GL,bh)=>{f();function bI(t,e){return function(r){return t(e(r))}}bh.exports=bI});var kh=m(($L,xh)=>{f();var xI=si(),kI=xI(Object.keys,Object);xh.exports=kI});var Sh=m((YL,Th)=>{f();var TI=yo(),SI=kh(),AI=Object.prototype,NI=AI.hasOwnProperty;function II(t){if(!TI(t))return SI(t);var e=[];for(var r in Object(t))NI.call(t,r)&&r!="constructor"&&e.push(r);return e}Th.exports=II});var yn=m((WL,Ah)=>{f();var RI=so(),CI=po();function wI(t){return t!=null&&CI(t.length)&&!RI(t)}Ah.exports=wI});var vo=m((XL,Nh)=>{f();var FI=ii(),EI=Sh(),PI=yn();function MI(t){return PI(t)?FI(t):EI(t)}Nh.exports=MI});var Rh=m((ZL,Ih)=>{f();var DI=rr(),BI=vo();function qI(t,e){return t&&DI(e,BI(e),t)}Ih.exports=qI});var wh=m((QL,Ch)=>{f();function zI(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}Ch.exports=zI});var Eh=m((eK,Fh)=>{f();var LI=dt(),KI=yo(),jI=wh(),VI=Object.prototype,JI=VI.hasOwnProperty;function UI(t){if(!LI(t))return jI(t);var e=KI(t),r=[];for(var n in t)n=="constructor"&&(e||!JI.call(t,n))||r.push(n);return r}Fh.exports=UI});var wr=m((tK,Ph)=>{f();var HI=ii(),GI=Eh(),$I=yn();function YI(t){return $I(t)?HI(t,!0):GI(t)}Ph.exports=YI});var Dh=m((rK,Mh)=>{f();var WI=rr(),XI=wr();function ZI(t,e){return t&&WI(e,XI(e),t)}Mh.exports=ZI});var ui=m((vn,Fr)=>{f();var QI=st(),Bh=typeof vn=="object"&&vn&&!vn.nodeType&&vn,qh=Bh&&typeof Fr=="object"&&Fr&&!Fr.nodeType&&Fr,eR=qh&&qh.exports===Bh,zh=eR?QI.Buffer:void 0,Lh=zh?zh.allocUnsafe:void 0;function tR(t,e){if(e)return t.slice();var r=t.length,n=Lh?Lh(r):new t.constructor(r);return t.copy(n),n}Fr.exports=tR});var ci=m((nK,Kh)=>{f();function rR(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}Kh.exports=rR});var Vh=m((oK,jh)=>{f();function nR(t,e){for(var r=-1,n=t==null?0:t.length,o=0,a=[];++r<n;){var i=t[r];e(i,r,t)&&(a[o++]=i)}return a}jh.exports=nR});var fi=m((aK,Jh)=>{f();function oR(){return[]}Jh.exports=oR});var Oo=m((iK,Hh)=>{f();var aR=Vh(),iR=fi(),sR=Object.prototype,uR=sR.propertyIsEnumerable,Uh=Object.getOwnPropertySymbols,cR=Uh?function(t){return t==null?[]:(t=Object(t),aR(Uh(t),function(e){return uR.call(t,e)}))}:iR;Hh.exports=cR});var $h=m((sK,Gh)=>{f();var fR=rr(),lR=Oo();function hR(t,e){return fR(t,lR(t),e)}Gh.exports=hR});var _o=m((uK,Yh)=>{f();function pR(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}Yh.exports=pR});var bo=m((cK,Wh)=>{f();var dR=si(),mR=dR(Object.getPrototypeOf,Object);Wh.exports=mR});var li=m((fK,Xh)=>{f();var gR=_o(),yR=bo(),vR=Oo(),OR=fi(),_R=Object.getOwnPropertySymbols,bR=_R?function(t){for(var e=[];t;)gR(e,vR(t)),t=yR(t);return e}:OR;Xh.exports=bR});var Qh=m((lK,Zh)=>{f();var xR=rr(),kR=li();function TR(t,e){return xR(t,kR(t),e)}Zh.exports=TR});var hi=m((hK,ep)=>{f();var SR=_o(),AR=ut();function NR(t,e,r){var n=e(t);return AR(t)?n:SR(n,r(t))}ep.exports=NR});var pi=m((pK,tp)=>{f();var IR=hi(),RR=Oo(),CR=vo();function wR(t){return IR(t,CR,RR)}tp.exports=wR});var di=m((dK,rp)=>{f();var FR=hi(),ER=li(),PR=wr();function MR(t){return FR(t,PR,ER)}rp.exports=MR});var op=m((mK,np)=>{f();var DR=Lt(),BR=st(),qR=DR(BR,"DataView");np.exports=qR});var ip=m((gK,ap)=>{f();var zR=Lt(),LR=st(),KR=zR(LR,"Promise");ap.exports=KR});var up=m((yK,sp)=>{f();var jR=Lt(),VR=st(),JR=jR(VR,"Set");sp.exports=JR});var fp=m((vK,cp)=>{f();var UR=Lt(),HR=st(),GR=UR(HR,"WeakMap");cp.exports=GR});var On=m((OK,yp)=>{f();var mi=op(),gi=uo(),yi=ip(),vi=up(),Oi=fp(),lp=tr(),Er=ni(),hp="[object Map]",$R="[object Object]",pp="[object Promise]",dp="[object Set]",mp="[object WeakMap]",gp="[object DataView]",YR=Er(mi),WR=Er(gi),XR=Er(yi),ZR=Er(vi),QR=Er(Oi),nr=lp;(mi&&nr(new mi(new ArrayBuffer(1)))!=gp||gi&&nr(new gi)!=hp||yi&&nr(yi.resolve())!=pp||vi&&nr(new vi)!=dp||Oi&&nr(new Oi)!=mp)&&(nr=function(t){var e=lp(t),r=e==$R?t.constructor:void 0,n=r?Er(r):"";if(n)switch(n){case YR:return gp;case WR:return hp;case XR:return pp;case ZR:return dp;case QR:return mp}return e});yp.exports=nr});var Op=m((_K,vp)=>{f();var eC=Object.prototype,tC=eC.hasOwnProperty;function rC(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&tC.call(t,"index")&&(r.index=t.index,r.input=t.input),r}vp.exports=rC});var _i=m((bK,_p)=>{f();var nC=st(),oC=nC.Uint8Array;_p.exports=oC});var xo=m((xK,xp)=>{f();var bp=_i();function aC(t){var e=new t.constructor(t.byteLength);return new bp(e).set(new bp(t)),e}xp.exports=aC});var Tp=m((kK,kp)=>{f();var iC=xo();function sC(t,e){var r=e?iC(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}kp.exports=sC});var Ap=m((TK,Sp)=>{f();var uC=/\w*$/;function cC(t){var e=new t.constructor(t.source,uC.exec(t));return e.lastIndex=t.lastIndex,e}Sp.exports=cC});var wp=m((SK,Cp)=>{f();var Np=er(),Ip=Np?Np.prototype:void 0,Rp=Ip?Ip.valueOf:void 0;function fC(t){return Rp?Object(Rp.call(t)):{}}Cp.exports=fC});var bi=m((AK,Fp)=>{f();var lC=xo();function hC(t,e){var r=e?lC(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}Fp.exports=hC});var Pp=m((NK,Ep)=>{f();var pC=xo(),dC=Tp(),mC=Ap(),gC=wp(),yC=bi(),vC="[object Boolean]",OC="[object Date]",_C="[object Map]",bC="[object Number]",xC="[object RegExp]",kC="[object Set]",TC="[object String]",SC="[object Symbol]",AC="[object ArrayBuffer]",NC="[object DataView]",IC="[object Float32Array]",RC="[object Float64Array]",CC="[object Int8Array]",wC="[object Int16Array]",FC="[object Int32Array]",EC="[object Uint8Array]",PC="[object Uint8ClampedArray]",MC="[object Uint16Array]",DC="[object Uint32Array]";function BC(t,e,r){var n=t.constructor;switch(e){case AC:return pC(t);case vC:case OC:return new n(+t);case NC:return dC(t,r);case IC:case RC:case CC:case wC:case FC:case EC:case PC:case MC:case DC:return yC(t,r);case _C:return new n;case bC:case TC:return new n(t);case xC:return mC(t);case kC:return new n;case SC:return gC(t)}}Ep.exports=BC});var Bp=m((IK,Dp)=>{f();var qC=dt(),Mp=Object.create,zC=function(){function t(){}return function(e){if(!qC(e))return{};if(Mp)return Mp(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();Dp.exports=zC});var xi=m((RK,qp)=>{f();var LC=Bp(),KC=bo(),jC=yo();function VC(t){return typeof t.constructor=="function"&&!jC(t)?LC(KC(t)):{}}qp.exports=VC});var Lp=m((CK,zp)=>{f();var JC=On(),UC=mt(),HC="[object Map]";function GC(t){return UC(t)&&JC(t)==HC}zp.exports=GC});var Jp=m((wK,Vp)=>{f();var $C=Lp(),YC=dn(),Kp=mo(),jp=Kp&&Kp.isMap,WC=jp?YC(jp):$C;Vp.exports=WC});var Hp=m((FK,Up)=>{f();var XC=On(),ZC=mt(),QC="[object Set]";function ew(t){return ZC(t)&&XC(t)==QC}Up.exports=ew});var Wp=m((EK,Yp)=>{f();var tw=Hp(),rw=dn(),Gp=mo(),$p=Gp&&Gp.isSet,nw=$p?rw($p):tw;Yp.exports=nw});var td=m((PK,ed)=>{f();var ow=fo(),aw=Jl(),iw=ho(),sw=Rh(),uw=Dh(),cw=ui(),fw=ci(),lw=$h(),hw=Qh(),pw=pi(),dw=di(),mw=On(),gw=Op(),yw=Pp(),vw=xi(),Ow=ut(),_w=hn(),bw=Jp(),xw=dt(),kw=Wp(),Tw=vo(),Sw=wr(),Aw=1,Nw=2,Iw=4,Xp="[object Arguments]",Rw="[object Array]",Cw="[object Boolean]",ww="[object Date]",Fw="[object Error]",Zp="[object Function]",Ew="[object GeneratorFunction]",Pw="[object Map]",Mw="[object Number]",Qp="[object Object]",Dw="[object RegExp]",Bw="[object Set]",qw="[object String]",zw="[object Symbol]",Lw="[object WeakMap]",Kw="[object ArrayBuffer]",jw="[object DataView]",Vw="[object Float32Array]",Jw="[object Float64Array]",Uw="[object Int8Array]",Hw="[object Int16Array]",Gw="[object Int32Array]",$w="[object Uint8Array]",Yw="[object Uint8ClampedArray]",Ww="[object Uint16Array]",Xw="[object Uint32Array]",W={};W[Xp]=W[Rw]=W[Kw]=W[jw]=W[Cw]=W[ww]=W[Vw]=W[Jw]=W[Uw]=W[Hw]=W[Gw]=W[Pw]=W[Mw]=W[Qp]=W[Dw]=W[Bw]=W[qw]=W[zw]=W[$w]=W[Yw]=W[Ww]=W[Xw]=!0;W[Fw]=W[Zp]=W[Lw]=!1;function ko(t,e,r,n,o,a){var i,s=e&Aw,u=e&Nw,c=e&Iw;if(r&&(i=o?r(t,n,o,a):r(t)),i!==void 0)return i;if(!xw(t))return t;var l=Ow(t);if(l){if(i=gw(t),!s)return fw(t,i)}else{var h=mw(t),p=h==Zp||h==Ew;if(_w(t))return cw(t,s);if(h==Qp||h==Xp||p&&!o){if(i=u||p?{}:vw(t),!s)return u?hw(t,uw(i,t)):lw(t,sw(i,t))}else{if(!W[h])return o?t:{};i=yw(t,h,s)}}a||(a=new ow);var d=a.get(t);if(d)return d;a.set(t,i),kw(t)?t.forEach(function(O){i.add(ko(O,e,r,O,t,a))}):bw(t)&&t.forEach(function(O,T){i.set(T,ko(O,e,r,T,t,a))});var g=c?u?dw:pw:u?Sw:Tw,y=l?void 0:g(t);return aw(y||t,function(O,T){y&&(T=O,O=t[T]),iw(i,T,ko(O,e,r,T,t,a))}),i}ed.exports=ko});var To=m((MK,rd)=>{f();var Zw=tr(),Qw=mt(),eF="[object Symbol]";function tF(t){return typeof t=="symbol"||Qw(t)&&Zw(t)==eF}rd.exports=tF});var od=m((DK,nd)=>{f();var rF=ut(),nF=To(),oF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,aF=/^\w*$/;function iF(t,e){if(rF(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||nF(t)?!0:aF.test(t)||!oF.test(t)||e!=null&&t in Object(e)}nd.exports=iF});var sd=m((BK,id)=>{f();var ad=co(),sF="Expected a function";function ki(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(sF);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=t.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(ki.Cache||ad),r}ki.Cache=ad;id.exports=ki});var cd=m((qK,ud)=>{f();var uF=sd(),cF=500;function fF(t){var e=uF(t,function(n){return r.size===cF&&r.clear(),n}),r=e.cache;return e}ud.exports=fF});var ld=m((zK,fd)=>{f();var lF=cd(),hF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pF=/\\(\\)?/g,dF=lF(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(hF,function(r,n,o,a){e.push(o?a.replace(pF,"$1"):n||r)}),e});fd.exports=dF});var yd=m((LK,gd)=>{f();var hd=er(),mF=io(),gF=ut(),yF=To(),vF=1/0,pd=hd?hd.prototype:void 0,dd=pd?pd.toString:void 0;function md(t){if(typeof t=="string")return t;if(gF(t))return mF(t,md)+"";if(yF(t))return dd?dd.call(t):"";var e=t+"";return e=="0"&&1/t==-vF?"-0":e}gd.exports=md});var Od=m((KK,vd)=>{f();var OF=yd();function _F(t){return t==null?"":OF(t)}vd.exports=_F});var or=m((jK,_d)=>{f();var bF=ut(),xF=od(),kF=ld(),TF=Od();function SF(t,e){return bF(t)?t:xF(t,e)?[t]:kF(TF(t))}_d.exports=SF});var xd=m((VK,bd)=>{f();function AF(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}bd.exports=AF});var _n=m((JK,kd)=>{f();var NF=To(),IF=1/0;function RF(t){if(typeof t=="string"||NF(t))return t;var e=t+"";return e=="0"&&1/t==-IF?"-0":e}kd.exports=RF});var Ti=m((UK,Td)=>{f();var CF=or(),wF=_n();function FF(t,e){e=CF(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[wF(e[r++])];return r&&r==n?t:void 0}Td.exports=FF});var Ad=m((HK,Sd)=>{f();function EF(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(o);++n<o;)a[n]=t[n+e];return a}Sd.exports=EF});var Id=m((GK,Nd)=>{f();var PF=Ti(),MF=Ad();function DF(t,e){return e.length<2?t:PF(t,MF(e,0,-1))}Nd.exports=DF});var Cd=m(($K,Rd)=>{f();var BF=or(),qF=xd(),zF=Id(),LF=_n();function KF(t,e){return e=BF(e,t),t=zF(t,e),t==null||delete t[LF(qF(e))]}Rd.exports=KF});var Si=m((YK,Fd)=>{f();var jF=tr(),VF=bo(),JF=mt(),UF="[object Object]",HF=Function.prototype,GF=Object.prototype,wd=HF.toString,$F=GF.hasOwnProperty,YF=wd.call(Object);function WF(t){if(!JF(t)||jF(t)!=UF)return!1;var e=VF(t);if(e===null)return!0;var r=$F.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&wd.call(r)==YF}Fd.exports=WF});var Pd=m((WK,Ed)=>{f();var XF=Si();function ZF(t){return XF(t)?void 0:t}Ed.exports=ZF});var qd=m((XK,Bd)=>{f();var Md=er(),QF=fn(),eE=ut(),Dd=Md?Md.isConcatSpreadable:void 0;function tE(t){return eE(t)||QF(t)||!!(Dd&&t&&t[Dd])}Bd.exports=tE});var Ai=m((ZK,Ld)=>{f();var rE=_o(),nE=qd();function zd(t,e,r,n,o){var a=-1,i=t.length;for(r||(r=nE),o||(o=[]);++a<i;){var s=t[a];e>0&&r(s)?e>1?zd(s,e-1,r,n,o):rE(o,s):n||(o[o.length]=s)}return o}Ld.exports=zd});var jd=m((QK,Kd)=>{f();var oE=Ai();function aE(t){var e=t==null?0:t.length;return e?oE(t,1):[]}Kd.exports=aE});var Jd=m((ej,Vd)=>{f();function iE(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}Vd.exports=iE});var Ni=m((tj,Hd)=>{f();var sE=Jd(),Ud=Math.max;function uE(t,e,r){return e=Ud(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,a=Ud(n.length-e,0),i=Array(a);++o<a;)i[o]=n[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=n[o];return s[e]=r(i),sE(t,this,s)}}Hd.exports=uE});var $d=m((rj,Gd)=>{f();function cE(t){return function(){return t}}Gd.exports=cE});var Ii=m((nj,Yd)=>{f();function fE(t){return t}Yd.exports=fE});var Zd=m((oj,Xd)=>{f();var lE=$d(),Wd=oi(),hE=Ii(),pE=Wd?function(t,e){return Wd(t,"toString",{configurable:!0,enumerable:!1,value:lE(e),writable:!0})}:hE;Xd.exports=pE});var em=m((aj,Qd)=>{f();var dE=800,mE=16,gE=Date.now;function yE(t){var e=0,r=0;return function(){var n=gE(),o=mE-(n-r);if(r=n,o>0){if(++e>=dE)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}Qd.exports=yE});var Ri=m((ij,tm)=>{f();var vE=Zd(),OE=em(),_E=OE(vE);tm.exports=_E});var Ci=m((sj,rm)=>{f();var bE=jd(),xE=Ni(),kE=Ri();function TE(t){return kE(xE(t,void 0,bE),t+"")}rm.exports=TE});var om=m((uj,nm)=>{f();var SE=io(),AE=td(),NE=Cd(),IE=or(),RE=rr(),CE=Pd(),wE=Ci(),FE=di(),EE=1,PE=2,ME=4,DE=wE(function(t,e){var r={};if(t==null)return r;var n=!1;e=SE(e,function(a){return a=IE(a,t),n||(n=a.length>1),a}),RE(t,FE(t),r),n&&(r=AE(r,EE|PE|ME,CE));for(var o=e.length;o--;)NE(r,e[o]);return r});nm.exports=DE});var sm=m((cj,im)=>{f();var BE=ho(),qE=or(),zE=pn(),am=dt(),LE=_n();function KE(t,e,r,n){if(!am(t))return t;e=qE(e,t);for(var o=-1,a=e.length,i=a-1,s=t;s!=null&&++o<a;){var u=LE(e[o]),c=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(o!=i){var l=s[u];c=n?n(l,u,s):void 0,c===void 0&&(c=am(l)?l:zE(e[o+1])?[]:{})}BE(s,u,c),s=s[u]}return t}im.exports=KE});var cm=m((fj,um)=>{f();var jE=Ti(),VE=sm(),JE=or();function UE(t,e,r){for(var n=-1,o=e.length,a={};++n<o;){var i=e[n],s=jE(t,i);r(s,i)&&VE(a,JE(i,t),s)}return a}um.exports=UE});var lm=m((lj,fm)=>{f();function HE(t,e){return t!=null&&e in Object(t)}fm.exports=HE});var pm=m((hj,hm)=>{f();var GE=or(),$E=fn(),YE=ut(),WE=pn(),XE=po(),ZE=_n();function QE(t,e,r){e=GE(e,t);for(var n=-1,o=e.length,a=!1;++n<o;){var i=ZE(e[n]);if(!(a=t!=null&&r(t,i)))break;t=t[i]}return a||++n!=o?a:(o=t==null?0:t.length,!!o&&XE(o)&&WE(i,o)&&(YE(t)||$E(t)))}hm.exports=QE});var mm=m((pj,dm)=>{f();var eP=lm(),tP=pm();function rP(t,e){return t!=null&&tP(t,e,eP)}dm.exports=rP});var ym=m((dj,gm)=>{f();var nP=cm(),oP=mm();function aP(t,e){return nP(t,e,function(r,n){return oP(t,n)})}gm.exports=aP});var wi=m((mj,vm)=>{f();var iP=ym(),sP=Ci(),uP=sP(function(t,e){return t==null?{}:iP(t,e)});vm.exports=uP});var Sm=m((_j,Tm)=>{f();var fP="__lodash_hash_undefined__";function lP(t){return this.__data__.set(t,fP),this}Tm.exports=lP});var Nm=m((bj,Am)=>{f();function hP(t){return this.__data__.has(t)}Am.exports=hP});var Fi=m((xj,Im)=>{f();var pP=co(),dP=Sm(),mP=Nm();function Ao(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new pP;++e<r;)this.add(t[e])}Ao.prototype.add=Ao.prototype.push=dP;Ao.prototype.has=mP;Im.exports=Ao});var Cm=m((kj,Rm)=>{f();function gP(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}Rm.exports=gP});var Ei=m((Tj,wm)=>{f();function yP(t,e){return t.has(e)}wm.exports=yP});var Pi=m((Sj,Fm)=>{f();var vP=Fi(),OP=Cm(),_P=Ei(),bP=1,xP=2;function kP(t,e,r,n,o,a){var i=r&bP,s=t.length,u=e.length;if(s!=u&&!(i&&u>s))return!1;var c=a.get(t),l=a.get(e);if(c&&l)return c==e&&l==t;var h=-1,p=!0,d=r&xP?new vP:void 0;for(a.set(t,e),a.set(e,t);++h<s;){var g=t[h],y=e[h];if(n)var O=i?n(y,g,h,e,t,a):n(g,y,h,t,e,a);if(O!==void 0){if(O)continue;p=!1;break}if(d){if(!OP(e,function(T,A){if(!_P(d,A)&&(g===T||o(g,T,r,n,a)))return d.push(A)})){p=!1;break}}else if(!(g===y||o(g,y,r,n,a))){p=!1;break}}return a.delete(t),a.delete(e),p}Fm.exports=kP});var Pm=m((Aj,Em)=>{f();function TP(t){var e=-1,r=Array(t.size);return t.forEach(function(n,o){r[++e]=[o,n]}),r}Em.exports=TP});var Dm=m((Nj,Mm)=>{f();function SP(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}Mm.exports=SP});var Km=m((Ij,Lm)=>{f();var Bm=er(),qm=_i(),AP=Tr(),NP=Pi(),IP=Pm(),RP=Dm(),CP=1,wP=2,FP="[object Boolean]",EP="[object Date]",PP="[object Error]",MP="[object Map]",DP="[object Number]",BP="[object RegExp]",qP="[object Set]",zP="[object String]",LP="[object Symbol]",KP="[object ArrayBuffer]",jP="[object DataView]",zm=Bm?Bm.prototype:void 0,Mi=zm?zm.valueOf:void 0;function VP(t,e,r,n,o,a,i){switch(r){case jP:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case KP:return!(t.byteLength!=e.byteLength||!a(new qm(t),new qm(e)));case FP:case EP:case DP:return AP(+t,+e);case PP:return t.name==e.name&&t.message==e.message;case BP:case zP:return t==e+"";case MP:var s=IP;case qP:var u=n&CP;if(s||(s=RP),t.size!=e.size&&!u)return!1;var c=i.get(t);if(c)return c==e;n|=wP,i.set(t,e);var l=NP(s(t),s(e),n,o,a,i);return i.delete(t),l;case LP:if(Mi)return Mi.call(t)==Mi.call(e)}return!1}Lm.exports=VP});var Jm=m((Rj,Vm)=>{f();var jm=pi(),JP=1,UP=Object.prototype,HP=UP.hasOwnProperty;function GP(t,e,r,n,o,a){var i=r&JP,s=jm(t),u=s.length,c=jm(e),l=c.length;if(u!=l&&!i)return!1;for(var h=u;h--;){var p=s[h];if(!(i?p in e:HP.call(e,p)))return!1}var d=a.get(t),g=a.get(e);if(d&&g)return d==e&&g==t;var y=!0;a.set(t,e),a.set(e,t);for(var O=i;++h<u;){p=s[h];var T=t[p],A=e[p];if(n)var I=i?n(A,T,p,e,t,a):n(T,A,p,t,e,a);if(!(I===void 0?T===A||o(T,A,r,n,a):I)){y=!1;break}O||(O=p=="constructor")}if(y&&!O){var w=t.constructor,P=e.constructor;w!=P&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof P=="function"&&P instanceof P)&&(y=!1)}return a.delete(t),a.delete(e),y}Vm.exports=GP});var Zm=m((Cj,Xm)=>{f();var Di=fo(),$P=Pi(),YP=Km(),WP=Jm(),Um=On(),Hm=ut(),Gm=hn(),XP=go(),ZP=1,$m="[object Arguments]",Ym="[object Array]",No="[object Object]",QP=Object.prototype,Wm=QP.hasOwnProperty;function eM(t,e,r,n,o,a){var i=Hm(t),s=Hm(e),u=i?Ym:Um(t),c=s?Ym:Um(e);u=u==$m?No:u,c=c==$m?No:c;var l=u==No,h=c==No,p=u==c;if(p&&Gm(t)){if(!Gm(e))return!1;i=!0,l=!1}if(p&&!l)return a||(a=new Di),i||XP(t)?$P(t,e,r,n,o,a):YP(t,e,u,r,n,o,a);if(!(r&ZP)){var d=l&&Wm.call(t,"__wrapped__"),g=h&&Wm.call(e,"__wrapped__");if(d||g){var y=d?t.value():t,O=g?e.value():e;return a||(a=new Di),o(y,O,r,n,a)}}return p?(a||(a=new Di),WP(t,e,r,n,o,a)):!1}Xm.exports=eM});var rg=m((wj,tg)=>{f();var tM=Zm(),Qm=mt();function eg(t,e,r,n,o){return t===e?!0:t==null||e==null||!Qm(t)&&!Qm(e)?t!==t&&e!==e:tM(t,e,r,n,eg,o)}tg.exports=eg});var og=m((Fj,ng)=>{f();var rM=rg();function nM(t,e){return rM(t,e)}ng.exports=nM});var ig=m((Bj,ag)=>{f();function iM(t,e,r,n){for(var o=t.length,a=r+(n?1:-1);n?a--:++a<o;)if(e(t[a],a,t))return a;return-1}ag.exports=iM});var ug=m((qj,sg)=>{f();function sM(t){return t!==t}sg.exports=sM});var fg=m((zj,cg)=>{f();function uM(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}cg.exports=uM});var hg=m((Lj,lg)=>{f();var cM=ig(),fM=ug(),lM=fg();function hM(t,e,r){return e===e?lM(t,e,r):cM(t,fM,r)}lg.exports=hM});var dg=m((Kj,pg)=>{f();var pM=hg();function dM(t,e){var r=t==null?0:t.length;return!!r&&pM(t,e,0)>-1}pg.exports=dM});var gg=m((jj,mg)=>{f();function mM(t,e,r){for(var n=-1,o=t==null?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1}mg.exports=mM});var vg=m((Vj,yg)=>{f();var gM=Fi(),yM=dg(),vM=gg(),OM=io(),_M=dn(),bM=Ei(),xM=200;function kM(t,e,r,n){var o=-1,a=yM,i=!0,s=t.length,u=[],c=e.length;if(!s)return u;r&&(e=OM(e,_M(r))),n?(a=vM,i=!1):e.length>=xM&&(a=bM,i=!1,e=new gM(e));e:for(;++o<s;){var l=t[o],h=r==null?l:r(l);if(l=n||l!==0?l:0,i&&h===h){for(var p=c;p--;)if(e[p]===h)continue e;u.push(l)}else a(e,h,n)||u.push(l)}return u}yg.exports=kM});var qi=m((Jj,Og)=>{f();var TM=Ii(),SM=Ni(),AM=Ri();function NM(t,e){return AM(SM(t,e,TM),t+"")}Og.exports=NM});var zi=m((Uj,_g)=>{f();var IM=yn(),RM=mt();function CM(t){return RM(t)&&IM(t)}_g.exports=CM});var kg=m((Hj,xg)=>{f();var wM=vg(),FM=Ai(),EM=qi(),bg=zi(),PM=EM(function(t,e){return bg(t)?wM(t,FM(e,1,bg,!0)):[]});xg.exports=PM});var Li=m((Gj,Tg)=>{f();var MM=lo(),DM=Tr();function BM(t,e,r){(r!==void 0&&!DM(t[e],r)||r===void 0&&!(e in t))&&MM(t,e,r)}Tg.exports=BM});var Ag=m(($j,Sg)=>{f();function qM(t){return function(e,r,n){for(var o=-1,a=Object(e),i=n(e),s=i.length;s--;){var u=i[t?s:++o];if(r(a[u],u,a)===!1)break}return e}}Sg.exports=qM});var Ig=m((Yj,Ng)=>{f();var zM=Ag(),LM=zM();Ng.exports=LM});var Ki=m((Wj,Rg)=>{f();function KM(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}Rg.exports=KM});var wg=m((Xj,Cg)=>{f();var jM=rr(),VM=wr();function JM(t){return jM(t,VM(t))}Cg.exports=JM});var Bg=m((Zj,Dg)=>{f();var Fg=Li(),UM=ui(),HM=bi(),GM=ci(),$M=xi(),Eg=fn(),Pg=ut(),YM=zi(),WM=hn(),XM=so(),ZM=dt(),QM=Si(),eD=go(),Mg=Ki(),tD=wg();function rD(t,e,r,n,o,a,i){var s=Mg(t,r),u=Mg(e,r),c=i.get(u);if(c){Fg(t,r,c);return}var l=a?a(s,u,r+"",t,e,i):void 0,h=l===void 0;if(h){var p=Pg(u),d=!p&&WM(u),g=!p&&!d&&eD(u);l=u,p||d||g?Pg(s)?l=s:YM(s)?l=GM(s):d?(h=!1,l=UM(u,!0)):g?(h=!1,l=HM(u,!0)):l=[]:QM(u)||Eg(u)?(l=s,Eg(s)?l=tD(s):(!ZM(s)||XM(s))&&(l=$M(u))):h=!1}h&&(i.set(u,l),o(l,u,n,a,i),i.delete(u)),Fg(t,r,l)}Dg.exports=rD});var Lg=m((Qj,zg)=>{f();var nD=fo(),oD=Li(),aD=Ig(),iD=Bg(),sD=dt(),uD=wr(),cD=Ki();function qg(t,e,r,n,o){t!==e&&aD(e,function(a,i){if(o||(o=new nD),sD(a))iD(t,e,i,r,qg,n,o);else{var s=n?n(cD(t,i),a,i+"",t,e,o):void 0;s===void 0&&(s=a),oD(t,i,s)}},uD)}zg.exports=qg});var jg=m((e1,Kg)=>{f();var fD=Tr(),lD=yn(),hD=pn(),pD=dt();function dD(t,e,r){if(!pD(r))return!1;var n=typeof e;return(n=="number"?lD(r)&&hD(e,r.length):n=="string"&&e in r)?fD(r[e],t):!1}Kg.exports=dD});var Jg=m((t1,Vg)=>{f();var mD=qi(),gD=jg();function yD(t){return mD(function(e,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(o--,a):void 0,i&&gD(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var s=r[n];s&&t(e,s,n,a)}return e})}Vg.exports=yD});var Hg=m((r1,Ug)=>{f();var vD=Lg(),OD=Jg(),_D=OD(function(t,e,r,n){vD(t,e,r,n)});Ug.exports=_D});var gs=m((XV,yx)=>{f();"use strict";yx.exports=zD;function zD(t,e){for(var r=new Array(arguments.length-1),n=0,o=2,a=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(s,u){r[n]=function(l){if(a)if(a=!1,l)u(l);else{for(var h=new Array(arguments.length-1),p=0;p<h.length;)h[p++]=arguments[p];s.apply(null,h)}};try{t.apply(e||null,r)}catch(c){a&&(a=!1,u(c))}})}});var bx=m(_x=>{f();"use strict";var Fo=_x;Fo.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Pr=new Array(64),vx=new Array(123);for(ct=0;ct<64;)vx[Pr[ct]=ct<26?ct+65:ct<52?ct+71:ct<62?ct-4:ct-59|43]=ct++;var ct;Fo.encode=function(e,r,n){for(var o=null,a=[],i=0,s=0,u;r<n;){var c=e[r++];switch(s){case 0:a[i++]=Pr[c>>2],u=(c&3)<<4,s=1;break;case 1:a[i++]=Pr[u|c>>4],u=(c&15)<<2,s=2;break;case 2:a[i++]=Pr[u|c>>6],a[i++]=Pr[c&63],s=0;break}i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),i=0)}return s&&(a[i++]=Pr[u],a[i++]=61,s===1&&(a[i++]=61)),o?(i&&o.push(String.fromCharCode.apply(String,a.slice(0,i))),o.join("")):String.fromCharCode.apply(String,a.slice(0,i))};var Ox="invalid encoding";Fo.decode=function(e,r,n){for(var o=n,a=0,i,s=0;s<e.length;){var u=e.charCodeAt(s++);if(u===61&&a>1)break;if((u=vx[u])===void 0)throw Error(Ox);switch(a){case 0:i=u,a=1;break;case 1:r[n++]=i<<2|(u&48)>>4,i=u,a=2;break;case 2:r[n++]=(i&15)<<4|(u&60)>>2,i=u,a=3;break;case 3:r[n++]=(i&3)<<6|u,a=0;break}}if(a===1)throw Error(Ox);return n-o};Fo.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var kx=m((QV,xx)=>{f();"use strict";xx.exports=Eo;function Eo(){this._listeners={}}Eo.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};Eo.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],o=0;o<n.length;)n[o].fn===r?n.splice(o,1):++o;return this};Eo.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<r.length;)r[o].fn.apply(r[o++].ctx,n)}return this}});var Cx=m((e4,Rx)=>{f();"use strict";Rx.exports=Tx(Tx);function Tx(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function o(u,c,l){e[0]=u,c[l]=r[0],c[l+1]=r[1],c[l+2]=r[2],c[l+3]=r[3]}function a(u,c,l){e[0]=u,c[l]=r[3],c[l+1]=r[2],c[l+2]=r[1],c[l+3]=r[0]}t.writeFloatLE=n?o:a,t.writeFloatBE=n?a:o;function i(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],e[0]}function s(u,c){return r[3]=u[c],r[2]=u[c+1],r[1]=u[c+2],r[0]=u[c+3],e[0]}t.readFloatLE=n?i:s,t.readFloatBE=n?s:i}():function(){function e(n,o,a,i){var s=o<0?1:0;if(s&&(o=-o),o===0)n(1/o>0?0:2147483648,a,i);else if(isNaN(o))n(2143289344,a,i);else if(o>34028234663852886e22)n((s<<31|2139095040)>>>0,a,i);else if(o<11754943508222875e-54)n((s<<31|Math.round(o/1401298464324817e-60))>>>0,a,i);else{var u=Math.floor(Math.log(o)/Math.LN2),c=Math.round(o*Math.pow(2,-u)*8388608)&8388607;n((s<<31|u+127<<23|c)>>>0,a,i)}}t.writeFloatLE=e.bind(null,Sx),t.writeFloatBE=e.bind(null,Ax);function r(n,o,a){var i=n(o,a),s=(i>>31)*2+1,u=i>>>23&255,c=i&8388607;return u===255?c?NaN:s*(1/0):u===0?s*1401298464324817e-60*c:s*Math.pow(2,u-150)*(c+8388608)}t.readFloatLE=r.bind(null,Nx),t.readFloatBE=r.bind(null,Ix)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function o(u,c,l){e[0]=u,c[l]=r[0],c[l+1]=r[1],c[l+2]=r[2],c[l+3]=r[3],c[l+4]=r[4],c[l+5]=r[5],c[l+6]=r[6],c[l+7]=r[7]}function a(u,c,l){e[0]=u,c[l]=r[7],c[l+1]=r[6],c[l+2]=r[5],c[l+3]=r[4],c[l+4]=r[3],c[l+5]=r[2],c[l+6]=r[1],c[l+7]=r[0]}t.writeDoubleLE=n?o:a,t.writeDoubleBE=n?a:o;function i(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],r[4]=u[c+4],r[5]=u[c+5],r[6]=u[c+6],r[7]=u[c+7],e[0]}function s(u,c){return r[7]=u[c],r[6]=u[c+1],r[5]=u[c+2],r[4]=u[c+3],r[3]=u[c+4],r[2]=u[c+5],r[1]=u[c+6],r[0]=u[c+7],e[0]}t.readDoubleLE=n?i:s,t.readDoubleBE=n?s:i}():function(){function e(n,o,a,i,s,u){var c=i<0?1:0;if(c&&(i=-i),i===0)n(0,s,u+o),n(1/i>0?0:2147483648,s,u+a);else if(isNaN(i))n(0,s,u+o),n(2146959360,s,u+a);else if(i>17976931348623157e292)n(0,s,u+o),n((c<<31|2146435072)>>>0,s,u+a);else{var l;if(i<22250738585072014e-324)l=i/5e-324,n(l>>>0,s,u+o),n((c<<31|l/4294967296)>>>0,s,u+a);else{var h=Math.floor(Math.log(i)/Math.LN2);h===1024&&(h=1023),l=i*Math.pow(2,-h),n(l*4503599627370496>>>0,s,u+o),n((c<<31|h+1023<<20|l*1048576&1048575)>>>0,s,u+a)}}}t.writeDoubleLE=e.bind(null,Sx,0,4),t.writeDoubleBE=e.bind(null,Ax,4,0);function r(n,o,a,i,s){var u=n(i,s+o),c=n(i,s+a),l=(c>>31)*2+1,h=c>>>20&2047,p=4294967296*(c&1048575)+u;return h===2047?p?NaN:l*(1/0):h===0?l*5e-324*p:l*Math.pow(2,h-1075)*(p+4503599627370496)}t.readDoubleLE=r.bind(null,Nx,0,4),t.readDoubleBE=r.bind(null,Ix,4,0)}(),t}function Sx(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function Ax(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function Nx(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Ix(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var ys=m((exports,module)=>{f();"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var Fx=m(wx=>{f();"use strict";var vs=wx;vs.length=function(e){for(var r=0,n=0,o=0;o<e.length;++o)n=e.charCodeAt(o),n<128?r+=1:n<2048?r+=2:(n&64512)==55296&&(e.charCodeAt(o+1)&64512)==56320?(++o,r+=4):r+=3;return r};vs.read=function(e,r,n){var o=n-r;if(o<1)return"";for(var a=null,i=[],s=0,u;r<n;)u=e[r++],u<128?i[s++]=u:u>191&&u<224?i[s++]=(u&31)<<6|e[r++]&63:u>239&&u<365?(u=((u&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,i[s++]=55296+(u>>10),i[s++]=56320+(u&1023)):i[s++]=(u&15)<<12|(e[r++]&63)<<6|e[r++]&63,s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),s=0);return a?(s&&a.push(String.fromCharCode.apply(String,i.slice(0,s))),a.join("")):String.fromCharCode.apply(String,i.slice(0,s))};vs.write=function(e,r,n){for(var o=n,a,i,s=0;s<e.length;++s)a=e.charCodeAt(s),a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):(a&64512)==55296&&((i=e.charCodeAt(s+1))&64512)==56320?(a=65536+((a&1023)<<10)+(i&1023),++s,r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128);return n-o}});var Px=m((r4,Ex)=>{f();"use strict";Ex.exports=LD;function LD(t,e,r){var n=r||8192,o=n>>>1,a=null,i=n;return function(u){if(u<1||u>o)return t(u);i+u>n&&(a=t(n),i=0);var c=e.call(a,i,i+=u);return i&7&&(i=(i|7)+1),c}}});var Dx=m((n4,Mx)=>{f();"use strict";Mx.exports=_e;var bn=yt();function _e(t,e){this.lo=t>>>0,this.hi=e>>>0}var ir=_e.zero=new _e(0,0);ir.toNumber=function(){return 0};ir.zzEncode=ir.zzDecode=function(){return this};ir.length=function(){return 1};var KD=_e.zeroHash="\0\0\0\0\0\0\0\0";_e.fromNumber=function(e){if(e===0)return ir;var r=e<0;r&&(e=-e);var n=e>>>0,o=(e-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new _e(n,o)};_e.from=function(e){if(typeof e=="number")return _e.fromNumber(e);if(bn.isString(e))if(bn.Long)e=bn.Long.fromString(e);else return _e.fromNumber(parseInt(e,10));return e.low||e.high?new _e(e.low>>>0,e.high>>>0):ir};_e.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};_e.prototype.toLong=function(e){return bn.Long?new bn.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Jt=String.prototype.charCodeAt;_e.fromHash=function(e){return e===KD?ir:new _e((Jt.call(e,0)|Jt.call(e,1)<<8|Jt.call(e,2)<<16|Jt.call(e,3)<<24)>>>0,(Jt.call(e,4)|Jt.call(e,5)<<8|Jt.call(e,6)<<16|Jt.call(e,7)<<24)>>>0)};_e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};_e.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};_e.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};_e.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var yt=m(Os=>{f();"use strict";var N=Os;N.asPromise=gs();N.base64=bx();N.EventEmitter=kx();N.float=Cx();N.inquire=ys();N.utf8=Fx();N.pool=Px();N.LongBits=Dx();N.isNode=Boolean(typeof window!="undefined"&&window&&window.process&&window.process.versions&&window.process.versions.node);N.global=N.isNode&&window||typeof window!="undefined"&&window||typeof self!="undefined"&&self||Os;N.emptyArray=Object.freeze?Object.freeze([]):[];N.emptyObject=Object.freeze?Object.freeze({}):{};N.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};N.isString=function(e){return typeof e=="string"||e instanceof String};N.isObject=function(e){return e&&typeof e=="object"};N.isset=N.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};N.Buffer=function(){try{var t=N.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();N._Buffer_from=null;N._Buffer_allocUnsafe=null;N.newBuffer=function(e){return typeof e=="number"?N.Buffer?N._Buffer_allocUnsafe(e):new N.Array(e):N.Buffer?N._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};N.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;N.Long=N.global.dcodeIO&&N.global.dcodeIO.Long||N.global.Long||N.inquire("long");N.key2Re=/^true|false|0|1$/;N.key32Re=/^-?(?:0|[1-9][0-9]*)$/;N.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;N.longToHash=function(e){return e?N.LongBits.from(e).toHash():N.LongBits.zeroHash};N.longFromHash=function(e,r){var n=N.LongBits.fromHash(e);return N.Long?N.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function Bx(t,e,r){for(var n=Object.keys(e),o=0;o<n.length;++o)(t[n[o]]===void 0||!r)&&(t[n[o]]=e[n[o]]);return t}N.merge=Bx;N.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function qx(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Bx(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}N.newError=qx;N.ProtocolError=qx("ProtocolError");N.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var o=Object.keys(this),a=o.length-1;a>-1;--a)if(r[o[a]]===1&&this[o[a]]!==void 0&&this[o[a]]!==null)return o[a]}};N.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};N.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};N._configure=function(){var t=N.Buffer;if(!t){N._Buffer_from=N._Buffer_allocUnsafe=null;return}N._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},N._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var Mo=m((a4,jx)=>{f();"use strict";jx.exports=K;var Xe=yt(),_s,Po=Xe.LongBits,zx=Xe.base64,Lx=Xe.utf8;function xn(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function bs(){}function jD(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function K(){this.len=0,this.head=new xn(bs,0,0),this.tail=this.head,this.states=null}var Kx=function(){return Xe.Buffer?function(){return(K.create=function(){return new _s})()}:function(){return new K}};K.create=Kx();K.alloc=function(e){return new Xe.Array(e)};Xe.Array!==Array&&(K.alloc=Xe.pool(K.alloc,Xe.Array.prototype.subarray));K.prototype._push=function(e,r,n){return this.tail=this.tail.next=new xn(e,r,n),this.len+=r,this};function xs(t,e,r){e[r]=t&255}function VD(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function ks(t,e){this.len=t,this.next=void 0,this.val=e}ks.prototype=Object.create(xn.prototype);ks.prototype.fn=VD;K.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new ks((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};K.prototype.int32=function(e){return e<0?this._push(Ts,10,Po.fromNumber(e)):this.uint32(e)};K.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Ts(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}K.prototype.uint64=function(e){var r=Po.from(e);return this._push(Ts,r.length(),r)};K.prototype.int64=K.prototype.uint64;K.prototype.sint64=function(e){var r=Po.from(e).zzEncode();return this._push(Ts,r.length(),r)};K.prototype.bool=function(e){return this._push(xs,1,e?1:0)};function Ss(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}K.prototype.fixed32=function(e){return this._push(Ss,4,e>>>0)};K.prototype.sfixed32=K.prototype.fixed32;K.prototype.fixed64=function(e){var r=Po.from(e);return this._push(Ss,4,r.lo)._push(Ss,4,r.hi)};K.prototype.sfixed64=K.prototype.fixed64;K.prototype.float=function(e){return this._push(Xe.float.writeFloatLE,4,e)};K.prototype.double=function(e){return this._push(Xe.float.writeDoubleLE,8,e)};var JD=Xe.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var o=0;o<e.length;++o)r[n+o]=e[o]};K.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(xs,1,0);if(Xe.isString(e)){var n=K.alloc(r=zx.length(e));zx.decode(e,n,0),e=n}return this.uint32(r)._push(JD,r,e)};K.prototype.string=function(e){var r=Lx.length(e);return r?this.uint32(r)._push(Lx.write,r,e):this._push(xs,1,0)};K.prototype.fork=function(){return this.states=new jD(this),this.head=this.tail=new xn(bs,0,0),this.len=0,this};K.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new xn(bs,0,0),this.len=0),this};K.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};K.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};K._configure=function(t){_s=t,K.create=Kx(),_s._configure()}});var Ux=m((i4,Jx)=>{f();"use strict";Jx.exports=vt;var Vx=Mo();(vt.prototype=Object.create(Vx.prototype)).constructor=vt;var Ut=yt();function vt(){Vx.call(this)}vt._configure=function(){vt.alloc=Ut._Buffer_allocUnsafe,vt.writeBytesBuffer=Ut.Buffer&&Ut.Buffer.prototype instanceof Uint8Array&&Ut.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var o=0;o<e.length;)r[n++]=e[o++]}};vt.prototype.bytes=function(e){Ut.isString(e)&&(e=Ut._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(vt.writeBytesBuffer,r,e),this};function UD(t,e,r){t.length<40?Ut.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}vt.prototype.string=function(e){var r=Ut.Buffer.byteLength(e);return this.uint32(r),r&&this._push(UD,r,e),this};vt._configure()});var Bo=m((s4,Wx)=>{f();"use strict";Wx.exports=fe;var Ot=yt(),As,Hx=Ot.LongBits,HD=Ot.utf8;function ft(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function fe(t){this.buf=t,this.pos=0,this.len=t.length}var Gx=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new fe(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new fe(e);throw Error("illegal buffer")},$x=function(){return Ot.Buffer?function(r){return(fe.create=function(o){return Ot.Buffer.isBuffer(o)?new As(o):Gx(o)})(r)}:Gx};fe.create=$x();fe.prototype._slice=Ot.Array.prototype.subarray||Ot.Array.prototype.slice;fe.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,ft(this,10);return e}}();fe.prototype.int32=function(){return this.uint32()|0};fe.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Ns(){var t=new Hx(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw ft(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw ft(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}fe.prototype.bool=function(){return this.uint32()!==0};function Do(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}fe.prototype.fixed32=function(){if(this.pos+4>this.len)throw ft(this,4);return Do(this.buf,this.pos+=4)};fe.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ft(this,4);return Do(this.buf,this.pos+=4)|0};function Yx(){if(this.pos+8>this.len)throw ft(this,8);return new Hx(Do(this.buf,this.pos+=4),Do(this.buf,this.pos+=4))}fe.prototype.float=function(){if(this.pos+4>this.len)throw ft(this,4);var e=Ot.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};fe.prototype.double=function(){if(this.pos+8>this.len)throw ft(this,4);var e=Ot.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};fe.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw ft(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};fe.prototype.string=function(){var e=this.bytes();return HD.read(e,0,e.length)};fe.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw ft(this,e);this.pos+=e}else do if(this.pos>=this.len)throw ft(this);while(this.buf[this.pos++]&128);return this};fe.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};fe._configure=function(t){As=t,fe.create=$x(),As._configure();var e=Ot.Long?"toLong":"toNumber";Ot.merge(fe.prototype,{int64:function(){return Ns.call(this)[e](!1)},uint64:function(){return Ns.call(this)[e](!0)},sint64:function(){return Ns.call(this).zzDecode()[e](!1)},fixed64:function(){return Yx.call(this)[e](!0)},sfixed64:function(){return Yx.call(this)[e](!1)}})}});var e0=m((u4,Qx)=>{f();"use strict";Qx.exports=sr;var Xx=Bo();(sr.prototype=Object.create(Xx.prototype)).constructor=sr;var Zx=yt();function sr(t){Xx.call(this,t)}sr._configure=function(){Zx.Buffer&&(sr.prototype._slice=Zx.Buffer.prototype.slice)};sr.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};sr._configure()});var r0=m((c4,t0)=>{f();"use strict";t0.exports=kn;var Is=yt();(kn.prototype=Object.create(Is.EventEmitter.prototype)).constructor=kn;function kn(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Is.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}kn.prototype.rpcCall=function t(e,r,n,o,a){if(!o)throw TypeError("request must be specified");var i=this;if(!a)return Is.asPromise(t,i,e,r,n,o);if(!i.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return i.rpcImpl(e,r[i.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(u,c){if(u)return i.emit("error",u,e),a(u);if(c===null){i.end(!0);return}if(!(c instanceof n))try{c=n[i.responseDelimited?"decodeDelimited":"decode"](c)}catch(l){return i.emit("error",l,e),a(l)}return i.emit("data",c,e),a(null,c)})}catch(s){i.emit("error",s,e),setTimeout(function(){a(s)},0);return}};kn.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Rs=m(n0=>{f();"use strict";var GD=n0;GD.Service=r0()});var Cs=m((l4,o0)=>{f();"use strict";o0.exports={}});var s0=m(i0=>{f();"use strict";var De=i0;De.build="minimal";De.Writer=Mo();De.BufferWriter=Ux();De.Reader=Bo();De.BufferReader=e0();De.util=yt();De.rpc=Rs();De.roots=Cs();De.configure=a0;function a0(){De.util._configure(),De.Writer._configure(De.BufferWriter),De.Reader._configure(De.BufferReader)}a0()});var c0=m((p4,u0)=>{f();"use strict";u0.exports=ws;function ws(t,e){typeof t=="string"&&(e=t,t=void 0);var r=[];function n(a){if(typeof a!="string"){var i=o();if(ws.verbose&&console.log("codegen: "+i),i="return "+i,a){for(var s=Object.keys(a),u=new Array(s.length+1),c=new Array(s.length),l=0;l<s.length;)u[l]=s[l],c[l]=a[s[l++]];return u[l]=i,Function.apply(null,u).apply(null,c)}return Function(i)()}for(var h=new Array(arguments.length-1),p=0;p<h.length;)h[p]=arguments[++p];if(p=0,a=a.replace(/%([%dfijs])/g,function(g,y){var O=h[p++];switch(y){case"d":case"f":return String(Number(O));case"i":return String(Math.floor(O));case"j":return JSON.stringify(O);case"s":return String(O)}return"%"}),p!==h.length)throw Error("parameter count mismatch");return r.push(a),n}function o(a){return"function "+(a||e||"")+"("+(t&&t.join(",")||"")+`){
  `+r.join(`
  `)+`
}`}return n.toString=o,n}ws.verbose=!1});var l0=m((d4,f0)=>{f();"use strict";f0.exports=Tn;var $D=gs(),YD=ys(),Fs=YD("fs");function Tn(t,e,r){return typeof e=="function"?(r=e,e={}):e||(e={}),r?!e.xhr&&Fs&&Fs.readFile?Fs.readFile(t,function(o,a){return o&&typeof XMLHttpRequest!="undefined"?Tn.xhr(t,e,r):o?r(o):r(null,e.binary?a:a.toString("utf8"))}):Tn.xhr(t,e,r):$D(Tn,this,t,e)}Tn.xhr=function(e,r,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===4){if(o.status!==0&&o.status!==200)return n(Error("status "+o.status));if(r.binary){var i=o.response;if(!i){i=[];for(var s=0;s<o.responseText.length;++s)i.push(o.responseText.charCodeAt(s)&255)}return n(null,typeof Uint8Array!="undefined"?new Uint8Array(i):i)}return n(null,o.responseText)}},r.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",e),o.send()}});var d0=m(p0=>{f();"use strict";var Es=p0,h0=Es.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},Ps=Es.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var r=e.split("/"),n=h0(e),o="";n&&(o=r.shift()+"/");for(var a=0;a<r.length;)r[a]===".."?a>0&&r[a-1]!==".."?r.splice(--a,2):n?r.splice(a,1):++a:r[a]==="."?r.splice(a,1):++a;return o+r.join("/")};Es.resolve=function(e,r,n){return n||(r=Ps(r)),h0(r)?r:(n||(e=Ps(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?Ps(e+"/"+r):r)}});var Mr=m(m0=>{f();"use strict";var Sn=m0,WD=Te(),XD=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function An(t,e){var r=0,n={};for(e|=0;r<t.length;)n[XD[r+e]]=t[r++];return n}Sn.basic=An([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Sn.defaults=An([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",WD.emptyArray,null]);Sn.long=An([0,0,0,1,1],7);Sn.mapKey=An([0,0,0,5,5,0,0,0,1,1,0,2],2);Sn.packed=An([1,5,0,0,0,5,5,0,0,0,1,1,0])});var ur=m((y4,v0)=>{f();"use strict";v0.exports=Ze;var qo=cr();((Ze.prototype=Object.create(qo.prototype)).constructor=Ze).className="Field";var g0=_t(),y0=Mr(),de=Te(),Ms,ZD=/^required|optional|repeated$/;Ze.fromJSON=function(e,r){return new Ze(e,r.id,r.type,r.rule,r.extend,r.options,r.comment)};function Ze(t,e,r,n,o,a,i){if(de.isObject(n)?(i=o,a=n,n=o=void 0):de.isObject(o)&&(i=a,a=o,o=void 0),qo.call(this,t,a),!de.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!de.isString(r))throw TypeError("type must be a string");if(n!==void 0&&!ZD.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(o!==void 0&&!de.isString(o))throw TypeError("extend must be a string");n==="proto3_optional"&&(n="optional"),this.rule=n&&n!=="optional"?n:void 0,this.type=r,this.id=e,this.extend=o||void 0,this.required=n==="required",this.optional=!this.required,this.repeated=n==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=de.Long?y0.long[r]!==void 0:!1,this.bytes=r==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=i}Object.defineProperty(Ze.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}});Ze.prototype.setOption=function(e,r,n){return e==="packed"&&(this._packed=null),qo.prototype.setOption.call(this,e,r,n)};Ze.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return de.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};Ze.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=y0.defaults[this.type])===void 0&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Ms?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof g0&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof g0))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=de.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;de.base64.test(this.typeDefault)?de.base64.decode(this.typeDefault,e=de.newBuffer(de.base64.length(this.typeDefault)),0):de.utf8.write(this.typeDefault,e=de.newBuffer(de.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=de.emptyObject:this.repeated?this.defaultValue=de.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Ms&&(this.parent.ctor.prototype[this.name]=this.defaultValue),qo.prototype.resolve.call(this)};Ze.d=function(e,r,n,o){return typeof r=="function"?r=de.decorateType(r).name:r&&typeof r=="object"&&(r=de.decorateEnum(r).name),function(i,s){de.decorateType(i.constructor).add(new Ze(s,e,r,n,{default:o}))}};Ze._configure=function(e){Ms=e}});var Nn=m((v4,b0)=>{f();"use strict";b0.exports=Qe;var zo=cr();((Qe.prototype=Object.create(zo.prototype)).constructor=Qe).className="OneOf";var O0=ur(),Lo=Te();function Qe(t,e,r,n){if(Array.isArray(e)||(r=e,e=void 0),zo.call(this,t,r),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n}Qe.fromJSON=function(e,r){return new Qe(e,r.oneof,r.options,r.comment)};Qe.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return Lo.toObject(["options",this.options,"oneof",this.oneof,"comment",r?this.comment:void 0])};function _0(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}Qe.prototype.add=function(e){if(!(e instanceof O0))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,_0(this),this};Qe.prototype.remove=function(e){if(!(e instanceof O0))throw TypeError("field must be a Field");var r=this.fieldsArray.indexOf(e);if(r<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(r,1),r=this.oneof.indexOf(e.name),r>-1&&this.oneof.splice(r,1),e.partOf=null,this};Qe.prototype.onAdd=function(e){zo.prototype.onAdd.call(this,e);for(var r=this,n=0;n<this.oneof.length;++n){var o=e.get(this.oneof[n]);o&&!o.partOf&&(o.partOf=r,r.fieldsArray.push(o))}_0(this)};Qe.prototype.onRemove=function(e){for(var r=0,n;r<this.fieldsArray.length;++r)(n=this.fieldsArray[r]).parent&&n.parent.remove(n);zo.prototype.onRemove.call(this,e)};Qe.d=function(){for(var e=new Array(arguments.length),r=0;r<arguments.length;)e[r]=arguments[r++];return function(o,a){Lo.decorateType(o.constructor).add(new Qe(a,e)),Object.defineProperty(o,a,{get:Lo.oneOfGetter(e),set:Lo.oneOfSetter(e)})}}});var qr=m((O4,S0)=>{f();"use strict";S0.exports=j;var Ds=cr();((j.prototype=Object.create(Ds.prototype)).constructor=j).className="Namespace";var x0=ur(),QD=Nn(),Ko=Te(),Dr,In,Br;j.fromJSON=function(e,r){return new j(e,r.options).addJSON(r.nested)};function k0(t,e){if(!!(t&&t.length)){for(var r={},n=0;n<t.length;++n)r[t[n].name]=t[n].toJSON(e);return r}}j.arrayToJSON=k0;j.isReservedId=function(e,r){if(e){for(var n=0;n<e.length;++n)if(typeof e[n]!="string"&&e[n][0]<=r&&e[n][1]>r)return!0}return!1};j.isReservedName=function(e,r){if(e){for(var n=0;n<e.length;++n)if(e[n]===r)return!0}return!1};function j(t,e){Ds.call(this,t,e),this.nested=void 0,this._nestedArray=null}function T0(t){return t._nestedArray=null,t}Object.defineProperty(j.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=Ko.toArray(this.nested))}});j.prototype.toJSON=function(e){return Ko.toObject(["options",this.options,"nested",k0(this.nestedArray,e)])};j.prototype.addJSON=function(e){var r=this;if(e)for(var n=Object.keys(e),o=0,a;o<n.length;++o)a=e[n[o]],r.add((a.fields!==void 0?Dr.fromJSON:a.values!==void 0?Br.fromJSON:a.methods!==void 0?In.fromJSON:a.id!==void 0?x0.fromJSON:j.fromJSON)(n[o],a));return this};j.prototype.get=function(e){return this.nested&&this.nested[e]||null};j.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof Br)return this.nested[e].values;throw Error("no such enum: "+e)};j.prototype.add=function(e){if(!(e instanceof x0&&e.extend!==void 0||e instanceof Dr||e instanceof Br||e instanceof In||e instanceof j||e instanceof QD))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var r=this.get(e.name);if(r)if(r instanceof j&&e instanceof j&&!(r instanceof Dr||r instanceof In)){for(var n=r.nestedArray,o=0;o<n.length;++o)e.add(n[o]);this.remove(r),this.nested||(this.nested={}),e.setOptions(r.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}return this.nested[e.name]=e,e.onAdd(this),T0(this)};j.prototype.remove=function(e){if(!(e instanceof Ds))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),T0(this)};j.prototype.define=function(e,r){if(Ko.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var n=this;e.length>0;){var o=e.shift();if(n.nested&&n.nested[o]){if(n=n.nested[o],!(n instanceof j))throw Error("path conflicts with non-namespace objects")}else n.add(n=new j(o))}return r&&n.addJSON(r),n};j.prototype.resolveAll=function(){for(var e=this.nestedArray,r=0;r<e.length;)e[r]instanceof j?e[r++].resolveAll():e[r++].resolve();return this.resolve()};j.prototype.lookup=function(e,r,n){if(typeof r=="boolean"?(n=r,r=void 0):r&&!Array.isArray(r)&&(r=[r]),Ko.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),r);var o=this.get(e[0]);if(o){if(e.length===1){if(!r||r.indexOf(o.constructor)>-1)return o}else if(o instanceof j&&(o=o.lookup(e.slice(1),r,!0)))return o}else for(var a=0;a<this.nestedArray.length;++a)if(this._nestedArray[a]instanceof j&&(o=this._nestedArray[a].lookup(e,r,!0)))return o;return this.parent===null||n?null:this.parent.lookup(e,r)};j.prototype.lookupType=function(e){var r=this.lookup(e,[Dr]);if(!r)throw Error("no such type: "+e);return r};j.prototype.lookupEnum=function(e){var r=this.lookup(e,[Br]);if(!r)throw Error("no such Enum '"+e+"' in "+this);return r};j.prototype.lookupTypeOrEnum=function(e){var r=this.lookup(e,[Dr,Br]);if(!r)throw Error("no such Type or Enum '"+e+"' in "+this);return r};j.prototype.lookupService=function(e){var r=this.lookup(e,[In]);if(!r)throw Error("no such Service '"+e+"' in "+this);return r};j._configure=function(t,e,r){Dr=t,In=e,Br=r}});var qs=m((_4,A0)=>{f();"use strict";A0.exports=Ct;var Bs=ur();((Ct.prototype=Object.create(Bs.prototype)).constructor=Ct).className="MapField";var eB=Mr(),Rn=Te();function Ct(t,e,r,n,o,a){if(Bs.call(this,t,e,n,void 0,void 0,o,a),!Rn.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}Ct.fromJSON=function(e,r){return new Ct(e,r.id,r.keyType,r.type,r.options,r.comment)};Ct.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return Rn.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};Ct.prototype.resolve=function(){if(this.resolved)return this;if(eB.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return Bs.prototype.resolve.call(this)};Ct.d=function(e,r,n){return typeof n=="function"?n=Rn.decorateType(n).name:n&&typeof n=="object"&&(n=Rn.decorateEnum(n).name),function(a,i){Rn.decorateType(a.constructor).add(new Ct(i,e,r,n))}}});var Ls=m((b4,N0)=>{f();"use strict";N0.exports=fr;var zs=cr();((fr.prototype=Object.create(zs.prototype)).constructor=fr).className="Method";var zr=Te();function fr(t,e,r,n,o,a,i,s,u){if(zr.isObject(o)?(i=o,o=a=void 0):zr.isObject(a)&&(i=a,a=void 0),!(e===void 0||zr.isString(e)))throw TypeError("type must be a string");if(!zr.isString(r))throw TypeError("requestType must be a string");if(!zr.isString(n))throw TypeError("responseType must be a string");zs.call(this,t,i),this.type=e||"rpc",this.requestType=r,this.requestStream=o?!0:void 0,this.responseType=n,this.responseStream=a?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=s,this.parsedOptions=u}fr.fromJSON=function(e,r){return new fr(e,r.type,r.requestType,r.responseType,r.requestStream,r.responseStream,r.options,r.comment,r.parsedOptions)};fr.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return zr.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",r?this.comment:void 0,"parsedOptions",this.parsedOptions])};fr.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),zs.prototype.resolve.call(this))}});var js=m((x4,R0)=>{f();"use strict";R0.exports=et;var Ht=qr();((et.prototype=Object.create(Ht.prototype)).constructor=et).className="Service";var Ks=Ls(),Cn=Te(),tB=Rs();function et(t,e){Ht.call(this,t,e),this.methods={},this._methodsArray=null}et.fromJSON=function(e,r){var n=new et(e,r.options);if(r.methods)for(var o=Object.keys(r.methods),a=0;a<o.length;++a)n.add(Ks.fromJSON(o[a],r.methods[o[a]]));return r.nested&&n.addJSON(r.nested),n.comment=r.comment,n};et.prototype.toJSON=function(e){var r=Ht.prototype.toJSON.call(this,e),n=e?Boolean(e.keepComments):!1;return Cn.toObject(["options",r&&r.options||void 0,"methods",Ht.arrayToJSON(this.methodsArray,e)||{},"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};Object.defineProperty(et.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=Cn.toArray(this.methods))}});function I0(t){return t._methodsArray=null,t}et.prototype.get=function(e){return this.methods[e]||Ht.prototype.get.call(this,e)};et.prototype.resolveAll=function(){for(var e=this.methodsArray,r=0;r<e.length;++r)e[r].resolve();return Ht.prototype.resolve.call(this)};et.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof Ks?(this.methods[e.name]=e,e.parent=this,I0(this)):Ht.prototype.add.call(this,e)};et.prototype.remove=function(e){if(e instanceof Ks){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,I0(this)}return Ht.prototype.remove.call(this,e)};et.prototype.create=function(e,r,n){for(var o=new tB.Service(e,r,n),a=0,i;a<this.methodsArray.length;++a){var s=Cn.lcFirst((i=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");o[s]=Cn.codegen(["r","c"],Cn.isReserved(s)?s+"_":s)("return this.rpcCall(m,q,s,r,c)")({m:i,q:i.resolvedRequestType.ctor,s:i.resolvedResponseType.ctor})}return o}});var jo=m((k4,C0)=>{f();"use strict";C0.exports=bt;var rB=yt();function bt(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)this[e[r]]=t[e[r]]}bt.create=function(e){return this.$type.create(e)};bt.encode=function(e,r){return this.$type.encode(e,r)};bt.encodeDelimited=function(e,r){return this.$type.encodeDelimited(e,r)};bt.decode=function(e){return this.$type.decode(e)};bt.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};bt.verify=function(e){return this.$type.verify(e)};bt.fromObject=function(e){return this.$type.fromObject(e)};bt.toObject=function(e,r){return this.$type.toObject(e,r)};bt.prototype.toJSON=function(){return this.$type.toObject(this,rB.toJSONOptions)}});var Vs=m((T4,F0)=>{f();"use strict";F0.exports=aB;var nB=_t(),wt=Mr(),w0=Te();function oB(t){return"missing required '"+t.name+"'"}function aB(t){var e=w0.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(s){return s.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var r=0;r<t.fieldsArray.length;++r){var n=t._fieldsArray[r].resolve(),o=n.resolvedType instanceof nB?"int32":n.type,a="m"+w0.safeProp(n.name);e("case %i:",n.id),n.map?(e("if(%s===util.emptyObject)",a)("%s={}",a)("var c2 = r.uint32()+r.pos"),wt.defaults[n.keyType]!==void 0?e("k=%j",wt.defaults[n.keyType]):e("k=null"),wt.defaults[o]!==void 0?e("value=%j",wt.defaults[o]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),wt.basic[o]===void 0?e("value=types[%i].decode(r,r.uint32())",r):e("value=r.%s()",o),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),wt.long[n.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',a):e("%s[k]=value",a)):n.repeated?(e("if(!(%s&&%s.length))",a,a)("%s=[]",a),wt.packed[o]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",a,o)("}else"),wt.basic[o]===void 0?e(n.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",a,r):e("%s.push(r.%s())",a,o)):wt.basic[o]===void 0?e(n.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",a,r):e("%s=r.%s()",a,o),e("break")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<t._fieldsArray.length;++r){var i=t._fieldsArray[r];i.required&&e("if(!m.hasOwnProperty(%j))",i.name)("throw util.ProtocolError(%j,{instance:m})",oB(i))}return e("return m")}});var Hs=m((S4,E0)=>{f();"use strict";E0.exports=uB;var iB=_t(),Js=Te();function tt(t,e){return t.name+": "+e+(t.repeated&&e!=="array"?"[]":t.map&&e!=="object"?"{k:"+t.keyType+"}":"")+" expected"}function Us(t,e,r,n){if(e.resolvedType)if(e.resolvedType instanceof iB){t("switch(%s){",n)("default:")("return%j",tt(e,"enum value"));for(var o=Object.keys(e.resolvedType.values),a=0;a<o.length;++a)t("case %i:",e.resolvedType.values[o[a]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",r,n)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",tt(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",tt(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",tt(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",tt(e,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",tt(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",tt(e,"buffer"));break}return t}function sB(t,e,r){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",r)("return%j",tt(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",r)("return%j",tt(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",r)("return%j",tt(e,"boolean key"));break}return t}function uB(t){var e=Js.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=t.oneofsArray,n={};r.length&&e("var p={}");for(var o=0;o<t.fieldsArray.length;++o){var a=t._fieldsArray[o].resolve(),i="m"+Js.safeProp(a.name);if(a.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",i,a.name),a.map)e("if(!util.isObject(%s))",i)("return%j",tt(a,"object"))("var k=Object.keys(%s)",i)("for(var i=0;i<k.length;++i){"),sB(e,a,"k[i]"),Us(e,a,o,i+"[k[i]]")("}");else if(a.repeated)e("if(!Array.isArray(%s))",i)("return%j",tt(a,"array"))("for(var i=0;i<%s.length;++i){",i),Us(e,a,o,i+"[i]")("}");else{if(a.partOf){var s=Js.safeProp(a.partOf.name);n[a.partOf.name]===1&&e("if(p%s===1)",s)("return%j",a.partOf.name+": multiple values"),n[a.partOf.name]=1,e("p%s=1",s)}Us(e,a,o,i)}a.optional&&e("}")}return e("return null")}});var Ys=m(M0=>{f();"use strict";var P0=M0,wn=_t(),xt=Te();function Gs(t,e,r,n){if(e.resolvedType)if(e.resolvedType instanceof wn){t("switch(d%s){",n);for(var o=e.resolvedType.values,a=Object.keys(o),i=0;i<a.length;++i)e.repeated&&o[a[i]]===e.typeDefault&&t("default:"),t("case%j:",a[i])("case %i:",o[a[i]])("m%s=%j",n,o[a[i]])("break");t("}")}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var s=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",n,n);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,s)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,s?"true":"");break;case"bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":t("m%s=String(d%s)",n,n);break;case"bool":t("m%s=Boolean(d%s)",n,n);break}}return t}P0.fromObject=function(e){var r=e.fieldsArray,n=xt.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!r.length)return n("return new this.ctor");n("var m=new this.ctor");for(var o=0;o<r.length;++o){var a=r[o].resolve(),i=xt.safeProp(a.name);a.map?(n("if(d%s){",i)('if(typeof d%s!=="object")',i)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",i)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",i),Gs(n,a,o,i+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",i)("if(!Array.isArray(d%s))",i)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",i)("for(var i=0;i<d%s.length;++i){",i),Gs(n,a,o,i+"[i]")("}")("}")):(a.resolvedType instanceof wn||n("if(d%s!=null){",i),Gs(n,a,o,i),a.resolvedType instanceof wn||n("}"))}return n("return m")};function $s(t,e,r,n){if(e.resolvedType)e.resolvedType instanceof wn?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):t("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var o=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,o?"true":"",n);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n);break}}return t}P0.toObject=function(e){var r=e.fieldsArray.slice().sort(xt.compareFieldsById);if(!r.length)return xt.codegen()("return {}");for(var n=xt.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),o=[],a=[],i=[],s=0;s<r.length;++s)r[s].partOf||(r[s].resolve().repeated?o:r[s].map?a:i).push(r[s]);if(o.length){for(n("if(o.arrays||o.defaults){"),s=0;s<o.length;++s)n("d%s=[]",xt.safeProp(o[s].name));n("}")}if(a.length){for(n("if(o.objects||o.defaults){"),s=0;s<a.length;++s)n("d%s={}",xt.safeProp(a[s].name));n("}")}if(i.length){for(n("if(o.defaults){"),s=0;s<i.length;++s){var u=i[s],c=xt.safeProp(u.name);if(u.resolvedType instanceof wn)n("d%s=o.enums===String?%j:%j",c,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%i",c,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var l="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",c,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",c,l)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",c,c)("}")}else n("d%s=%j",c,u.typeDefault)}n("}")}var h=!1;for(s=0;s<r.length;++s){var u=r[s],p=e._fieldsArray.indexOf(u),c=xt.safeProp(u.name);u.map?(h||(h=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",c,c)("d%s={}",c)("for(var j=0;j<ks2.length;++j){"),$s(n,u,p,c+"[ks2[j]]")("}")):u.repeated?(n("if(m%s&&m%s.length){",c,c)("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),$s(n,u,p,c+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",c,u.name),$s(n,u,p,c),u.partOf&&n("if(o.oneofs)")("d%s=%j",xt.safeProp(u.partOf.name),u.name)),n("}")}return n("return d")}});var Ws=m(D0=>{f();"use strict";var cB=D0,fB=jo();cB[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),r=this.lookup(e);if(r){var n=t["@type"].charAt(0)==="."?t["@type"].substr(1):t["@type"];return n.indexOf("/")===-1&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var r="type.googleapis.com/",n="",o="";if(e&&e.json&&t.type_url&&t.value){o=t.type_url.substring(t.type_url.lastIndexOf("/")+1),n=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var a=this.lookup(o);a&&(t=a.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof fB){var i=t.$type.toObject(t,e),s=t.$type.fullName[0]==="."?t.$type.fullName.substr(1):t.$type.fullName;return n===""&&(n=r),o=n+s,i["@type"]=o,i}return this.toObject(t,e)}}});var eu=m((I4,q0)=>{f();"use strict";q0.exports=X;var lt=qr();((X.prototype=Object.create(lt.prototype)).constructor=X).className="Type";var lB=_t(),Xs=Nn(),Vo=ur(),hB=qs(),pB=js(),Zs=jo(),Qs=Bo(),dB=Mo(),Ne=Te(),mB=tu(),gB=Vs(),yB=Hs(),B0=Ys(),vB=Ws();function X(t,e){lt.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(X.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var r=this.fields[t[e]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=Ne.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=Ne.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=X.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof Zs||((t.prototype=new Zs).constructor=t,Ne.merge(t.prototype,e)),t.$type=t.prototype.$type=this,Ne.merge(t,Zs,!0),this._ctor=t;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:Ne.oneOfGetter(this._oneofsArray[r].oneof),set:Ne.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(t.prototype,n)}}});X.generateConstructor=function(e){for(var r=Ne.codegen(["p"],e.name),n=0,o;n<e.fieldsArray.length;++n)(o=e._fieldsArray[n]).map?r("this%s={}",Ne.safeProp(o.name)):o.repeated&&r("this%s=[]",Ne.safeProp(o.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function Jo(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}X.fromJSON=function(e,r){var n=new X(e,r.options);n.extensions=r.extensions,n.reserved=r.reserved;for(var o=Object.keys(r.fields),a=0;a<o.length;++a)n.add((typeof r.fields[o[a]].keyType!="undefined"?hB.fromJSON:Vo.fromJSON)(o[a],r.fields[o[a]]));if(r.oneofs)for(o=Object.keys(r.oneofs),a=0;a<o.length;++a)n.add(Xs.fromJSON(o[a],r.oneofs[o[a]]));if(r.nested)for(o=Object.keys(r.nested),a=0;a<o.length;++a){var i=r.nested[o[a]];n.add((i.id!==void 0?Vo.fromJSON:i.fields!==void 0?X.fromJSON:i.values!==void 0?lB.fromJSON:i.methods!==void 0?pB.fromJSON:lt.fromJSON)(o[a],i))}return r.extensions&&r.extensions.length&&(n.extensions=r.extensions),r.reserved&&r.reserved.length&&(n.reserved=r.reserved),r.group&&(n.group=!0),r.comment&&(n.comment=r.comment),n};X.prototype.toJSON=function(e){var r=lt.prototype.toJSON.call(this,e),n=e?Boolean(e.keepComments):!1;return Ne.toObject(["options",r&&r.options||void 0,"oneofs",lt.arrayToJSON(this.oneofsArray,e),"fields",lt.arrayToJSON(this.fieldsArray.filter(function(o){return!o.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};X.prototype.resolveAll=function(){for(var e=this.fieldsArray,r=0;r<e.length;)e[r++].resolve();var n=this.oneofsArray;for(r=0;r<n.length;)n[r++].resolve();return lt.prototype.resolveAll.call(this)};X.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};X.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof Vo&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),Jo(this)}return e instanceof Xs?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),Jo(this)):lt.prototype.add.call(this,e)};X.prototype.remove=function(e){if(e instanceof Vo&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),Jo(this)}if(e instanceof Xs){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),Jo(this)}return lt.prototype.remove.call(this,e)};X.prototype.isReservedId=function(e){return lt.isReservedId(this.reserved,e)};X.prototype.isReservedName=function(e){return lt.isReservedName(this.reserved,e)};X.prototype.create=function(e){return new this.ctor(e)};X.prototype.setup=function(){for(var e=this.fullName,r=[],n=0;n<this.fieldsArray.length;++n)r.push(this._fieldsArray[n].resolve().resolvedType);this.encode=mB(this)({Writer:dB,types:r,util:Ne}),this.decode=gB(this)({Reader:Qs,types:r,util:Ne}),this.verify=yB(this)({types:r,util:Ne}),this.fromObject=B0.fromObject(this)({types:r,util:Ne}),this.toObject=B0.toObject(this)({types:r,util:Ne});var o=vB[e];if(o){var a=Object.create(this);a.fromObject=this.fromObject,this.fromObject=o.fromObject.bind(a),a.toObject=this.toObject,this.toObject=o.toObject.bind(a)}return this};X.prototype.encode=function(e,r){return this.setup().encode(e,r)};X.prototype.encodeDelimited=function(e,r){return this.encode(e,r&&r.len?r.fork():r).ldelim()};X.prototype.decode=function(e,r){return this.setup().decode(e,r)};X.prototype.decodeDelimited=function(e){return e instanceof Qs||(e=Qs.create(e)),this.decode(e,e.uint32())};X.prototype.verify=function(e){return this.setup().verify(e)};X.prototype.fromObject=function(e){return this.setup().fromObject(e)};X.prototype.toObject=function(e,r){return this.setup().toObject(e,r)};X.d=function(e){return function(n){Ne.decorateType(n,e)}}});var ou=m((R4,V0)=>{f();"use strict";V0.exports=Le;var Uo=qr();((Le.prototype=Object.create(Uo.prototype)).constructor=Le).className="Root";var ru=ur(),z0=_t(),OB=Nn(),Gt=Te(),L0,nu,Fn;function Le(t){Uo.call(this,"",t),this.deferred=[],this.files=[]}Le.fromJSON=function(e,r){return r||(r=new Le),e.options&&r.setOptions(e.options),r.addJSON(e.nested)};Le.prototype.resolvePath=Gt.path.resolve;Le.prototype.fetch=Gt.fetch;function K0(){}Le.prototype.load=function t(e,r,n){typeof r=="function"&&(n=r,r=void 0);var o=this;if(!n)return Gt.asPromise(t,o,e,r);var a=n===K0;function i(d,g){if(!!n){var y=n;if(n=null,a)throw d;y(d,g)}}function s(d){var g=d.lastIndexOf("google/protobuf/");if(g>-1){var y=d.substring(g);if(y in Fn)return y}return null}function u(d,g){try{if(Gt.isString(g)&&g.charAt(0)==="{"&&(g=JSON.parse(g)),!Gt.isString(g))o.setOptions(g.options).addJSON(g.nested);else{nu.filename=d;var y=nu(g,o,r),O,T=0;if(y.imports)for(;T<y.imports.length;++T)(O=s(y.imports[T])||o.resolvePath(d,y.imports[T]))&&c(O);if(y.weakImports)for(T=0;T<y.weakImports.length;++T)(O=s(y.weakImports[T])||o.resolvePath(d,y.weakImports[T]))&&c(O,!0)}}catch(A){i(A)}!a&&!l&&i(null,o)}function c(d,g){if(!(o.files.indexOf(d)>-1)){if(o.files.push(d),d in Fn){a?u(d,Fn[d]):(++l,setTimeout(function(){--l,u(d,Fn[d])}));return}if(a){var y;try{y=Gt.fs.readFileSync(d).toString("utf8")}catch(O){g||i(O);return}u(d,y)}else++l,o.fetch(d,function(O,T){if(--l,!!n){if(O){g?l||i(null,o):i(O);return}u(d,T)}})}}var l=0;Gt.isString(e)&&(e=[e]);for(var h=0,p;h<e.length;++h)(p=o.resolvePath("",e[h]))&&c(p);if(a)return o;l||i(null,o)};Le.prototype.loadSync=function(e,r){if(!Gt.isNode)throw Error("not supported");return this.load(e,r,K0)};Le.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return Uo.prototype.resolveAll.call(this)};var Ho=/^[A-Z]/;function j0(t,e){var r=e.parent.lookup(e.extend);if(r){var n=new ru(e.fullName,e.id,e.type,e.rule,void 0,e.options);return n.declaringField=e,e.extensionField=n,r.add(n),!0}return!1}Le.prototype._handleAdd=function(e){if(e instanceof ru)e.extend!==void 0&&!e.extensionField&&(j0(this,e)||this.deferred.push(e));else if(e instanceof z0)Ho.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof OB)){if(e instanceof L0)for(var r=0;r<this.deferred.length;)j0(this,this.deferred[r])?this.deferred.splice(r,1):++r;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);Ho.test(e.name)&&(e.parent[e.name]=e)}};Le.prototype._handleRemove=function(e){if(e instanceof ru){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var r=this.deferred.indexOf(e);r>-1&&this.deferred.splice(r,1)}}else if(e instanceof z0)Ho.test(e.name)&&delete e.parent[e.name];else if(e instanceof Uo){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);Ho.test(e.name)&&delete e.parent[e.name]}};Le._configure=function(t,e,r){L0=t,nu=e,Fn=r}});var Te=m((C4,U0)=>{f();"use strict";var le=U0.exports=yt(),J0=Cs(),au,iu;le.codegen=c0();le.fetch=l0();le.path=d0();le.fs=le.inquire("fs");le.toArray=function(e){if(e){for(var r=Object.keys(e),n=new Array(r.length),o=0;o<r.length;)n[o]=e[r[o++]];return n}return[]};le.toObject=function(e){for(var r={},n=0;n<e.length;){var o=e[n++],a=e[n++];a!==void 0&&(r[o]=a)}return r};var _B=/\\/g,bB=/"/g;le.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};le.safeProp=function(e){return!/^[$\w_]+$/.test(e)||le.isReserved(e)?'["'+e.replace(_B,"\\\\").replace(bB,'\\"')+'"]':"."+e};le.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var xB=/_([a-z])/g;le.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(xB,function(r,n){return n.toUpperCase()})};le.compareFieldsById=function(e,r){return e.id-r.id};le.decorateType=function(e,r){if(e.$type)return r&&e.$type.name!==r&&(le.decorateRoot.remove(e.$type),e.$type.name=r,le.decorateRoot.add(e.$type)),e.$type;au||(au=eu());var n=new au(r||e.name);return le.decorateRoot.add(n),n.ctor=e,Object.defineProperty(e,"$type",{value:n,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:n,enumerable:!1}),n};var kB=0;le.decorateEnum=function(e){if(e.$type)return e.$type;iu||(iu=_t());var r=new iu("Enum"+kB++,e);return le.decorateRoot.add(r),Object.defineProperty(e,"$type",{value:r,enumerable:!1}),r};le.setProperty=function(e,r,n){function o(a,i,s){var u=i.shift();if(i.length>0)a[u]=o(a[u]||{},i,s);else{var c=a[u];c&&(s=[].concat(c).concat(s)),a[u]=s}return a}if(typeof e!="object")throw TypeError("dst must be an object");if(!r)throw TypeError("path must be specified");return r=r.split("."),o(e,r,n)};Object.defineProperty(le,"decorateRoot",{get:function(){return J0.decorated||(J0.decorated=new(ou()))}})});var cr=m((w4,H0)=>{f();"use strict";H0.exports=Ke;Ke.className="ReflectionObject";var Go=Te(),$o;function Ke(t,e){if(!Go.isString(t))throw TypeError("name must be a string");if(e&&!Go.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(Ke.prototype,{root:{get:function(){for(var t=this;t.parent!==null;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}});Ke.prototype.toJSON=function(){throw Error()};Ke.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var r=e.root;r instanceof $o&&r._handleAdd(this)};Ke.prototype.onRemove=function(e){var r=e.root;r instanceof $o&&r._handleRemove(this),this.parent=null,this.resolved=!1};Ke.prototype.resolve=function(){return this.resolved?this:(this.root instanceof $o&&(this.resolved=!0),this)};Ke.prototype.getOption=function(e){if(this.options)return this.options[e]};Ke.prototype.setOption=function(e,r,n){return(!n||!this.options||this.options[e]===void 0)&&((this.options||(this.options={}))[e]=r),this};Ke.prototype.setParsedOption=function(e,r,n){this.parsedOptions||(this.parsedOptions=[]);var o=this.parsedOptions;if(n){var a=o.find(function(u){return Object.prototype.hasOwnProperty.call(u,e)});if(a){var i=a[e];Go.setProperty(i,n,r)}else a={},a[e]=Go.setProperty({},n,r),o.push(a)}else{var s={};s[e]=r,o.push(s)}return this};Ke.prototype.setOptions=function(e,r){if(e)for(var n=Object.keys(e),o=0;o<n.length;++o)this.setOption(n[o],e[n[o]],r);return this};Ke.prototype.toString=function(){var e=this.constructor.className,r=this.fullName;return r.length?e+" "+r:e};Ke._configure=function(t){$o=t}});var _t=m((F4,Y0)=>{f();"use strict";Y0.exports=kt;var G0=cr();((kt.prototype=Object.create(G0.prototype)).constructor=kt).className="Enum";var $0=qr(),Yo=Te();function kt(t,e,r,n,o){if(G0.call(this,t,r),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=o||{},this.reserved=void 0,e)for(var a=Object.keys(e),i=0;i<a.length;++i)typeof e[a[i]]=="number"&&(this.valuesById[this.values[a[i]]=e[a[i]]]=a[i])}kt.fromJSON=function(e,r){var n=new kt(e,r.values,r.options,r.comment,r.comments);return n.reserved=r.reserved,n};kt.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return Yo.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",r?this.comment:void 0,"comments",r?this.comments:void 0])};kt.prototype.add=function(e,r,n){if(!Yo.isString(e))throw TypeError("name must be a string");if(!Yo.isInteger(r))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(r))throw Error("id "+r+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[r]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+r+" in "+this);this.values[e]=r}else this.valuesById[this.values[e]=r]=e;return this.comments[e]=n||null,this};kt.prototype.remove=function(e){if(!Yo.isString(e))throw TypeError("name must be a string");var r=this.values[e];if(r==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[r],delete this.values[e],delete this.comments[e],this};kt.prototype.isReservedId=function(e){return $0.isReservedId(this.reserved,e)};kt.prototype.isReservedName=function(e){return $0.isReservedName(this.reserved,e)}});var tu=m((E4,X0)=>{f();"use strict";X0.exports=SB;var TB=_t(),su=Mr(),uu=Te();function W0(t,e,r,n){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(e.id<<3|2)>>>0)}function SB(t){for(var e=uu.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),r,n,o=t.fieldsArray.slice().sort(uu.compareFieldsById),r=0;r<o.length;++r){var a=o[r].resolve(),i=t._fieldsArray.indexOf(a),s=a.resolvedType instanceof TB?"int32":a.type,u=su.basic[s];n="m"+uu.safeProp(a.name),a.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",n,a.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",n)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(a.id<<3|2)>>>0,8|su.mapKey[a.keyType],a.keyType),u===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",i,n):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|u,s,n),e("}")("}")):a.repeated?(e("if(%s!=null&&%s.length){",n,n),a.packed&&su.packed[s]!==void 0?e("w.uint32(%i).fork()",(a.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",n)("w.%s(%s[i])",s,n)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",n),u===void 0?W0(e,a,i,n+"[i]"):e("w.uint32(%i).%s(%s[i])",(a.id<<3|u)>>>0,s,n)),e("}")):(a.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",n,a.name),u===void 0?W0(e,a,i,n):e("w.uint32(%i).%s(%s)",(a.id<<3|u)>>>0,s,n))}return e("return w")}});var Q0=m((P4,Z0)=>{f();"use strict";var q=Z0.exports=s0();q.build="light";function AB(t,e,r){return typeof e=="function"?(r=e,e=new q.Root):e||(e=new q.Root),e.load(t,r)}q.load=AB;function NB(t,e){return e||(e=new q.Root),e.loadSync(t)}q.loadSync=NB;q.encoder=tu();q.decoder=Vs();q.verifier=Hs();q.converter=Ys();q.ReflectionObject=cr();q.Namespace=qr();q.Root=ou();q.Enum=_t();q.Type=eu();q.Field=ur();q.OneOf=Nn();q.MapField=qs();q.Service=js();q.Method=Ls();q.Message=jo();q.wrappers=Ws();q.types=Mr();q.util=Te();q.ReflectionObject._configure(q.Root);q.Namespace._configure(q.Type,q.Service,q.Enum);q.Root._configure(q.Type);q.Field._configure(q.Type)});var tk=m((M4,ek)=>{f();"use strict";ek.exports=Q0()});f();f();var Lr="delete",Z=5,Ve=1<<Z,Ie=Ve-1,D={};function ra(){return{value:!1}}function Je(t){t&&(t.value=!0)}function na(){}function lr(t){return t.size===void 0&&(t.size=t.__iterate(hu)),t.size}function Ft(t,e){if(typeof e!="number"){var r=e>>>0;if(""+r!==e||r===4294967295)return NaN;e=r}return e<0?lr(t)+e:e}function hu(){return!0}function En(t,e,r){return(t===0&&!du(t)||r!==void 0&&t<=-r)&&(e===void 0||r!==void 0&&e>=r)}function Kr(t,e){return pu(t,e,0)}function Pn(t,e){return pu(t,e,e)}function pu(t,e,r){return t===void 0?r:du(t)?e===1/0?e:Math.max(0,e+t)|0:e===void 0||e===t?t:Math.min(e,t)|0}function du(t){return t<0||t===0&&1/t==-1/0}var mu="@@__IMMUTABLE_ITERABLE__@@";function Ee(t){return Boolean(t&&t[mu])}var gu="@@__IMMUTABLE_KEYED__@@";function se(t){return Boolean(t&&t[gu])}var yu="@@__IMMUTABLE_INDEXED__@@";function Ue(t){return Boolean(t&&t[yu])}function Mn(t){return se(t)||Ue(t)}var ue=function(e){return Ee(e)?e:ot(e)},Be=function(t){function e(r){return se(r)?r:Nt(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ue),Et=function(t){function e(r){return Ue(r)?r:Ge(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ue),St=function(t){function e(r){return Ee(r)&&!Mn(r)?r:dr(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ue);ue.Keyed=Be;ue.Indexed=Et;ue.Set=St;var vu="@@__IMMUTABLE_SEQ__@@";function oa(t){return Boolean(t&&t[vu])}var Ou="@@__IMMUTABLE_RECORD__@@";function Dn(t){return Boolean(t&&t[Ou])}function At(t){return Ee(t)||Dn(t)}var hr="@@__IMMUTABLE_ORDERED__@@";function rt(t){return Boolean(t&&t[hr])}var jr=0,nt=1,He=2,aa=typeof Symbol=="function"&&Symbol.iterator,_u="@@iterator",Bn=aa||_u,J=function(e){this.next=e};J.prototype.toString=function(){return"[Iterator]"};J.KEYS=jr;J.VALUES=nt;J.ENTRIES=He;J.prototype.inspect=J.prototype.toSource=function(){return this.toString()};J.prototype[Bn]=function(){return this};function re(t,e,r,n){var o=t===0?e:t===1?r:[e,r];return n?n.value=o:n={value:o,done:!1},n}function Pe(){return{value:void 0,done:!0}}function ia(t){return!!xu(t)}function bu(t){return t&&typeof t.next=="function"}function sa(t){var e=xu(t);return e&&e.call(t)}function xu(t){var e=t&&(aa&&t[aa]||t[_u]);if(typeof e=="function")return e}var pr=Object.prototype.hasOwnProperty;function ku(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var ot=function(t){function e(r){return r==null?ca():At(r)?r.toSeq():hk(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(n,o){var a=this._cache;if(a){for(var i=a.length,s=0;s!==i;){var u=a[o?i-++s:s++];if(n(u[1],u[0],this)===!1)break}return s}return this.__iterateUncached(n,o)},e.prototype.__iterator=function(n,o){var a=this._cache;if(a){var i=a.length,s=0;return new J(function(){if(s===i)return Pe();var u=a[o?i-++s:s++];return re(n,u[0],u[1])})}return this.__iteratorUncached(n,o)},e}(ue),Nt=function(t){function e(r){return r==null?ca().toKeyedSeq():Ee(r)?se(r)?r.toSeq():r.fromEntrySeq():Dn(r)?r.toSeq():fa(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(ot),Ge=function(t){function e(r){return r==null?ca():Ee(r)?se(r)?r.entrySeq():r.toIndexedSeq():Dn(r)?r.toSeq().entrySeq():Au(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(ot),dr=function(t){function e(r){return(Ee(r)&&!Mn(r)?r:Ge(r)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(ot);ot.isSeq=oa;ot.Keyed=Nt;ot.Set=dr;ot.Indexed=Ge;ot.prototype[vu]=!0;var Pt=function(t){function e(r){this._array=r,this.size=r.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,o){return this.has(n)?this._array[Ft(this,n)]:o},e.prototype.__iterate=function(n,o){for(var a=this._array,i=a.length,s=0;s!==i;){var u=o?i-++s:s++;if(n(a[u],u,this)===!1)break}return s},e.prototype.__iterator=function(n,o){var a=this._array,i=a.length,s=0;return new J(function(){if(s===i)return Pe();var u=o?i-++s:s++;return re(n,u,a[u])})},e}(Ge),ua=function(t){function e(r){var n=Object.keys(r);this._object=r,this._keys=n,this.size=n.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,o){return o!==void 0&&!this.has(n)?o:this._object[n]},e.prototype.has=function(n){return pr.call(this._object,n)},e.prototype.__iterate=function(n,o){for(var a=this._object,i=this._keys,s=i.length,u=0;u!==s;){var c=i[o?s-++u:u++];if(n(a[c],c,this)===!1)break}return u},e.prototype.__iterator=function(n,o){var a=this._object,i=this._keys,s=i.length,u=0;return new J(function(){if(u===s)return Pe();var c=i[o?s-++u:u++];return re(n,c,a[c])})},e}(Nt);ua.prototype[hr]=!0;var Tu=function(t){function e(r){this._collection=r,this.size=r.length||r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,o){if(o)return this.cacheResult().__iterate(n,o);var a=this._collection,i=sa(a),s=0;if(bu(i))for(var u;!(u=i.next()).done&&n(u.value,s++,this)!==!1;);return s},e.prototype.__iteratorUncached=function(n,o){if(o)return this.cacheResult().__iterator(n,o);var a=this._collection,i=sa(a);if(!bu(i))return new J(Pe);var s=0;return new J(function(){var u=i.next();return u.done?u:re(n,s++,u.value)})},e}(Ge),Su;function ca(){return Su||(Su=new Pt([]))}function fa(t){var e=Array.isArray(t)?new Pt(t):ia(t)?new Tu(t):void 0;if(e)return e.fromEntrySeq();if(typeof t=="object")return new ua(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function Au(t){var e=Nu(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function hk(t){var e=Nu(t);if(e)return e;if(typeof t=="object")return new ua(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function Nu(t){return ku(t)?new Pt(t):ia(t)?new Tu(t):void 0}var Iu="@@__IMMUTABLE_MAP__@@";function la(t){return Boolean(t&&t[Iu])}function Ru(t){return la(t)&&rt(t)}function Cu(t){return Boolean(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function Re(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(Cu(t)&&Cu(e)&&t.equals(e))}var Vr=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,r){e|=0,r|=0;var n=e&65535,o=r&65535;return n*o+((e>>>16)*o+n*(r>>>16)<<16>>>0)|0};function qn(t){return t>>>1&1073741824|t&3221225471}var pk=Object.prototype.valueOf;function qe(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return dk(t);case"string":return t.length>vk?mk(t):ha(t);case"object":case"function":return t===null?1108378658:typeof t.hashCode=="function"?qn(t.hashCode(t)):(t.valueOf!==pk&&typeof t.valueOf=="function"&&(t=t.valueOf(t)),gk(t));case"undefined":return 1108378659;default:if(typeof t.toString=="function")return ha(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function dk(t){if(t!==t||t===1/0)return 0;var e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return qn(e)}function mk(t){var e=ya[t];return e===void 0&&(e=ha(t),ga===Ok&&(ga=0,ya={}),ga++,ya[t]=e),e}function ha(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return qn(e)}function gk(t){var e;if(pa&&(e=da.get(t),e!==void 0)||(e=t[Yt],e!==void 0)||!Fu&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Yt],e!==void 0||(e=yk(t),e!==void 0)))return e;if(e=++ma,ma&1073741824&&(ma=0),pa)da.set(t,e);else{if(wu!==void 0&&wu(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Fu)Object.defineProperty(t,Yt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Yt]=e;else if(t.nodeType!==void 0)t[Yt]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var wu=Object.isExtensible,Fu=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function yk(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var pa=typeof WeakMap=="function",da;pa&&(da=new WeakMap);var ma=0,Yt="__immutablehash__";typeof Symbol=="function"&&(Yt=Symbol(Yt));var vk=16,Ok=255,ga=0,ya={},zn=function(t){function e(r,n){this._iter=r,this._useKeys=n,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,o){return this._iter.get(n,o)},e.prototype.has=function(n){return this._iter.has(n)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var n=this,o=va(this,!0);return this._useKeys||(o.valueSeq=function(){return n._iter.toSeq().reverse()}),o},e.prototype.map=function(n,o){var a=this,i=Bu(this,n,o);return this._useKeys||(i.valueSeq=function(){return a._iter.toSeq().map(n,o)}),i},e.prototype.__iterate=function(n,o){var a=this;return this._iter.__iterate(function(i,s){return n(i,s,a)},o)},e.prototype.__iterator=function(n,o){return this._iter.__iterator(n,o)},e}(Nt);zn.prototype[hr]=!0;var Eu=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,o){var a=this,i=0;return o&&lr(this),this._iter.__iterate(function(s){return n(s,o?a.size-++i:i++,a)},o)},e.prototype.__iterator=function(n,o){var a=this,i=this._iter.__iterator(nt,o),s=0;return o&&lr(this),new J(function(){var u=i.next();return u.done?u:re(n,o?a.size-++s:s++,u.value,u)})},e}(Ge),Pu=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,o){var a=this;return this._iter.__iterate(function(i){return n(i,i,a)},o)},e.prototype.__iterator=function(n,o){var a=this._iter.__iterator(nt,o);return new J(function(){var i=a.next();return i.done?i:re(n,i.value,i.value,i)})},e}(dr),Mu=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(n,o){var a=this;return this._iter.__iterate(function(i){if(i){ju(i);var s=Ee(i);return n(s?i.get(1):i[1],s?i.get(0):i[0],a)}},o)},e.prototype.__iterator=function(n,o){var a=this._iter.__iterator(nt,o);return new J(function(){for(;;){var i=a.next();if(i.done)return i;var s=i.value;if(s){ju(s);var u=Ee(s);return re(n,u?s.get(0):s[0],u?s.get(1):s[1],i)}}})},e}(Nt);Eu.prototype.cacheResult=zn.prototype.cacheResult=Pu.prototype.cacheResult=Mu.prototype.cacheResult=_a;function Du(t){var e=ht(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var r=t.reverse.apply(this);return r.flip=function(){return t.reverse()},r},e.has=function(r){return t.includes(r)},e.includes=function(r){return t.has(r)},e.cacheResult=_a,e.__iterateUncached=function(r,n){var o=this;return t.__iterate(function(a,i){return r(i,a,o)!==!1},n)},e.__iteratorUncached=function(r,n){if(r===He){var o=t.__iterator(r,n);return new J(function(){var a=o.next();if(!a.done){var i=a.value[0];a.value[0]=a.value[1],a.value[1]=i}return a})}return t.__iterator(r===nt?jr:nt,n)},e}function Bu(t,e,r){var n=ht(t);return n.size=t.size,n.has=function(o){return t.has(o)},n.get=function(o,a){var i=t.get(o,D);return i===D?a:e.call(r,i,o,t)},n.__iterateUncached=function(o,a){var i=this;return t.__iterate(function(s,u,c){return o(e.call(r,s,u,c),u,i)!==!1},a)},n.__iteratorUncached=function(o,a){var i=t.__iterator(He,a);return new J(function(){var s=i.next();if(s.done)return s;var u=s.value,c=u[0];return re(o,c,e.call(r,u[1],c,t),s)})},n}function va(t,e){var r=this,n=ht(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var o=Du(t);return o.reverse=function(){return t.flip()},o}),n.get=function(o,a){return t.get(e?o:-1-o,a)},n.has=function(o){return t.has(e?o:-1-o)},n.includes=function(o){return t.includes(o)},n.cacheResult=_a,n.__iterate=function(o,a){var i=this,s=0;return a&&lr(t),t.__iterate(function(u,c){return o(u,e?c:a?i.size-++s:s++,i)},!a)},n.__iterator=function(o,a){var i=0;a&&lr(t);var s=t.__iterator(He,!a);return new J(function(){var u=s.next();if(u.done)return u;var c=u.value;return re(o,e?c[0]:a?r.size-++i:i++,c[1],u)})},n}function qu(t,e,r,n){var o=ht(t);return n&&(o.has=function(a){var i=t.get(a,D);return i!==D&&!!e.call(r,i,a,t)},o.get=function(a,i){var s=t.get(a,D);return s!==D&&e.call(r,s,a,t)?s:i}),o.__iterateUncached=function(a,i){var s=this,u=0;return t.__iterate(function(c,l,h){if(e.call(r,c,l,h))return u++,a(c,n?l:u-1,s)},i),u},o.__iteratorUncached=function(a,i){var s=t.__iterator(He,i),u=0;return new J(function(){for(;;){var c=s.next();if(c.done)return c;var l=c.value,h=l[0],p=l[1];if(e.call(r,p,h,t))return re(a,n?h:u++,p,c)}})},o}function _k(t,e,r){var n=ce().asMutable();return t.__iterate(function(o,a){n.update(e.call(r,o,a,t),0,function(i){return i+1})}),n.asImmutable()}function bk(t,e,r){var n=se(t),o=(rt(t)?Ce():ce()).asMutable();t.__iterate(function(i,s){o.update(e.call(r,i,s,t),function(u){return u=u||[],u.push(n?[s,i]:i),u})});var a=Vu(t);return o.map(function(i){return $(t,a(i))}).asImmutable()}function Oa(t,e,r,n){var o=t.size;if(En(e,r,o))return t;var a=Kr(e,o),i=Pn(r,o);if(a!==a||i!==i)return Oa(t.toSeq().cacheResult(),e,r,n);var s=i-a,u;s===s&&(u=s<0?0:s);var c=ht(t);return c.size=u===0?u:t.size&&u||void 0,!n&&oa(t)&&u>=0&&(c.get=function(l,h){return l=Ft(this,l),l>=0&&l<u?t.get(l+a,h):h}),c.__iterateUncached=function(l,h){var p=this;if(u===0)return 0;if(h)return this.cacheResult().__iterate(l,h);var d=0,g=!0,y=0;return t.__iterate(function(O,T){if(!(g&&(g=d++<a)))return y++,l(O,n?T:y-1,p)!==!1&&y!==u}),y},c.__iteratorUncached=function(l,h){if(u!==0&&h)return this.cacheResult().__iterator(l,h);if(u===0)return new J(Pe);var p=t.__iterator(l,h),d=0,g=0;return new J(function(){for(;d++<a;)p.next();if(++g>u)return Pe();var y=p.next();return n||l===nt||y.done?y:l===jr?re(l,g-1,void 0,y):re(l,g-1,y.value[1],y)})},c}function xk(t,e,r){var n=ht(t);return n.__iterateUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterate(o,a);var s=0;return t.__iterate(function(u,c,l){return e.call(r,u,c,l)&&++s&&o(u,c,i)}),s},n.__iteratorUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterator(o,a);var s=t.__iterator(He,a),u=!0;return new J(function(){if(!u)return Pe();var c=s.next();if(c.done)return c;var l=c.value,h=l[0],p=l[1];return e.call(r,p,h,i)?o===He?c:re(o,h,p,c):(u=!1,Pe())})},n}function zu(t,e,r,n){var o=ht(t);return o.__iterateUncached=function(a,i){var s=this;if(i)return this.cacheResult().__iterate(a,i);var u=!0,c=0;return t.__iterate(function(l,h,p){if(!(u&&(u=e.call(r,l,h,p))))return c++,a(l,n?h:c-1,s)}),c},o.__iteratorUncached=function(a,i){var s=this;if(i)return this.cacheResult().__iterator(a,i);var u=t.__iterator(He,i),c=!0,l=0;return new J(function(){var h,p,d;do{if(h=u.next(),h.done)return n||a===nt?h:a===jr?re(a,l++,void 0,h):re(a,l++,h.value[1],h);var g=h.value;p=g[0],d=g[1],c&&(c=e.call(r,d,p,s))}while(c);return a===He?h:re(a,p,d,h)})},o}function kk(t,e){var r=se(t),n=[t].concat(e).map(function(i){return Ee(i)?r&&(i=Be(i)):i=r?fa(i):Au(Array.isArray(i)?i:[i]),i}).filter(function(i){return i.size!==0});if(n.length===0)return t;if(n.length===1){var o=n[0];if(o===t||r&&se(o)||Ue(t)&&Ue(o))return o}var a=new Pt(n);return r?a=a.toKeyedSeq():Ue(t)||(a=a.toSetSeq()),a=a.flatten(!0),a.size=n.reduce(function(i,s){if(i!==void 0){var u=s.size;if(u!==void 0)return i+u}},0),a}function Lu(t,e,r){var n=ht(t);return n.__iterateUncached=function(o,a){if(a)return this.cacheResult().__iterate(o,a);var i=0,s=!1;function u(c,l){c.__iterate(function(h,p){return(!e||l<e)&&Ee(h)?u(h,l+1):(i++,o(h,r?p:i-1,n)===!1&&(s=!0)),!s},a)}return u(t,0),i},n.__iteratorUncached=function(o,a){if(a)return this.cacheResult().__iterator(o,a);var i=t.__iterator(o,a),s=[],u=0;return new J(function(){for(;i;){var c=i.next();if(c.done!==!1){i=s.pop();continue}var l=c.value;if(o===He&&(l=l[1]),(!e||s.length<e)&&Ee(l))s.push(i),i=l.__iterator(o,a);else return r?c:re(o,u++,l,c)}return Pe()})},n}function Tk(t,e,r){var n=Vu(t);return t.toSeq().map(function(o,a){return n(e.call(r,o,a,t))}).flatten(!0)}function Sk(t,e){var r=ht(t);return r.size=t.size&&t.size*2-1,r.__iterateUncached=function(n,o){var a=this,i=0;return t.__iterate(function(s){return(!i||n(e,i++,a)!==!1)&&n(s,i++,a)!==!1},o),i},r.__iteratorUncached=function(n,o){var a=t.__iterator(nt,o),i=0,s;return new J(function(){return(!s||i%2)&&(s=a.next(),s.done)?s:i%2?re(n,i++,e):re(n,i++,s.value,s)})},r}function mr(t,e,r){e||(e=Ju);var n=se(t),o=0,a=t.toSeq().map(function(i,s){return[s,i,o++,r?r(i,s,t):i]}).valueSeq().toArray();return a.sort(function(i,s){return e(i[3],s[3])||i[2]-s[2]}).forEach(n?function(i,s){a[s].length=2}:function(i,s){a[s]=i[1]}),n?Nt(a):Ue(t)?Ge(a):dr(a)}function Ln(t,e,r){if(e||(e=Ju),r){var n=t.toSeq().map(function(o,a){return[o,r(o,a,t)]}).reduce(function(o,a){return Ku(e,o[1],a[1])?a:o});return n&&n[0]}return t.reduce(function(o,a){return Ku(e,o,a)?a:o})}function Ku(t,e,r){var n=t(r,e);return n===0&&r!==e&&(r==null||r!==r)||n>0}function Kn(t,e,r,n){var o=ht(t),a=new Pt(r).map(function(i){return i.size});return o.size=n?a.max():a.min(),o.__iterate=function(i,s){for(var u=this.__iterator(nt,s),c,l=0;!(c=u.next()).done&&i(c.value,l++,this)!==!1;);return l},o.__iteratorUncached=function(i,s){var u=r.map(function(h){return h=ue(h),sa(s?h.reverse():h)}),c=0,l=!1;return new J(function(){var h;return l||(h=u.map(function(p){return p.next()}),l=n?h.every(function(p){return p.done}):h.some(function(p){return p.done})),l?Pe():re(i,c++,e.apply(null,h.map(function(p){return p.value})))})},o}function $(t,e){return t===e?t:oa(t)?e:t.constructor(e)}function ju(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Vu(t){return se(t)?Be:Ue(t)?Et:St}function ht(t){return Object.create((se(t)?Nt:Ue(t)?Ge:dr).prototype)}function _a(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):ot.prototype.cacheResult.call(this)}function Ju(t,e){return t===void 0&&e===void 0?0:t===void 0?1:e===void 0?-1:t>e?1:t<e?-1:0}function pt(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),o=0;o<r;o++)n[o]=t[o+e];return n}function ba(t,e){if(!t)throw new Error(e)}function $e(t){ba(t!==1/0,"Cannot perform this action with an infinite size.")}function Uu(t){if(ku(t)&&typeof t!="string")return t;if(rt(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function Hu(t){return t&&(typeof t.constructor!="function"||t.constructor.name==="Object")}function Mt(t){return typeof t=="object"&&(At(t)||Array.isArray(t)||Hu(t))}function Jr(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function Ak(t,e){return At(t)?t.has(e):Mt(t)&&pr.call(t,e)}function Gu(t,e,r){return At(t)?t.get(e,r):Ak(t,e)?typeof t.get=="function"?t.get(e):t[e]:r}function jn(t){if(Array.isArray(t))return pt(t);var e={};for(var r in t)pr.call(t,r)&&(e[r]=t[r]);return e}function Nk(t,e){if(!Mt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(At(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!pr.call(t,e))return t;var r=jn(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function Ik(t,e,r){if(!Mt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(At(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(pr.call(t,e)&&r===t[e])return t;var n=jn(t);return n[e]=r,n}function gr(t,e,r,n){n||(n=r,r=void 0);var o=$u(At(t),t,Uu(e),0,r,n);return o===D?r:o}function $u(t,e,r,n,o,a){var i=e===D;if(n===r.length){var s=i?o:e,u=a(s);return u===s?e:u}if(!i&&!Mt(e))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(Jr)+"]: "+e);var c=r[n],l=i?D:Gu(e,c,D),h=$u(l===D?t:At(l),l,r,n+1,o,a);return h===l?e:h===D?Nk(e,c):Ik(i?t?at():{}:e,c,h)}function Rk(t,e,r){return gr(t,e,D,function(){return r})}function xa(t,e){return Rk(this,t,e)}function Ck(t,e){return gr(t,e,function(){return D})}function ka(t){return Ck(this,t)}function Yu(t,e,r,n){return gr(t,[e],r,n)}function Ta(t,e,r){return arguments.length===1?t(this):Yu(this,t,e,r)}function Sa(t,e,r){return gr(this,t,e,r)}function Wu(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Zu(this,t)}function Xu(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return Zu(this,e,t)}function Zu(t,e,r){for(var n=[],o=0;o<e.length;o++){var a=Be(e[o]);a.size!==0&&n.push(a)}return n.length===0?t:t.toSeq().size===0&&!t.__ownerID&&n.length===1?t.constructor(n[0]):t.withMutations(function(i){for(var s=r?function(c,l){Yu(i,l,D,function(h){return h===D?c:r(h,c,l)})}:function(c,l){i.set(l,c)},u=0;u<n.length;u++)n[u].forEach(s)})}function Aa(t,e,r){return Na(t,e,wk(r))}function Na(t,e,r){if(!Mt(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(At(t))return typeof r=="function"&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),o=t,a=n?Et:Be,i=n?function(u){o===t&&(o=jn(o)),o.push(u)}:function(u,c){var l=pr.call(o,c),h=l&&r?r(o[c],u,c):u;(!l||h!==o[c])&&(o===t&&(o=jn(o)),o[c]=h)},s=0;s<e.length;s++)a(e[s]).forEach(i);return o}function wk(t){function e(r,n,o){return Mt(r)&&Mt(n)?Na(r,[n],e):t?t(r,n,o):n}return e}function Qu(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Aa(this,t)}function ec(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Aa(this,e,t)}function Ia(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return gr(this,t,at(),function(n){return Na(n,e)})}function Ra(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return gr(this,t,at(),function(n){return Aa(n,e)})}function Ur(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Hr(){return this.__ownerID?this:this.__ensureOwner(new na)}function Gr(){return this.__ensureOwner()}function Ca(){return this.__altered}var ce=function(t){function e(r){return r==null?at():la(r)&&!rt(r)?r:at().withMutations(function(n){var o=t(r);$e(o.size),o.forEach(function(a,i){return n.set(i,a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];return at().withMutations(function(a){for(var i=0;i<n.length;i+=2){if(i+1>=n.length)throw new Error("Missing value for key: "+n[i]);a.set(n[i],n[i+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(n,o){return this._root?this._root.get(0,void 0,n,o):o},e.prototype.set=function(n,o){return nc(this,n,o)},e.prototype.remove=function(n){return nc(this,n,D)},e.prototype.deleteAll=function(n){var o=ue(n);return o.size===0?this:this.withMutations(function(a){o.forEach(function(i){return a.remove(i)})})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):at()},e.prototype.sort=function(n){return Ce(mr(this,n))},e.prototype.sortBy=function(n,o){return Ce(mr(this,o,n))},e.prototype.map=function(n,o){return this.withMutations(function(a){a.forEach(function(i,s){a.set(s,n.call(o,i,s,a))})})},e.prototype.__iterator=function(n,o){return new Fk(this,n,o)},e.prototype.__iterate=function(n,o){var a=this,i=0;return this._root&&this._root.iterate(function(s){return i++,n(s[1],s[0],a)},o),i},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Fa(this.size,this._root,n,this.__hash):this.size===0?at():(this.__ownerID=n,this.__altered=!1,this)},e}(Be);ce.isMap=la;var Q=ce.prototype;Q[Iu]=!0;Q[Lr]=Q.remove;Q.removeAll=Q.deleteAll;Q.setIn=xa;Q.removeIn=Q.deleteIn=ka;Q.update=Ta;Q.updateIn=Sa;Q.merge=Q.concat=Wu;Q.mergeWith=Xu;Q.mergeDeep=Qu;Q.mergeDeepWith=ec;Q.mergeIn=Ia;Q.mergeDeepIn=Ra;Q.withMutations=Ur;Q.wasAltered=Ca;Q.asImmutable=Gr;Q["@@transducer/init"]=Q.asMutable=Hr;Q["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])};Q["@@transducer/result"]=function(t){return t.asImmutable()};var $r=function(e,r){this.ownerID=e,this.entries=r};$r.prototype.get=function(e,r,n,o){for(var a=this.entries,i=0,s=a.length;i<s;i++)if(Re(n,a[i][0]))return a[i][1];return o};$r.prototype.update=function(e,r,n,o,a,i,s){for(var u=a===D,c=this.entries,l=0,h=c.length;l<h&&!Re(o,c[l][0]);l++);var p=l<h;if(p?c[l][1]===a:u)return this;if(Je(s),(u||!p)&&Je(i),!(u&&c.length===1)){if(!p&&!u&&c.length>=qk)return Ek(e,c,o,a);var d=e&&e===this.ownerID,g=d?c:pt(c);return p?u?l===h-1?g.pop():g[l]=g.pop():g[l]=[o,a]:g.push([o,a]),d?(this.entries=g,this):new $r(e,g)}};var yr=function(e,r,n){this.ownerID=e,this.bitmap=r,this.nodes=n};yr.prototype.get=function(e,r,n,o){r===void 0&&(r=qe(n));var a=1<<((e===0?r:r>>>e)&Ie),i=this.bitmap;return(i&a)==0?o:this.nodes[ac(i&a-1)].get(e+Z,r,n,o)};yr.prototype.update=function(e,r,n,o,a,i,s){n===void 0&&(n=qe(o));var u=(r===0?n:n>>>r)&Ie,c=1<<u,l=this.bitmap,h=(l&c)!=0;if(!h&&a===D)return this;var p=ac(l&c-1),d=this.nodes,g=h?d[p]:void 0,y=Ea(g,e,r+Z,n,o,a,i,s);if(y===g)return this;if(!h&&y&&d.length>=zk)return Mk(e,d,l,u,y);if(h&&!y&&d.length===2&&oc(d[p^1]))return d[p^1];if(h&&y&&d.length===1&&oc(y))return y;var O=e&&e===this.ownerID,T=h?y?l:l^c:l|c,A=h?y?ic(d,p,y,O):Bk(d,p,O):Dk(d,p,y,O);return O?(this.bitmap=T,this.nodes=A,this):new yr(e,T,A)};var Yr=function(e,r,n){this.ownerID=e,this.count=r,this.nodes=n};Yr.prototype.get=function(e,r,n,o){r===void 0&&(r=qe(n));var a=(e===0?r:r>>>e)&Ie,i=this.nodes[a];return i?i.get(e+Z,r,n,o):o};Yr.prototype.update=function(e,r,n,o,a,i,s){n===void 0&&(n=qe(o));var u=(r===0?n:n>>>r)&Ie,c=a===D,l=this.nodes,h=l[u];if(c&&!h)return this;var p=Ea(h,e,r+Z,n,o,a,i,s);if(p===h)return this;var d=this.count;if(!h)d++;else if(!p&&(d--,d<Lk))return Pk(e,l,d,u);var g=e&&e===this.ownerID,y=ic(l,u,p,g);return g?(this.count=d,this.nodes=y,this):new Yr(e,d,y)};var vr=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entries=n};vr.prototype.get=function(e,r,n,o){for(var a=this.entries,i=0,s=a.length;i<s;i++)if(Re(n,a[i][0]))return a[i][1];return o};vr.prototype.update=function(e,r,n,o,a,i,s){n===void 0&&(n=qe(o));var u=a===D;if(n!==this.keyHash)return u?this:(Je(s),Je(i),Pa(this,e,r,n,[o,a]));for(var c=this.entries,l=0,h=c.length;l<h&&!Re(o,c[l][0]);l++);var p=l<h;if(p?c[l][1]===a:u)return this;if(Je(s),(u||!p)&&Je(i),u&&h===2)return new It(e,this.keyHash,c[l^1]);var d=e&&e===this.ownerID,g=d?c:pt(c);return p?u?l===h-1?g.pop():g[l]=g.pop():g[l]=[o,a]:g.push([o,a]),d?(this.entries=g,this):new vr(e,this.keyHash,g)};var It=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entry=n};It.prototype.get=function(e,r,n,o){return Re(n,this.entry[0])?this.entry[1]:o};It.prototype.update=function(e,r,n,o,a,i,s){var u=a===D,c=Re(o,this.entry[0]);if(c?a===this.entry[1]:u)return this;if(Je(s),u){Je(i);return}return c?e&&e===this.ownerID?(this.entry[1]=a,this):new It(e,this.keyHash,[o,a]):(Je(i),Pa(this,e,r,qe(o),[o,a]))};$r.prototype.iterate=vr.prototype.iterate=function(t,e){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(t(r[e?o-n:n])===!1)return!1};yr.prototype.iterate=Yr.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var a=r[e?o-n:n];if(a&&a.iterate(t,e)===!1)return!1}};It.prototype.iterate=function(t,e){return t(this.entry)};var Fk=function(t){function e(r,n,o){this._type=n,this._reverse=o,this._stack=r._root&&tc(r._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var n=this._type,o=this._stack;o;){var a=o.node,i=o.index++,s=void 0;if(a.entry){if(i===0)return wa(n,a.entry)}else if(a.entries){if(s=a.entries.length-1,i<=s)return wa(n,a.entries[this._reverse?s-i:i])}else if(s=a.nodes.length-1,i<=s){var u=a.nodes[this._reverse?s-i:i];if(u){if(u.entry)return wa(n,u.entry);o=this._stack=tc(u,o)}continue}o=this._stack=this._stack.__prev}return Pe()},e}(J);function wa(t,e){return re(t,e[0],e[1])}function tc(t,e){return{node:t,index:0,__prev:e}}function Fa(t,e,r,n){var o=Object.create(Q);return o.size=t,o._root=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}var rc;function at(){return rc||(rc=Fa(0))}function nc(t,e,r){var n,o;if(t._root){var a=ra(),i=ra();if(n=Ea(t._root,t.__ownerID,0,void 0,e,r,a,i),!i.value)return t;o=t.size+(a.value?r===D?-1:1:0)}else{if(r===D)return t;o=1,n=new $r(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=o,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?Fa(o,n):at()}function Ea(t,e,r,n,o,a,i,s){return t?t.update(e,r,n,o,a,i,s):a===D?t:(Je(s),Je(i),new It(e,n,[o,a]))}function oc(t){return t.constructor===It||t.constructor===vr}function Pa(t,e,r,n,o){if(t.keyHash===n)return new vr(e,n,[t.entry,o]);var a=(r===0?t.keyHash:t.keyHash>>>r)&Ie,i=(r===0?n:n>>>r)&Ie,s,u=a===i?[Pa(t,e,r+Z,n,o)]:(s=new It(e,n,o),a<i?[t,s]:[s,t]);return new yr(e,1<<a|1<<i,u)}function Ek(t,e,r,n){t||(t=new na);for(var o=new It(t,qe(r),[r,n]),a=0;a<e.length;a++){var i=e[a];o=o.update(t,0,void 0,i[0],i[1])}return o}function Pk(t,e,r,n){for(var o=0,a=0,i=new Array(r),s=0,u=1,c=e.length;s<c;s++,u<<=1){var l=e[s];l!==void 0&&s!==n&&(o|=u,i[a++]=l)}return new yr(t,o,i)}function Mk(t,e,r,n,o){for(var a=0,i=new Array(Ve),s=0;r!==0;s++,r>>>=1)i[s]=r&1?e[a++]:void 0;return i[n]=o,new Yr(t,a+1,i)}function ac(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function ic(t,e,r,n){var o=n?t:pt(t);return o[e]=r,o}function Dk(t,e,r,n){var o=t.length+1;if(n&&e+1===o)return t[e]=r,t;for(var a=new Array(o),i=0,s=0;s<o;s++)s===e?(a[s]=r,i=-1):a[s]=t[s+i];return a}function Bk(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var o=new Array(n),a=0,i=0;i<n;i++)i===e&&(a=1),o[i]=t[i+a];return o}var qk=Ve/4,zk=Ve/2,Lk=Ve/4,sc="@@__IMMUTABLE_LIST__@@";function uc(t){return Boolean(t&&t[sc])}var S=function(t){function e(r){var n=Vn();if(r==null)return n;if(uc(r))return r;var o=t(r),a=o.size;return a===0?n:($e(a),a>0&&a<Ve?Xr(0,a,Z,null,new Dt(o.toArray())):n.withMutations(function(i){i.setSize(a),o.forEach(function(s,u){return i.set(u,s)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(n,o){if(n=Ft(this,n),n>=0&&n<this.size){n+=this._origin;var a=lc(this,n);return a&&a.array[n&Ie]}return o},e.prototype.set=function(n,o){return Kk(this,n,o)},e.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},e.prototype.insert=function(n,o){return this.splice(n,0,o)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Z,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Vn()},e.prototype.push=function(){var n=arguments,o=this.size;return this.withMutations(function(a){Bt(a,0,o+n.length);for(var i=0;i<n.length;i++)a.set(o+i,n[i])})},e.prototype.pop=function(){return Bt(this,0,-1)},e.prototype.unshift=function(){var n=arguments;return this.withMutations(function(o){Bt(o,-n.length);for(var a=0;a<n.length;a++)o.set(a,n[a])})},e.prototype.shift=function(){return Bt(this,1)},e.prototype.concat=function(){for(var n=arguments,o=[],a=0;a<arguments.length;a++){var i=n[a],s=t(typeof i!="string"&&ia(i)?i:[i]);s.size!==0&&o.push(s)}return o.length===0?this:this.size===0&&!this.__ownerID&&o.length===1?this.constructor(o[0]):this.withMutations(function(u){o.forEach(function(c){return c.forEach(function(l){return u.push(l)})})})},e.prototype.setSize=function(n){return Bt(this,0,n)},e.prototype.map=function(n,o){var a=this;return this.withMutations(function(i){for(var s=0;s<a.size;s++)i.set(s,n.call(o,i.get(s),s,i))})},e.prototype.slice=function(n,o){var a=this.size;return En(n,o,a)?this:Bt(this,Kr(n,a),Pn(o,a))},e.prototype.__iterator=function(n,o){var a=o?this.size:0,i=cc(this,o);return new J(function(){var s=i();return s===Wr?Pe():re(n,o?--a:a++,s)})},e.prototype.__iterate=function(n,o){for(var a=o?this.size:0,i=cc(this,o),s;(s=i())!==Wr&&n(s,o?--a:a++,this)!==!1;);return a},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Xr(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?Vn():(this.__ownerID=n,this.__altered=!1,this)},e}(Et);S.isList=uc;var he=S.prototype;he[sc]=!0;he[Lr]=he.remove;he.merge=he.concat;he.setIn=xa;he.deleteIn=he.removeIn=ka;he.update=Ta;he.updateIn=Sa;he.mergeIn=Ia;he.mergeDeepIn=Ra;he.withMutations=Ur;he.wasAltered=Ca;he.asImmutable=Gr;he["@@transducer/init"]=he.asMutable=Hr;he["@@transducer/step"]=function(t,e){return t.push(e)};he["@@transducer/result"]=function(t){return t.asImmutable()};var Dt=function(e,r){this.array=e,this.ownerID=r};Dt.prototype.removeBefore=function(e,r,n){if(n===r?1<<r:this.array.length===0)return this;var o=n>>>r&Ie;if(o>=this.array.length)return new Dt([],e);var a=o===0,i;if(r>0){var s=this.array[o];if(i=s&&s.removeBefore(e,r-Z,n),i===s&&a)return this}if(a&&!i)return this;var u=Or(this,e);if(!a)for(var c=0;c<o;c++)u.array[c]=void 0;return i&&(u.array[o]=i),u};Dt.prototype.removeAfter=function(e,r,n){if(n===(r?1<<r:0)||this.array.length===0)return this;var o=n-1>>>r&Ie;if(o>=this.array.length)return this;var a;if(r>0){var i=this.array[o];if(a=i&&i.removeAfter(e,r-Z,n),a===i&&o===this.array.length-1)return this}var s=Or(this,e);return s.array.splice(o+1),a&&(s.array[o]=a),s};var Wr={};function cc(t,e){var r=t._origin,n=t._capacity,o=Zr(n),a=t._tail;return i(t._root,t._level,0);function i(c,l,h){return l===0?s(c,h):u(c,l,h)}function s(c,l){var h=l===o?a&&a.array:c&&c.array,p=l>r?0:r-l,d=n-l;return d>Ve&&(d=Ve),function(){if(p===d)return Wr;var g=e?--d:p++;return h&&h[g]}}function u(c,l,h){var p,d=c&&c.array,g=h>r?0:r-h>>l,y=(n-h>>l)+1;return y>Ve&&(y=Ve),function(){for(;;){if(p){var O=p();if(O!==Wr)return O;p=null}if(g===y)return Wr;var T=e?--y:g++;p=i(d&&d[T],l-Z,h+(T<<l))}}}}function Xr(t,e,r,n,o,a,i){var s=Object.create(he);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=n,s._tail=o,s.__ownerID=a,s.__hash=i,s.__altered=!1,s}var fc;function Vn(){return fc||(fc=Xr(0,0,Z))}function Kk(t,e,r){if(e=Ft(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(i){e<0?Bt(i,e).set(0,r):Bt(i,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,o=t._root,a=ra();return e>=Zr(t._capacity)?n=Ma(n,t.__ownerID,0,e,r,a):o=Ma(o,t.__ownerID,t._level,e,r,a),a.value?t.__ownerID?(t._root=o,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Xr(t._origin,t._capacity,t._level,o,n):t}function Ma(t,e,r,n,o,a){var i=n>>>r&Ie,s=t&&i<t.array.length;if(!s&&o===void 0)return t;var u;if(r>0){var c=t&&t.array[i],l=Ma(c,e,r-Z,n,o,a);return l===c?t:(u=Or(t,e),u.array[i]=l,u)}return s&&t.array[i]===o?t:(a&&Je(a),u=Or(t,e),o===void 0&&i===u.array.length-1?u.array.pop():u.array[i]=o,u)}function Or(t,e){return e&&t&&e===t.ownerID?t:new Dt(t?t.array.slice():[],e)}function lc(t,e){if(e>=Zr(t._capacity))return t._tail;if(e<1<<t._level+Z){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&Ie],n-=Z;return r}}function Bt(t,e,r){e!==void 0&&(e|=0),r!==void 0&&(r|=0);var n=t.__ownerID||new na,o=t._origin,a=t._capacity,i=o+e,s=r===void 0?a:r<0?a+r:o+r;if(i===o&&s===a)return t;if(i>=s)return t.clear();for(var u=t._level,c=t._root,l=0;i+l<0;)c=new Dt(c&&c.array.length?[void 0,c]:[],n),u+=Z,l+=1<<u;l&&(i+=l,o+=l,s+=l,a+=l);for(var h=Zr(a),p=Zr(s);p>=1<<u+Z;)c=new Dt(c&&c.array.length?[c]:[],n),u+=Z;var d=t._tail,g=p<h?lc(t,s-1):p>h?new Dt([],n):d;if(d&&p>h&&i<a&&d.array.length){c=Or(c,n);for(var y=c,O=u;O>Z;O-=Z){var T=h>>>O&Ie;y=y.array[T]=Or(y.array[T],n)}y.array[h>>>Z&Ie]=d}if(s<a&&(g=g&&g.removeAfter(n,0,s)),i>=p)i-=p,s-=p,u=Z,c=null,g=g&&g.removeBefore(n,0,i);else if(i>o||p<h){for(l=0;c;){var A=i>>>u&Ie;if(A!==p>>>u&Ie)break;A&&(l+=(1<<u)*A),u-=Z,c=c.array[A]}c&&i>o&&(c=c.removeBefore(n,u,i-l)),c&&p<h&&(c=c.removeAfter(n,u,p-l)),l&&(i-=l,s-=l)}return t.__ownerID?(t.size=s-i,t._origin=i,t._capacity=s,t._level=u,t._root=c,t._tail=g,t.__hash=void 0,t.__altered=!0,t):Xr(i,s,u,c,g)}function Zr(t){return t<Ve?0:t-1>>>Z<<Z}var Ce=function(t){function e(r){return r==null?Qr():Ru(r)?r:Qr().withMutations(function(n){var o=Be(r);$e(o.size),o.forEach(function(a,i){return n.set(i,a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(n,o){var a=this._map.get(n);return a!==void 0?this._list.get(a)[1]:o},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Qr()},e.prototype.set=function(n,o){return pc(this,n,o)},e.prototype.remove=function(n){return pc(this,n,D)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(n,o){var a=this;return this._list.__iterate(function(i){return i&&n(i[1],i[0],a)},o)},e.prototype.__iterator=function(n,o){return this._list.fromEntrySeq().__iterator(n,o)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var o=this._map.__ensureOwner(n),a=this._list.__ensureOwner(n);return n?Da(o,a,n,this.__hash):this.size===0?Qr():(this.__ownerID=n,this._map=o,this._list=a,this)},e}(ce);Ce.isOrderedMap=Ru;Ce.prototype[hr]=!0;Ce.prototype[Lr]=Ce.prototype.remove;function Da(t,e,r,n){var o=Object.create(Ce.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=r,o.__hash=n,o}var hc;function Qr(){return hc||(hc=Da(at(),Vn()))}function pc(t,e,r){var n=t._map,o=t._list,a=n.get(e),i=a!==void 0,s,u;if(r===D){if(!i)return t;o.size>=Ve&&o.size>=n.size*2?(u=o.filter(function(c,l){return c!==void 0&&a!==l}),s=u.toKeyedSeq().map(function(c){return c[0]}).flip().toMap(),t.__ownerID&&(s.__ownerID=u.__ownerID=t.__ownerID)):(s=n.remove(e),u=a===o.size-1?o.pop():o.set(a,void 0))}else if(i){if(r===o.get(a)[1])return t;s=n,u=o.set(a,[e,r])}else s=n.set(e,o.size),u=o.set(o.size,[e,r]);return t.__ownerID?(t.size=s.size,t._map=s,t._list=u,t.__hash=void 0,t):Da(s,u)}var dc="@@__IMMUTABLE_STACK__@@";function Ba(t){return Boolean(t&&t[dc])}var it=function(t){function e(r){return r==null?Jn():Ba(r)?r:Jn().pushAll(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(n,o){var a=this._head;for(n=Ft(this,n);a&&n--;)a=a.next;return a?a.value:o},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var o=this.size+arguments.length,a=this._head,i=arguments.length-1;i>=0;i--)a={value:n[i],next:a};return this.__ownerID?(this.size=o,this._head=a,this.__hash=void 0,this.__altered=!0,this):en(o,a)},e.prototype.pushAll=function(n){if(n=t(n),n.size===0)return this;if(this.size===0&&Ba(n))return n;$e(n.size);var o=this.size,a=this._head;return n.__iterate(function(i){o++,a={value:i,next:a}},!0),this.__ownerID?(this.size=o,this._head=a,this.__hash=void 0,this.__altered=!0,this):en(o,a)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Jn()},e.prototype.slice=function(n,o){if(En(n,o,this.size))return this;var a=Kr(n,this.size),i=Pn(o,this.size);if(i!==this.size)return t.prototype.slice.call(this,n,o);for(var s=this.size-a,u=this._head;a--;)u=u.next;return this.__ownerID?(this.size=s,this._head=u,this.__hash=void 0,this.__altered=!0,this):en(s,u)},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?en(this.size,this._head,n,this.__hash):this.size===0?Jn():(this.__ownerID=n,this.__altered=!1,this)},e.prototype.__iterate=function(n,o){var a=this;if(o)return new Pt(this.toArray()).__iterate(function(u,c){return n(u,c,a)},o);for(var i=0,s=this._head;s&&n(s.value,i++,this)!==!1;)s=s.next;return i},e.prototype.__iterator=function(n,o){if(o)return new Pt(this.toArray()).__iterator(n,o);var a=0,i=this._head;return new J(function(){if(i){var s=i.value;return i=i.next,re(n,a++,s)}return Pe()})},e}(Et);it.isStack=Ba;var we=it.prototype;we[dc]=!0;we.shift=we.pop;we.unshift=we.push;we.unshiftAll=we.pushAll;we.withMutations=Ur;we.wasAltered=Ca;we.asImmutable=Gr;we["@@transducer/init"]=we.asMutable=Hr;we["@@transducer/step"]=function(t,e){return t.unshift(e)};we["@@transducer/result"]=function(t){return t.asImmutable()};function en(t,e,r,n){var o=Object.create(we);return o.size=t,o._head=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}var mc;function Jn(){return mc||(mc=en(0))}var gc="@@__IMMUTABLE_SET__@@";function qa(t){return Boolean(t&&t[gc])}function yc(t){return qa(t)&&rt(t)}function vc(t,e){if(t===e)return!0;if(!Ee(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||se(t)!==se(e)||Ue(t)!==Ue(e)||rt(t)!==rt(e))return!1;if(t.size===0&&e.size===0)return!0;var r=!Mn(t);if(rt(t)){var n=t.entries();return e.every(function(u,c){var l=n.next().value;return l&&Re(l[1],u)&&(r||Re(l[0],c))})&&n.next().done}var o=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{o=!0;var a=t;t=e,e=a}var i=!0,s=e.__iterate(function(u,c){if(r?!t.has(u):o?!Re(u,t.get(c,D)):!Re(t.get(c,D),u))return i=!1,!1});return i&&t.size===s}function Wt(t,e){var r=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Un(t){if(!t||typeof t!="object")return t;if(!Ee(t)){if(!Mt(t))return t;t=ot(t)}if(se(t)){var e={};return t.__iterate(function(n,o){e[o]=Un(n)}),e}var r=[];return t.__iterate(function(n){r.push(Un(n))}),r}var F=function(t){function e(r){return r==null?tn():qa(r)&&!rt(r)?r:tn().withMutations(function(n){var o=t(r);$e(o.size),o.forEach(function(a){return n.add(a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(Be(n).keySeq())},e.intersect=function(n){return n=ue(n).toArray(),n.length?be.intersect.apply(e(n.pop()),n):tn()},e.union=function(n){return n=ue(n).toArray(),n.length?be.union.apply(e(n.pop()),n):tn()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(n){return this._map.has(n)},e.prototype.add=function(n){return za(this,this._map.set(n,n))},e.prototype.remove=function(n){return za(this,this._map.remove(n))},e.prototype.clear=function(){return za(this,this._map.clear())},e.prototype.map=function(n,o){var a=this,i=[],s=[];return this.forEach(function(u){var c=n.call(o,u,u,a);c!==u&&(i.push(u),s.push(c))}),this.withMutations(function(u){i.forEach(function(c){return u.remove(c)}),s.forEach(function(c){return u.add(c)})})},e.prototype.union=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];return n=n.filter(function(a){return a.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(a){for(var i=0;i<n.length;i++)t(n[i]).forEach(function(s){return a.add(s)})})},e.prototype.intersect=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];if(n.length===0)return this;n=n.map(function(i){return t(i)});var a=[];return this.forEach(function(i){n.every(function(s){return s.includes(i)})||a.push(i)}),this.withMutations(function(i){a.forEach(function(s){i.remove(s)})})},e.prototype.subtract=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];if(n.length===0)return this;n=n.map(function(i){return t(i)});var a=[];return this.forEach(function(i){n.some(function(s){return s.includes(i)})&&a.push(i)}),this.withMutations(function(i){a.forEach(function(s){i.remove(s)})})},e.prototype.sort=function(n){return Me(mr(this,n))},e.prototype.sortBy=function(n,o){return Me(mr(this,o,n))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(n,o){var a=this;return this._map.__iterate(function(i){return n(i,i,a)},o)},e.prototype.__iterator=function(n,o){return this._map.__iterator(n,o)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var o=this._map.__ensureOwner(n);return n?this.__make(o,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=o,this)},e}(St);F.isSet=qa;var be=F.prototype;be[gc]=!0;be[Lr]=be.remove;be.merge=be.concat=be.union;be.withMutations=Ur;be.asImmutable=Gr;be["@@transducer/init"]=be.asMutable=Hr;be["@@transducer/step"]=function(t,e){return t.add(e)};be["@@transducer/result"]=function(t){return t.asImmutable()};be.__empty=tn;be.__make=Oc;function za(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function Oc(t,e){var r=Object.create(be);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var _c;function tn(){return _c||(_c=Oc(at()))}var jk=function(t){function e(r,n,o){if(!(this instanceof e))return new e(r,n,o);if(ba(o!==0,"Cannot step a Range by 0"),r=r||0,n===void 0&&(n=1/0),o=o===void 0?1:Math.abs(o),n<r&&(o=-o),this._start=r,this._end=n,this._step=o,this.size=Math.max(0,Math.ceil((n-r)/o-1)+1),this.size===0){if(La)return La;La=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(n,o){return this.has(n)?this._start+Ft(this,n)*this._step:o},e.prototype.includes=function(n){var o=(n-this._start)/this._step;return o>=0&&o<this.size&&o===Math.floor(o)},e.prototype.slice=function(n,o){return En(n,o,this.size)?this:(n=Kr(n,this.size),o=Pn(o,this.size),o<=n?new e(0,0):new e(this.get(n,this._end),this.get(o,this._end),this._step))},e.prototype.indexOf=function(n){var o=n-this._start;if(o%this._step==0){var a=o/this._step;if(a>=0&&a<this.size)return a}return-1},e.prototype.lastIndexOf=function(n){return this.indexOf(n)},e.prototype.__iterate=function(n,o){for(var a=this.size,i=this._step,s=o?this._start+(a-1)*i:this._start,u=0;u!==a&&n(s,o?a-++u:u++,this)!==!1;)s+=o?-i:i;return u},e.prototype.__iterator=function(n,o){var a=this.size,i=this._step,s=o?this._start+(a-1)*i:this._start,u=0;return new J(function(){if(u===a)return Pe();var c=s;return s+=o?-i:i,re(n,o?a-++u:u++,c)})},e.prototype.equals=function(n){return n instanceof e?this._start===n._start&&this._end===n._end&&this._step===n._step:vc(this,n)},e}(Ge),La;function bc(t,e,r){for(var n=Uu(e),o=0;o!==n.length;)if(t=Gu(t,n[o++],D),t===D)return r;return t}function xc(t,e){return bc(this,t,e)}function Vk(t,e){return bc(t,e,D)!==D}function Jk(t){return Vk(this,t)}function kc(){$e(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t}ue.isIterable=Ee;ue.isKeyed=se;ue.isIndexed=Ue;ue.isAssociative=Mn;ue.isOrdered=rt;ue.Iterator=J;Wt(ue,{toArray:function(){$e(this.size);var e=new Array(this.size||0),r=se(this),n=0;return this.__iterate(function(o,a){e[n++]=r?[a,o]:o}),e},toIndexedSeq:function(){return new Eu(this)},toJS:function(){return Un(this)},toKeyedSeq:function(){return new zn(this,!0)},toMap:function(){return ce(this.toKeyedSeq())},toObject:kc,toOrderedMap:function(){return Ce(this.toKeyedSeq())},toOrderedSet:function(){return Me(se(this)?this.valueSeq():this)},toSet:function(){return F(se(this)?this.valueSeq():this)},toSetSeq:function(){return new Pu(this)},toSeq:function(){return Ue(this)?this.toIndexedSeq():se(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return it(se(this)?this.valueSeq():this)},toList:function(){return S(se(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,r){return this.size===0?e+r:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+r},concat:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return $(this,kk(this,e))},includes:function(e){return this.some(function(r){return Re(r,e)})},entries:function(){return this.__iterator(He)},every:function(e,r){$e(this.size);var n=!0;return this.__iterate(function(o,a,i){if(!e.call(r,o,a,i))return n=!1,!1}),n},filter:function(e,r){return $(this,qu(this,e,r,!0))},find:function(e,r,n){var o=this.findEntry(e,r);return o?o[1]:n},forEach:function(e,r){return $e(this.size),this.__iterate(r?e.bind(r):e)},join:function(e){$e(this.size),e=e!==void 0?""+e:",";var r="",n=!0;return this.__iterate(function(o){n?n=!1:r+=e,r+=o!=null?o.toString():""}),r},keys:function(){return this.__iterator(jr)},map:function(e,r){return $(this,Bu(this,e,r))},reduce:function(e,r,n){return Tc(this,e,r,n,arguments.length<2,!1)},reduceRight:function(e,r,n){return Tc(this,e,r,n,arguments.length<2,!0)},reverse:function(){return $(this,va(this,!0))},slice:function(e,r){return $(this,Oa(this,e,r,!0))},some:function(e,r){return!this.every($n(e),r)},sort:function(e){return $(this,mr(this,e))},values:function(){return this.__iterator(nt)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,r){return lr(e?this.toSeq().filter(e,r):this)},countBy:function(e,r){return _k(this,e,r)},equals:function(e){return vc(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Pt(e._cache);var r=e.toSeq().map(Hk).toIndexedSeq();return r.fromEntrySeq=function(){return e.toSeq()},r},filterNot:function(e,r){return this.filter($n(e),r)},findEntry:function(e,r,n){var o=n;return this.__iterate(function(a,i,s){if(e.call(r,a,i,s))return o=[i,a],!1}),o},findKey:function(e,r){var n=this.findEntry(e,r);return n&&n[0]},findLast:function(e,r,n){return this.toKeyedSeq().reverse().find(e,r,n)},findLastEntry:function(e,r,n){return this.toKeyedSeq().reverse().findEntry(e,r,n)},findLastKey:function(e,r){return this.toKeyedSeq().reverse().findKey(e,r)},first:function(e){return this.find(hu,null,e)},flatMap:function(e,r){return $(this,Tk(this,e,r))},flatten:function(e){return $(this,Lu(this,e,!0))},fromEntrySeq:function(){return new Mu(this)},get:function(e,r){return this.find(function(n,o){return Re(o,e)},void 0,r)},getIn:xc,groupBy:function(e,r){return bk(this,e,r)},has:function(e){return this.get(e,D)!==D},hasIn:Jk,isSubset:function(e){return e=typeof e.includes=="function"?e:ue(e),this.every(function(r){return e.includes(r)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:ue(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(r){return Re(r,e)})},keySeq:function(){return this.toSeq().map(Uk).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Ln(this,e)},maxBy:function(e,r){return Ln(this,r,e)},min:function(e){return Ln(this,e?Sc(e):Nc)},minBy:function(e,r){return Ln(this,r?Sc(r):Nc,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,r){return $(this,zu(this,e,r,!0))},skipUntil:function(e,r){return this.skipWhile($n(e),r)},sortBy:function(e,r){return $(this,mr(this,r,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,r){return $(this,xk(this,e,r))},takeUntil:function(e,r){return this.takeWhile($n(e),r)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Gk(this))}});var Ae=ue.prototype;Ae[mu]=!0;Ae[Bn]=Ae.values;Ae.toJSON=Ae.toArray;Ae.__toStringMapper=Jr;Ae.inspect=Ae.toSource=function(){return this.toString()};Ae.chain=Ae.flatMap;Ae.contains=Ae.includes;Wt(Be,{flip:function(){return $(this,Du(this))},mapEntries:function(e,r){var n=this,o=0;return $(this,this.toSeq().map(function(a,i){return e.call(r,[i,a],o++,n)}).fromEntrySeq())},mapKeys:function(e,r){var n=this;return $(this,this.toSeq().flip().map(function(o,a){return e.call(r,o,a,n)}).flip())}});var Hn=Be.prototype;Hn[gu]=!0;Hn[Bn]=Ae.entries;Hn.toJSON=kc;Hn.__toStringMapper=function(t,e){return Jr(e)+": "+Jr(t)};Wt(Et,{toKeyedSeq:function(){return new zn(this,!1)},filter:function(e,r){return $(this,qu(this,e,r,!1))},findIndex:function(e,r){var n=this.findEntry(e,r);return n?n[0]:-1},indexOf:function(e){var r=this.keyOf(e);return r===void 0?-1:r},lastIndexOf:function(e){var r=this.lastKeyOf(e);return r===void 0?-1:r},reverse:function(){return $(this,va(this,!1))},slice:function(e,r){return $(this,Oa(this,e,r,!1))},splice:function(e,r){var n=arguments.length;if(r=Math.max(r||0,0),n===0||n===2&&!r)return this;e=Kr(e,e<0?this.count():this.size);var o=this.slice(0,e);return $(this,n===1?o:o.concat(pt(arguments,2),this.slice(e+r)))},findLastIndex:function(e,r){var n=this.findLastEntry(e,r);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return $(this,Lu(this,e,!1))},get:function(e,r){return e=Ft(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?r:this.find(function(n,o){return o===e},void 0,r)},has:function(e){return e=Ft(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return $(this,Sk(this,e))},interleave:function(){var e=[this].concat(pt(arguments)),r=Kn(this.toSeq(),Ge.of,e),n=r.flatten(!0);return r.size&&(n.size=r.size*e.length),$(this,n)},keySeq:function(){return jk(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,r){return $(this,zu(this,e,r,!1))},zip:function(){var e=[this].concat(pt(arguments));return $(this,Kn(this,Ac,e))},zipAll:function(){var e=[this].concat(pt(arguments));return $(this,Kn(this,Ac,e,!0))},zipWith:function(e){var r=pt(arguments);return r[0]=this,$(this,Kn(this,e,r))}});var Gn=Et.prototype;Gn[yu]=!0;Gn[hr]=!0;Wt(St,{get:function(e,r){return this.has(e)?e:r},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});St.prototype.has=Ae.includes;St.prototype.contains=St.prototype.includes;Wt(Nt,Be.prototype);Wt(Ge,Et.prototype);Wt(dr,St.prototype);function Tc(t,e,r,n,o,a){return $e(t.size),t.__iterate(function(i,s,u){o?(o=!1,r=i):r=e.call(n,r,i,s,u)},a),r}function Uk(t,e){return e}function Hk(t,e){return[e,t]}function $n(t){return function(){return!t.apply(this,arguments)}}function Sc(t){return function(){return-t.apply(this,arguments)}}function Ac(){return pt(arguments)}function Nc(t,e){return t<e?1:t>e?-1:0}function Gk(t){if(t.size===1/0)return 0;var e=rt(t),r=se(t),n=e?1:0,o=t.__iterate(r?e?function(a,i){n=31*n+Ic(qe(a),qe(i))|0}:function(a,i){n=n+Ic(qe(a),qe(i))|0}:e?function(a){n=31*n+qe(a)|0}:function(a){n=n+qe(a)|0});return $k(o,n)}function $k(t,e){return e=Vr(e,3432918353),e=Vr(e<<15|e>>>-15,461845907),e=Vr(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Vr(e^e>>>16,2246822507),e=Vr(e^e>>>13,3266489909),e=qn(e^e>>>16),e}function Ic(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var Me=function(t){function e(r){return r==null?Ka():yc(r)?r:Ka().withMutations(function(n){var o=St(r);$e(o.size),o.forEach(function(a){return n.add(a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(Be(n).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(F);Me.isOrderedSet=yc;var _r=Me.prototype;_r[hr]=!0;_r.zip=Gn.zip;_r.zipWith=Gn.zipWith;_r.__empty=Ka;_r.__make=Rc;function Rc(t,e){var r=Object.create(_r);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var Cc;function Ka(){return Cc||(Cc=Rc(Qr()))}var M=function(e,r){var n,o=function(s){var u=this;if(s instanceof o)return s;if(!(this instanceof o))return new o(s);if(!n){n=!0;var c=Object.keys(e),l=a._indices={};a._name=r,a._keys=c,a._defaultValues=e;for(var h=0;h<c.length;h++){var p=c[h];l[p]=h,a[p]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+Va(this)+' with property "'+p+'" since that property name is part of the Record API.'):Yk(a,p)}}this.__ownerID=void 0,this._values=S().withMutations(function(d){d.setSize(u._keys.length),Be(s).forEach(function(g,y){d.set(u._indices[y],g===u._defaultValues[y]?void 0:g)})})},a=o.prototype=Object.create(Y);return a.constructor=o,r&&(o.displayName=r),o};M.prototype.toString=function(){for(var e=Va(this)+" { ",r=this._keys,n,o=0,a=r.length;o!==a;o++)n=r[o],e+=(o?", ":"")+n+": "+Jr(this.get(n));return e+" }"};M.prototype.equals=function(e){return this===e||e&&this._keys===e._keys&&br(this).equals(br(e))};M.prototype.hashCode=function(){return br(this).hashCode()};M.prototype.has=function(e){return this._indices.hasOwnProperty(e)};M.prototype.get=function(e,r){if(!this.has(e))return r;var n=this._indices[e],o=this._values.get(n);return o===void 0?this._defaultValues[e]:o};M.prototype.set=function(e,r){if(this.has(e)){var n=this._values.set(this._indices[e],r===this._defaultValues[e]?void 0:r);if(n!==this._values&&!this.__ownerID)return ja(this,n)}return this};M.prototype.remove=function(e){return this.set(e)};M.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:ja(this,e)};M.prototype.wasAltered=function(){return this._values.wasAltered()};M.prototype.toSeq=function(){return br(this)};M.prototype.toJS=function(){return Un(this)};M.prototype.entries=function(){return this.__iterator(He)};M.prototype.__iterator=function(e,r){return br(this).__iterator(e,r)};M.prototype.__iterate=function(e,r){return br(this).__iterate(e,r)};M.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var r=this._values.__ensureOwner(e);return e?ja(this,r,e):(this.__ownerID=e,this._values=r,this)};M.isRecord=Dn;M.getDescriptiveName=Va;var Y=M.prototype;Y[Ou]=!0;Y[Lr]=Y.remove;Y.deleteIn=Y.removeIn=ka;Y.getIn=xc;Y.hasIn=Ae.hasIn;Y.merge=Wu;Y.mergeWith=Xu;Y.mergeIn=Ia;Y.mergeDeep=Qu;Y.mergeDeepWith=ec;Y.mergeDeepIn=Ra;Y.setIn=xa;Y.update=Ta;Y.updateIn=Sa;Y.withMutations=Ur;Y.asMutable=Hr;Y.asImmutable=Gr;Y[Bn]=Y.entries;Y.toJSON=Y.toObject=Ae.toObject;Y.inspect=Y.toSource=function(){return this.toString()};function ja(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function Va(t){return t.constructor.displayName||t.constructor.name||"Record"}function br(t){return fa(t._keys.map(function(e){return[e,t.get(e)]}))}function Yk(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(r){ba(this.__ownerID,"Cannot set on an immutable record."),this.set(e,r)}})}catch(r){}}function LB(t,e){return wc([],e||Wk,t,"",e&&e.length>2?[]:void 0,{"":t})}function wc(t,e,r,n,o,a){var i=Array.isArray(r)?Ge:Hu(r)?Nt:null;if(i){if(~t.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");t.push(r),o&&n!==""&&o.push(n);var s=e.call(a,n,i(r).map(function(u,c){return wc(t,e,u,c,o,r)}),o&&o.slice());return t.pop(),o&&o.pop(),s}return r}function Wk(t,e){return se(e)?e.toMap():e.toList()}f();var U={BLOCK:"@@__SLATE_BLOCK__@@",CHANGE:"@@__SLATE_CHANGE__@@",CHARACTER:"@@__SLATE_CHARACTER__@@",DOCUMENT:"@@__SLATE_DOCUMENT__@@",FRAGMENT:"@@__SLATE_DOCUMENT__@@",HISTORY:"@@__SLATE_HISTORY__@@",INLINE:"@@__SLATE_INLINE__@@",LEAF:"@@__SLATE_LEAF__@@",MARK:"@@__SLATE_MARK__@@",SELECTION:"@@__SLATE_SELECTION__@@",OPERATION:"@@__SLATE_OPERATION__@@",RANGE:"@@__SLATE_RANGE__@@",SCHEMA:"@@__SLATE_SCHEMA__@@",TEXT:"@@__SLATE_TEXT__@@",VALUE:"@@__SLATE_VALUE__@@"};function ye(t,e){return!!(e&&e[U[t]])}f();var pf=me(Yn());f();f();var v={};fk(v,{compare:()=>Wn,crop:()=>xr,decrement:()=>Zk,increment:()=>Dc,isAbove:()=>nT,isAfter:()=>tT,isBefore:()=>Qk,isEqual:()=>Xn,isOlder:()=>rT,isSibling:()=>oT,isYounger:()=>eT,min:()=>Ja});f();function Ja(t,e){return Math.min(t.length,e.length)}function Wn(t,e){let r=Ja(t,e);for(let n=0;n<r;n++){let o=t[n],a=e[n];if(o<a)return-1;if(o>a)return 1}return t.length===e.length?0:null}function xr(t,e,r=Ja(t,e)){let n=t.slice(0,r),o=e.slice(0,r);return[n,o]}function Dc(t,e=1,r=t.length-1){let o=t[r]+e,a=[...t];return a[r]=o,a}function Zk(t,e=1,r=t.length-1){return Dc(t,0-e,r)}function Qk(t,e){let[r,n]=xr(t,e);return Wn(r,n)===-1}function eT(t,e){let r=t.length-1,[n,o]=xr(t,e,r),a=t[r],i=e[r];return Xn(n,o)&&a<i}function tT(t,e){let[r,n]=xr(t,e);return Wn(r,n)===1}function rT(t,e){let r=t.length-1,[n,o]=xr(t,e,r),a=t[r],i=e[r];return Xn(n,o)&&a>i}function Xn(t,e){return t.toString()===e.toString()}function nT(t,e){let[r,n]=xr(t,e);return t.length<e.length&&Wn(r,n)===0}function oT(t,e){if(t.length!==e.length)return!1;let r=t.slice(0,t.length-1),n=e.slice(0,e.length-1);return Xn(r,n)}f();f();f();var Zn,aT=new Uint8Array(16);function Ua(){if(!Zn&&(Zn=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Zn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zn(aT)}f();f();f();var Bc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function iT(t){return typeof t=="string"&&Bc.test(t)}var qc=iT;var xe=[];for(Qn=0;Qn<256;++Qn)xe.push((Qn+256).toString(16).substr(1));var Qn;function sT(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(xe[t[e+0]]+xe[t[e+1]]+xe[t[e+2]]+xe[t[e+3]]+"-"+xe[t[e+4]]+xe[t[e+5]]+"-"+xe[t[e+6]]+xe[t[e+7]]+"-"+xe[t[e+8]]+xe[t[e+9]]+"-"+xe[t[e+10]]+xe[t[e+11]]+xe[t[e+12]]+xe[t[e+13]]+xe[t[e+14]]+xe[t[e+15]]).toLowerCase();if(!qc(r))throw TypeError("Stringified UUID is invalid");return r}var zc=sT;f();function uT(t,e,r){t=t||{};var n=t.random||(t.rng||Ua)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=n[o];return e}return zc(n)}var Ha=uT;var Lc;jc();function ne(){return Lc()}function Kc(t){Lc=t}function jc(){let t=/-/g,e="";Kc(()=>Ha().replace(t,e))}f();var Ga=me(Vc()),cT=55296,fT=57343,lT=/\s/,hT=/['\u2018\u2019]/,pT=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;function dT(t){return cT<=t&&t<=fT}function Jc(t,e){if(lT.test(t))return!1;if(hT.test(t)){let r=e.charAt(0),n=$a(r);r=e.slice(0,n);let o=e.slice(n);if(Jc(r,o))return!0}return!pT.test(t)}function $a(t){return dT(t.charCodeAt(0))?2:1}function Uc(t){let e=t.charAt(0);return $a(e)}function Hc(t,e){return t=t.slice(0,e),t=(0,Ga.reverse)(t),Uc(t)}function Gc(t,e){return t=t.slice(e),Uc(t)}function $c(t){let e=0,r=0,n=!1;for(;;){let o=t.charAt(r);if(!o)break;let a=$a(o);o=t.slice(r,r+a);let i=t.slice(r+a);if(Jc(o,i))n=!0,e+=a;else if(!n)e+=a;else break;r+=a}return e}function Yc(t,e){return t=t.slice(0,e),t=(0,Ga.reverse)(t),$c(t)}function Wc(t,e){return t=t.slice(e),$c(t)}f();var ee={create(t={}){return ce.isMap(t)?t:ce(t)}};f();var sf=me(ef());var uf=me(kr());f();var Za=class{constructor(e,r){this.ownerKey=e,this.m=new Map;for(let n of r)for(let o of n){if(this.m.get(o[0]))throw new Error(`Key "${o[0]}" is already indexed in the LookupIndex, it may indicate a duplicated key in the nodes`);this.m.set(o[0],o[1])}}get(e){let r=[],n=e;for(;n!==this.ownerKey;){let o=this.m.get(n);if(!o)return;n=o.parentKey,r.unshift(o.index)}return Object.freeze(r)}keys(){return this.m.keys()}};function bT(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){if(t[n]>e[n])return 1;if(t[n]<e[n])return-1}return t.length===e.length?0:t.length>e.length?1:-1}function af(t,e){return bT(t,e)===-1}var xT=ge("slate:operation");function Rt(t,e){return t.push(...e),t}var Qa=new WeakMap;function qt(t){return class extends M(t){getDataRef(){if(Qa.has(this.data))return Qa.get(this.data);let r=Object.freeze(this.data.toJS());return Qa.set(this.data,r),r}isText(){return!1}isBlock(){return this.object==="block"}isInline(){return this.object==="inline"}isDocument(){return this.object==="document"}isFragment(){return this.object==="fragment"}getLookupIndex(){return new Za(this.key,this.getIndexPairs())}getIndexPairs(){if(!this.nodes&&!this.fragments)return[];let r=[];r.length=this.nodes.size+(this.isBlock()?this.fragments.size:0);let n=[r];return this.nodes.forEach((o,a)=>{if(r[a]=[o.key,{index:a,parentKey:this.key}],o.isText())return;let i=o.getIndexPairs();Rt(n,i)}),this.isBlock()&&this.fragments.toIndexedSeq().forEach((o,a)=>{let i=this.nodes.size+a;r[i]=[o.key,{index:i,parentKey:this.key}];let s=o.getIndexPairs();Rt(n,s)}),n}getByPath(r){return r.reduce((n,o)=>{if(!n||!n.nodes&&!n.fragments)return null;if(o<n.nodes.size)return n.nodes.get(o);{let a=n.isBlock()?n.fragments.toArray():[],i=o-n.nodes.size;return a[i]?a[i][1]:null}},this)}getPath(r){return r===this.key?[]:this.getLookupIndex().get(r)||null}getByKey(r){let n=this.getPath(r);return n?this.getByPath(n):null}areDescendantsSorted(r,n){let o=this.getPath(r),a=this.getPath(n);return!o||!a?null:af(o,a)}assertChild(r){let n=this.getChild(r);if(!n)throw new Error(`Could not find a child node with key "${r}".`);return n}assertDescendant(r){let n=this.getDescendant(r);if(!n)throw new Error(`Could not find a descendant node with key "${r}".`);return n}assertNode(r){let n=this.getNode(r);if(!n)throw new Error(`Could not find a node with key "${r}".`);return n}assertBlock(r){let n=this.assertNode(r);if(n.object!=="block")throw new Error(`Node "${r}" is not a block.`);return n}assertPath(r){let n=this.getByPath(r);if(!n)throw new Error(`Could not find a descendant at path "${r}".`);return n}filterDescendants(r,n){let o=[];return this.forEachDescendant(a=>{r(a)&&o.push(a)},n),S(o)}findDescendant(r){let n=null;return this.forEachDescendant(o=>{if(r(o))return n=o,!1}),n}forEachDescendant(r,n){let o;return this.nodes.forEach(a=>{if(r(a)===!1)return o=!1,!1;if(a.object!=="text")return o=a.forEachDescendant(r,n),o}),(n==null?void 0:n.withFragments)&&this.isBlock()&&this.fragments.toIndexedSeq().forEach(a=>r(a)===!1?(o=!1,!1):a.forEachDescendant(r,n)),o}getAncestors(r){if(r===this.key)return S();let n=this.getPath(r);if(!n)return null;let a=n.map((i,s)=>n.slice(0,s)).map(i=>this.getByPath(i));return new S(a)}getFragmentAncestors(r){if(r===this.key)return S();let n=this.getPath(r);if(!n)return null;let o=n.map((s,u)=>n.slice(0,u)),a=S(),i=null;for(let s=o.length-1;s>=0;s--){let u=this.getByPath(o[s]);if(u.isBlock()&&i!==null&&u.fragments.some(l=>l.key===i))break;i=u.key,a=a.unshift(u)}return a}getBlocks(){let r=this.getBlocksAsArray();return S(r)}getBlocksAsArray(){return this.nodes.reduce((r,n)=>(n.object!=="block"||(n.isLeafBlock()||Rt(r,n.getBlocksAsArray()),r.push(n)),r),[])}getLeafBlocks(){let r=this.getLeafBlocksAsArray();return S(r)}getLeafBlocksAsArray(){return this.nodes.reduce((r,n)=>n.object!=="block"?r:n.isLeafBlock()?(r.push(n),r):Rt(r,n.getLeafBlocksAsArray()),[])}getBlocksAtRange(r){let n=this.getBlocksAtRangeAsArray(r);return S(new Me(n))}getBlocksAtRangeAsArray(r){if(r=r.normalize(this),r.isUnset)return[];let{startKey:n,endKey:o}=r,a=this.getClosestBlock(n);if(n===o)return[a];let i=this.getClosestBlock(o),s=this.getBlocksAsArray(),u=s.indexOf(a),c=s.indexOf(i);return s.slice(u,c+1)}getBlocksByType(r){let n=this.getBlocksByTypeAsArray(r);return S(n)}getBlocksByTypeAsArray(r){return this.nodes.reduce((n,o)=>o.object!=="block"||(o.type===r&&n.push(o),o.isLeafBlock())?n:Rt(n,o.getBlocksByTypeAsArray(r)),[])}getChild(r){let n=this.getChildIndex(r);return n>=0?this.nodes.get(n):null}getChildIndex(r){let n=this.getPath(r);return!n||n.length!==1?-1:n[0]}getClosest(r,n){let o=this.getAncestors(r);if(!o)throw new Error(`Could not find a descendant node with key "${r}".`);return o.rest().findLast(n)}getClosestInFragment(r,n){let o=this.getFragmentAncestors(r);if(!o)throw new Error(`Could not find a descendant node with key "${r}".`);return o.rest().findLast(n)}getClosestBlock(r){return this.getClosest(r,n=>n.object==="block")}getClosestInline(r){return this.getClosest(r,n=>n.object==="inline")}getClosestVoid(r){return this.getClosestInFragment(r,n=>n.isVoid)}getFragmentParent(r){let n=this.getFragmentAncestors(r);return!n||n.isEmpty()?null:n.first()}getCommonAncestor(r,n){if(r===this.key)return this;if(n===this.key)return this;this.assertDescendant(r),this.assertDescendant(n);let o=new S,a=this.getParent(r),i=this.getParent(n);for(;a;)o=o.push(a),a=this.getParent(a.key);for(;i;){if(o.includes(i))return i;i=this.getParent(i.key)}return null}getDepth(r,n=1){return this.assertDescendant(r),this.hasChild(r)?n:this.getFurthestAncestor(r).getDepth(r,n+1)}getDescendant(r){let n=this.getPath(r);return n?this.getDescendantAtPath(n):null}getDescendantAtPath(r){return r.length<1?null:this.getByPath(r)}getFirstText(){let r=null,n=this.nodes.find(o=>o.object==="text"?!0:(r=o.getFirstText(),r));return r||n}getFurthest(r,n){let o=this.getAncestors(r);if(!o)throw new Error(`Could not find a descendant node with key "${r}".`);return o.rest().find(n)}getFurthestBlock(r){return this.getFurthest(r,n=>n.object==="block")}getFurthestInline(r){return this.getFurthest(r,n=>n.object==="inline")}getFurthestAncestor(r){let n=this.getPath(r);return n?this.getByPath(n.slice(0,1)):null}getFurthestOnlyChildAncestor(r){let n=this.getAncestors(r);if(!n)throw new Error(`Could not find a descendant node with key "${r}".`);let o=n.shift().reverse().takeUntil(a=>a.nodes.size>1).last();return o||null}getInlinesAtRange(r){let n=this.getInlinesAtRangeAsArray(r);return S(Me(n))}getInlinesAtRangeAsArray(r){return r=r.normalize(this),r.isUnset?[]:this.getTextsAtRangeAsArray(r).map(n=>this.getClosestInline(n.key)).filter(n=>n)}getKeysAsArray(){return[...this.getLookupIndex().keys()]}getKeys(){let r=this.getKeysAsArray();return F(r)}getLastText(){let r=null,n=this.nodes.findLast(o=>o.object==="text"?!0:(r=o.getLastText(),r));return r||n}getMarks(){let r=this.getMarksAsArray();return F(r)}getOrderedMarks(){let r=this.getMarksAsArray();return Me(r)}getMarksAsArray(){let r=[];return this.nodes.forEach(n=>{Rt(r,n.getMarksAsArray())}),r}getMarksAtRange(r){return new F(this.getOrderedMarksAtRange(r))}getInsertMarksAtRange(r){if(r=r.normalize(this),r.isUnset)return F();if(r.isCollapsed)return this.getMarksAtPosition(r.startKey,r.startOffset);let{startKey:n,startOffset:o}=r;return this.getDescendant(n).getMarksAtIndex(o+1)}getOrderedMarksAtRange(r){if(r=r.normalize(this),r.isUnset)return Me();if(r.isCollapsed)return this.getMarksAtPosition(r.startKey,r.startOffset);let{startKey:n,startOffset:o,endKey:a,endOffset:i}=r;return this.getOrderedMarksBetweenPositions(n,o,a,i)}getOrderedMarksBetweenPositions(r,n,o,a){if(r===o)return this.getDescendant(r).getMarksBetweenOffsets(n,a);let i=this.getTextsBetweenPositionsAsArray(r,o);return Me().withMutations(s=>{i.forEach(u=>{u.key===r?s.union(u.getMarksBetweenOffsets(n,u.text.length)):u.key===o?s.union(u.getMarksBetweenOffsets(0,a)):s.union(u.getMarks())})})}getActiveMarksAtRange(r){if(r=r.normalize(this),r.isUnset)return F();if(r.isCollapsed)return this.getMarksAtPosition(r.startKey,r.startOffset).toSet();let{startKey:n,endKey:o,startOffset:a,endOffset:i}=r,s=this.getDescendant(n);if(n!==o){for(;n!==o&&i===0;){let d=this.getPreviousText(o);o=d.key,i=d.text.length}for(;n!==o&&a===s.text.length;)s=this.getNextText(n),n=s.key,a=0}if(n===o)return s.getActiveMarksBetweenOffsets(a,i);let u=s.getActiveMarksBetweenOffsets(a,s.text.length);if(u.size===0)return F();let l=this.getDescendant(o).getActiveMarksBetweenOffsets(0,i),h=u.intersect(l);if(h.size===0)return h;let p=this.getNextText(n);for(;p.key!==o;){if(p.text.length!==0&&(h=h.intersect(p.getActiveMarks()),h.size===0))return F();p=this.getNextText(p.key)}return h}getMarksAtPosition(r,n){let a=this.getDescendant(r).getMarksAtIndex(n);if(n!==0)return a;let i=this.getClosestBlock(r);if(i.text==="")return a;let s=this.getPreviousText(r);return s?i.hasDescendant(s.key)?s.getMarksAtIndex(s.text.length):a:F()}getMarksByType(r){let n=this.getMarksByTypeAsArray(r);return F(n)}getOrderedMarksByType(r){let n=this.getMarksByTypeAsArray(r);return Me(n)}getMarksByTypeAsArray(r){return this.nodes.reduce((n,o)=>o.object==="text"?Rt(n,o.getMarksAsArray().filter(a=>a.type===r)):Rt(n,o.getMarksByTypeAsArray(r)),[])}getNextBlock(r){let n=this.assertDescendant(r),o;n.object==="block"?o=n.getLastText():o=this.getClosestBlock(r).getLastText();let a=this.getNextText(o.key);return a?this.getClosestBlock(a.key):null}getNextSibling(r){let o=this.getParent(r).nodes.skipUntil(a=>a.key===r);if(o.size===0)throw new Error(`Could not find a child node with key "${r}".`);return o.get(1)}getNextText(r){return this.getTexts().skipUntil(n=>n.key===r).get(1)}getNextTextAfterNode(r){let n=this.assertNode(r);return n.object==="text"?this.getNextText(n.key):this.getTexts().skipUntil(o=>n.hasDescendant(o.key)).skipUntil(o=>!n.hasDescendant(o.key)).get(0)}getNode(r){return this.key===r?this:this.getDescendant(r)}getNodeAtPath(r){return r.length>0?this.getDescendantAtPath(r):this}getOffset(r){this.assertDescendant(r);let n=this.getFurthestAncestor(r),o=this.nodes.takeUntil(a=>a===n).reduce((a,i)=>a+i.text.length,0);return this.hasChild(r)?o:o+n.getOffset(r)}getOffsetAtRange(r){if(r=r.normalize(this),r.isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(r.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");let{startKey:n,startOffset:o}=r;return this.getOffset(n)+o}getParent(r){if(this.key===r)return null;let n=this.getPath(r);return n?this.getByPath(n.slice(0,-1)):null}refindPath(r,n){let o=this.getByPath(r);return o&&o.key===n?r:this.getPath(n)}refindNode(r,n){let o=this.getByPath(r);return o&&o.key===n?o:this.getByKey(n)}getPreviousBlock(r){let n=this.assertDescendant(r),o;n.object==="block"?o=n.getFirstText():o=this.getClosestBlock(r).getFirstText();let a=this.getPreviousText(o.key);return a?this.getClosestBlock(a.key):null}getPreviousSibling(r){let n=this.getParent(r),o=n.nodes.takeUntil(a=>a.key===r);if(o.size===n.nodes.size)throw new Error(`Could not find a child node with key "${r}".`);return o.last()}getPreviousText(r){return this.getTexts().takeUntil(n=>n.key===r).last()}getPreviousTextBeforeNode(r){let n=this.assertNode(r);return n.object==="text"?this.getPreviousText(n.key):this.getTexts().takeUntil(o=>n.hasDescendant(o.key)).last()}getSelectionIndexes(r,n=!0){let{startKey:o,endKey:a}=r;if(!n||r.isUnset)return null;if(o===a){let u=this.getFurthestAncestor(o),c=u?this.getChildIndex(u.key):null;return{start:c,end:c+1}}let i=null,s=null;return this.nodes.forEach((u,c)=>(u.object==="text"?(i==null&&u.key===o&&(i=c),s==null&&u.key===a&&(s=c+1)):(i==null&&u.hasDescendant(o)&&(i=c),s==null&&u.hasDescendant(a)&&(s=c+1)),i==null||s==null)),n&&i==null&&(i=0),n&&s==null&&(s=this.nodes.size),i==null?null:{start:i,end:s}}getText(r="",n=""){let o=!this.isInline()&&!this.isText()&&this.nodes.some(a=>a.object==="block")?r:n;return this.nodes.toArray().map(a=>a.getText(r,n)).join(o)}getTextAtOffset(r){if(r===0)return this.getFirstText();if(r===this.text.length)return this.getLastText();if(r<0||r>this.text.length)return null;let n=0;return this.getTexts().find((o,a,i)=>(n+=o.text.length,n>r))}getTextDirection(){let r=(0,sf.default)(this.text);return r==="neutral"?void 0:r}getTexts(){let r=this.getTextsAsArray();return new S(r)}getTextsAsArray(){let r=[];return this.nodes.concat(this.isBlock()?this.fragments.values():[]).forEach(n=>{n.object==="text"?r.push(n):Rt(r,n.getTextsAsArray())}),r}getTextsAtRange(r){if(r=r.normalize(this),r.isUnset)return S();let{startKey:n,endKey:o}=r;return new S(this.getTextsBetweenPositionsAsArray(n,o))}getTextsBetweenPositionsAsArray(r,n){let o=this.getDescendant(r);if(!o.isText())throw new Error(`Expected "${r}" to be a text`);if(r===n)return[o];let a=this.getDescendant(n);if(!a.isText())throw new Error(`Expected "${n}" to be a text`);let i=this.getTextsAsArray(),s=i.indexOf(o),u=i.indexOf(a,s);return i.slice(s,u+1)}getTextsAtRangeAsArray(r){if(r=r.normalize(this),r.isUnset)return[];let{startKey:n,endKey:o}=r;return this.getTextsBetweenPositionsAsArray(n,o)}hasChild(r){return!!this.getChild(r)}hasBlocks(r){let n=this.assertNode(r);return!!(n.nodes&&n.nodes.find(o=>o.object==="block"))}hasInlines(r){let n=this.assertNode(r);return!!(n.nodes&&n.nodes.find(o=>o.isInline||o.isText))}hasDescendant(r){let n=this.getPath(r);return n?n.length>0:!1}hasNode(r){return!!this.getNode(r)}hasNodeKeyConflict(r){if(this.key===r.key||this.hasNode(r.key))return!0;if(r.object==="text")return!1;let n=r.getKeysAsArray(),o=this.getKeysAsArray();return n.some(a=>o.includes(a))}hasVoidParent(r){return!!this.getClosestVoid(r)}isInFragment(r){var n;return((n=this.getFragmentParent(r))==null?void 0:n.object)==="fragment"}insertData(r,n){return this.merge({data:this.data.setIn(r,n)})}insertArrayData(r,n,o){let a=this.data.getIn(r);if(!Array.isArray(a))return this;let i=o>=-1?o:o+1,s=o===-1?a.concat(n):[...a.slice(0,i),n,...a.slice(i)];return this.merge({data:this.data.setIn(r,s)})}removeArrayData(r,n){let o=this.data.getIn(r);if(!Array.isArray(o))return this;let a=o.filter(i=>i!==n);return this.merge({data:this.data.setIn(r,a)})}removeData(r){return this.merge({data:this.data.removeIn(r)})}insertNode(r,n){n.object!=="text"&&(n=n.mapDescendants(a=>this.hasNode(a.key)?a.regenerateKey():a));let o=this.nodes.insert(r,n);return this.set("nodes",o)}isInRange(r){r=r.normalize(this);let n=this,{startKey:o,endKey:a,isCollapsed:i}=r;if(n.key===o||n.key===a||n.hasDescendant(o)||n.hasDescendant(a))return!0;if(i)return!1;let s=n.getTextsAtRange(r),u=!1;return s.forEach(c=>(n.hasDescendant(c.key)&&(u=!0),u)),u}isLeafBlock(){return this.object==="block"&&this.nodes.every(r=>r.object!=="block")}isLeafInline(){return this.object==="inline"&&this.nodes.every(r=>r.object!=="inline")}mergeNode(r,n){let o=this,a=o.nodes.get(r),i=o.nodes.get(n);if(a.object!==i.object)throw new Error(`Tried to merge two nodes of different objects: "${a.object}" and "${i.object}".`);if(a.object==="text")a=a.mergeText(i);else{let s=a.nodes.concat(i.nodes);a=a.set("nodes",s)}return o.removeNode(n).removeNode(r).insertNode(r,a)}mapChildren(r){let{nodes:n}=this;return n.forEach((o,a)=>{let i=r(o,a,this.nodes);i!==o&&(n=n.set(i.key,i))}),this.merge({nodes:n})}mapDescendants(r){let n=[],o,a=!1;return this.nodes&&this.nodes.forEach((i,s)=>{let u=i;u.object!=="text"&&(u=u.mapDescendants(r)),u=r(u,s,this.nodes),u&&n.push(u),u!==i&&(a=!0)}),this.isBlock()&&(o=[],this.fragments.toIndexedSeq().forEach((i,s)=>{let u=i;u=u.mapDescendants(r),u=r(u,s,this.fragments),u&&o.push(u),u!==i&&(a=!0)})),a?this.merge(_({nodes:S(n)},o?{fragments:Ce(o.map(i=>[i.fragmentKey,i]))}:{})):this}regenerateKey(){let r=ne();return this.merge({key:r})}regenerateTextKeys(){return this.mapDescendants(r=>r.object==="text"?r.regenerateKey():r)}regenerateAllKeys(){return this.regenerateKey().mapDescendants(n=>n.regenerateKey())}removeDescendant(r){let n=this,o=n.getParent(r);if(!o)throw new Error(`Could not find a descendant node with key "${r}".`);let a=o.getChildIndex(r),i=o.nodes.delete(a);return o=o.merge({nodes:i}),n=n.updateNode(o),n}removeNode(r){let n=this.nodes.delete(r);return this.merge({nodes:n})}splitNode(r,n,o=ne()){let a=this,i=a.nodes.get(r),s,u;if(i.object==="text")[s,u]=i.splitText(n);else{let l=i.nodes.take(n),h=i.nodes.skip(n);s=i.merge({nodes:l}),u=i.merge({nodes:h})}if(s.get("key")===o){let l=ne();xT.warning(`Passed key "${o}" is identical to the source node one. Generated a new one "${l}"."`),u=u.set("key",l)}else u=u.set("key",o);return a.removeNode(r).insertNode(r,u).insertNode(r,s)}updateNode(r){if(r.key===this.key)return r;let n=this.assertDescendant(r.key);return this.getAncestors(r.key).reverse().forEach(a=>{let{nodes:i,fragments:s}=a,u=a.getChildIndex(n.key);n=a,r.object==="fragment"&&a.fragments.has(r.fragmentKey)?(s=s.set(r.fragmentKey,r),a=a.set("fragments",s)):(i=i.set(u,r),a=a.set("nodes",i)),r=a}),r}toJS(){throw new Error("This method should not be used, instead use serialize/deserialize")}}}function Zt(t){if(t.object!=="text")throw new Error(`Expected node "${t.key}" to be a text`);return t}function zt(t,e=[]){(0,uf.default)(t.prototype,["areDescendantsSorted","getAncestors","getBlocksAsArray","getBlocksAtRangeAsArray","getBlocksByTypeAsArray","getLeafBlocksAsArray","getChild","getClosestBlock","getClosestInline","getClosestVoid","getCommonAncestor","getDepth","getDescendant","getDescendantAtPath","getFirstText","getFurthestBlock","getFurthestInline","getFurthestAncestor","getFurthestOnlyChildAncestor","getInlinesAtRangeAsArray","getMarksAsArray","getMarksAtPosition","getOrderedMarksBetweenPositions","getInsertMarksAtRange","getKeysAsArray","getLastText","getMarksByTypeAsArray","getNextBlock","getNextSibling","getNextText","getNode","getNodeAtPath","getOffset","getOffsetAtRange","getParent","getPath","getPreviousBlock","getPreviousSibling","getPreviousText","getText","getTextAtOffset","getTextDirection","getTextsAsArray","getTextsBetweenPositionsAsArray","isLeafBlock","isLeafInline","getLookupIndex","getIndexPairs",...e])}f();var hf=me(kr());f();f();var cf=me(kr()),ff=me(Yn());var z=class extends M({data:ce(),type:""}){get object(){return"mark"}static isMark(e){return ye("MARK",e)}static create(e={}){return z.isMark(e)?e:(typeof e=="string"&&(e={type:e}),new z(k(_({},e),{data:ce(e.data||{})})))}static createSet(e){if(!e)return F();if(F.isSet(e))return e;if(Array.isArray(e))return F(e.map(r=>z.create(r)));throw new Error(`\`Mark.createSet\` only accepts sets, arrays or null, but you passed it: ${e}`)}static createProperties(e={}){if(z.isMark(e))return{data:e.data,type:e.type};if(typeof e=="string")return{type:e};if((0,ff.default)(e)){let r={};return"type"in e&&(r.type=e.type),"data"in e&&(r.data=ee.create(e.data)),r}throw new Error(`\`Mark.createProperties\` only accepts objects, strings or marks, but you passed it: ${e}`)}static isMarkSet(e){return F.isSet(e)&&e.every(r=>z.isMark(r))}getComponent(e){return e.__getComponent(this)}};z.prototype[U.MARK]=!0;(0,cf.default)(z.prototype,["getComponent"]);f();var ei=me(lk());var lf=me(Yn());var no=ge("slate:range"),oe=class extends M({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:null,isFocused:!1,marks:null,isAtomic:!1,data:ce()}){get object(){return"range"}get isBlurred(){return!this.isFocused}get isCollapsed(){return this.anchorKey===this.focusKey&&this.anchorOffset===this.focusOffset}get isExpanded(){return!this.isCollapsed}get isForward(){return this.isBackward==null?null:!this.isBackward}get isSet(){return this.anchorKey!=null&&this.focusKey!=null}get isUnset(){return!this.isSet}get startKey(){return this.isBackward?this.focusKey:this.anchorKey}get startOffset(){return this.isBackward?this.focusOffset:this.anchorOffset}get endKey(){return this.isBackward?this.anchorKey:this.focusKey}get endOffset(){return this.isBackward?this.anchorOffset:this.focusOffset}static create(e={}){return oe.isRange(e)?e:new oe(k(_({},e),{data:ee.create(e.data||{}),marks:e.marks?z.createSet(e.marks):null}))}static createSet(e){if(!e)return F();if(F.isSet(e))return e;if(Array.isArray(e))return F(e.map(r=>oe.create(r)));throw new Error(`\`Range.createSet\` only accepts sets, arrays or null, but you passed it: ${e}`)}static createProperties(e={}){if(oe.isRange(e))return{anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isBackward:e.isBackward,isFocused:e.isFocused,marks:e.marks,isAtomic:e.isAtomic,data:e.data};if((0,lf.default)(e)){let r={};return"anchorKey"in e&&(r.anchorKey=e.anchorKey),"anchorOffset"in e&&(r.anchorOffset=e.anchorOffset),"focusKey"in e&&(r.focusKey=e.focusKey),"focusOffset"in e&&(r.focusOffset=e.focusOffset),"isBackward"in e&&(r.isBackward=e.isBackward),"isFocused"in e&&(r.isFocused=e.isFocused),"marks"in e&&(r.marks=e.marks?z.createSet(e.marks):null),"isAtomic"in e&&(r.isAtomic=e.isAtomic),"data"in e&&(r.data=ee.create(e.data)),r}throw new Error(`\`Range.createProperties\` only accepts objects or ranges, but you passed it: ${e}`)}static isRange(e){return!!(e&&e[U.RANGE])}hasAnchorAtStartOf(e){if(this.anchorOffset!==0)return!1;let r=oo(e);return this.anchorKey===r.key}hasAnchorAtEndOf(e){let r=ao(e);return this.anchorKey===r.key&&this.anchorOffset===r.text.length}hasAnchorBetween(e,r,n){return this.anchorOffset<=n&&r<=this.anchorOffset&&this.hasAnchorIn(e)}hasAnchorIn(e){return e.object==="text"?e.key===this.anchorKey:this.anchorKey!=null&&e.hasDescendant(this.anchorKey)}hasFocusAtEndOf(e){let r=ao(e);return this.focusKey===r.key&&this.focusOffset===r.text.length}hasFocusAtStartOf(e){if(this.focusOffset!==0)return!1;let r=oo(e);return this.focusKey===r.key}hasFocusBetween(e,r,n){return r<=this.focusOffset&&this.focusOffset<=n&&this.hasFocusIn(e)}hasFocusIn(e){return e.object==="text"?e.key===this.focusKey:this.focusKey!=null&&e.hasDescendant(this.focusKey)}hasOnlyNodeSelected(e){return this.isCollapsed&&this.hasFocusIn(e)}hasOnlyNodeFocused(e){return this.isFocused&&this.hasOnlyNodeSelected(e)}hasFocusInFragmentOf(e){if(!this.hasFocusIn(e))return null;let r=e.getAncestors(this.startKey);return r&&r.find(o=>o.object==="fragment")||null}isAtStartOf(e){return this.isCollapsed&&this.hasAnchorAtStartOf(e)}isAtEndOf(e){return this.isCollapsed&&this.hasAnchorAtEndOf(e)}focus(){return this.merge({isFocused:!0})}blur(){return this.merge({isFocused:!1})}deselect(){return this.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isFocused:!1,isBackward:!1,data:ce()})}flip(){return this.merge({anchorKey:this.focusKey,anchorOffset:this.focusOffset,focusKey:this.anchorKey,focusOffset:this.anchorOffset,isBackward:this.isBackward==null?null:!this.isBackward})}moveAnchor(e=1){let{anchorKey:r,focusKey:n,focusOffset:o,isBackward:a}=this,i=this.anchorOffset+e;return this.merge({anchorOffset:i,isBackward:r===n?i>o:a})}moveFocus(e=1){let{anchorKey:r,anchorOffset:n,focusKey:o,isBackward:a}=this,i=this.focusOffset+e;return this.merge({focusOffset:i,isBackward:o===r?n>i:a})}moveAnchorTo(e,r){let{anchorKey:n,focusKey:o,focusOffset:a,isBackward:i}=this;return this.merge({anchorKey:e,anchorOffset:r,isBackward:e===o?r>a:e===n?i:null})}moveFocusTo(e,r){let{focusKey:n,anchorKey:o,anchorOffset:a,isBackward:i}=this;return this.merge({focusKey:e,focusOffset:r,isBackward:e===o?a>r:e===n?i:null})}moveAnchorOffsetTo(e){return this.merge({anchorOffset:e,isBackward:this.anchorKey===this.focusKey?e>this.focusOffset:this.isBackward})}moveFocusOffsetTo(e){return this.merge({focusOffset:e,isBackward:this.anchorKey===this.focusKey?this.anchorOffset>e:this.isBackward})}moveOffsetsTo(e,r=e){return this.moveAnchorOffsetTo(e).moveFocusOffsetTo(r)}moveToAnchor(){return this.moveFocusTo(this.anchorKey,this.anchorOffset)}moveToFocus(){return this.moveAnchorTo(this.focusKey,this.focusOffset)}moveAnchorToStartOf(e){return e=oo(e),this.moveAnchorTo(e.key,0)}moveAnchorToEndOf(e){return e=ao(e),this.moveAnchorTo(e.key,e.text.length)}moveFocusToStartOf(e){return e=oo(e),this.moveFocusTo(e.key,0)}moveFocusToEndOf(e){return e=ao(e),this.moveFocusTo(e.key,e.text.length)}moveToRangeOf(e,r=e){return(this.isBackward?this.flip():this).moveAnchorToStartOf(e).moveFocusToEndOf(r)}normalize(e){let r=this,{anchorOffset:n,focusOffset:o,isBackward:a}=r,{anchorKey:i,focusKey:s}=r,u=typeof n,c=typeof o;if((u!=="number"||c!=="number")&&no.warning(`The range offsets should be numbers, but they were of type "${u}" and "${c}".`),i==null||s==null)return r.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:!1});let l=e.getDescendant(i),h=e.getDescendant(s);if(!l||!h){no.warning("The range was invalid and was reset. The range in question was:",r);let g=e.getFirstText();return r.merge({anchorKey:g?g.key:null,anchorOffset:0,focusKey:g?g.key:null,focusOffset:0,isBackward:!1})}if(l.object!=="text"){no.warning("The range anchor was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",l);let g=l.getTextAtOffset(n);n-=l.getOffset(g.key),l=g}if(h.object!=="text"){no.warning("The range focus was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",h);let g=h.getTextAtOffset(o);o-=h.getOffset(g.key),h=g}a==null&&(l.key===h.key?a=n>o:a=!e.areDescendantsSorted(l.key,h.key));let p=e.getDescendant(i),d=e.getDescendant(s);return n=(0,ei.default)(n,0,p.text.length),o=(0,ei.default)(o,0,d.text.length),r.merge({anchorKey:l.key,anchorOffset:n,focusKey:h.key,focusOffset:o,isBackward:a})}hasMoved(e){return!Re(this.merge({isFocused:!1,isBackward:!1,marks:null}),e.merge({isFocused:!1,isBackward:!1,marks:null}))}};oe.prototype[U.RANGE]=!0;var kT=[["move",""],["move","To"],["move","ToStartOf"],["move","ToEndOf"]];kT.forEach(([t,e])=>{oe.prototype[`${t}${e}`]=function(...r){return this[`${t}Anchor${e}`](...r)[`${t}Focus${e}`](...r)}});var TT=[["has","AtStartOf",!0],["has","AtEndOf",!0],["has","Between",!0],["has","In",!0],["collapseTo",""],["move",""],["moveTo",""],["move","To"],["move","OffsetTo"]];TT.forEach(([t,e,r])=>{let n=`${t}Anchor${e}`,o=`${t}Focus${e}`;oe.prototype[`${t}Start${e}`]=function(...a){return this.isBackward?this[o](...a):this[n](...a)},oe.prototype[`${t}End${e}`]=function(...a){return this.isBackward?this[n](...a):this[o](...a)},r&&(oe.prototype[`${t}Edge${e}`]=function(...a){return this[n](...a)||this[o](...a)})});var ST=[["collapseTo","moveTo"],["collapseToAnchor","moveToAnchor"],["collapseToFocus","moveToFocus"],["collapseToStart","moveToStart"],["collapseToEnd","moveToEnd"],["collapseToStartOf","moveToStartOf"],["collapseToEndOf","moveToEndOf"],["extend","moveFocus"],["extendTo","moveFocusTo"],["extendToStartOf","moveFocusToStartOf"],["extendToEndOf","moveFocusToEndOf"]];ST.forEach(([t,e])=>{oe.prototype[t]=function(...r){return this[e](...r)}});function oo(t){return t.object==="text"?t:"getFirstText"in t?t.getFirstText():null}function ao(t){return t.object==="text"?t:"getLastText"in t?t.getLastText():null}var B=class extends M({marks:F(),selections:F(),text:""}){get object(){return"leaf"}static isLeaf(e){return ye("LEAF",e)}static create(e={}){return typeof e=="string"?new B({text:e}):new B({text:e.text||"",marks:z.createSet(e.marks||[]),selections:oe.createSet(e.selections||[])})}static createLeaves(e){if(e.size<=1)return e;let r=!1,n=S().withMutations(o=>{e.findLast((a,i)=>{let s=o.first();if(s){if(s.marks.equals(a.marks)&&s.selections.equals(a.selections))return r=!0,o.set(0,s.set("text",`${a.text}${s.text}`)),!1;if(s.text==="")return r=!0,o.set(0,a),!1;if(a.text==="")return r=!0,!1}return o.unshift(a),!1})});return r?n:e}static splitLeaves(e,r){if(r<0)return[S(),e];if(e.size===0)return[S(),S()];let n=0,o=-1,a,i;return e.find(s=>{o++;let u=n,{text:c}=s;if(n+=c?c.length:0,n<r||u>r)return!1;let l=r-u;return a=s.set("text",c.slice(0,l)),i=s.set("text",c.slice(l)),!0}),a?a.text===""?o===0?[S.of(a),e]:[e.take(o),e.skip(o)]:i.text===""?o===e.size-1?[e,S.of(i)]:[e.take(o+1),e.skip(o+1)]:[e.take(o).push(a),e.skip(o+1).unshift(i)]:[e,S()]}static isLeafList(e){return S.isList(e)&&e.every(r=>B.isLeaf(r))}updateMark(e,r){let{marks:n}=this;if(r.equals(e))return this;if(!n.has(e))return this;let o=n.withMutations(a=>{a.remove(e).add(r)});return this.set("marks",o)}addMarks(e){let{marks:r}=this;return this.set("marks",r.union(e))}removeMark(e){let{marks:r}=this;return this.set("marks",r.remove(e))}addSelection(e){let{selections:r}=this;return this.set("selections",r.add(e))}};B.prototype[U.LEAF]=!0;var L=class extends M({leaves:S(),key:""}){constructor(){super(...arguments);this.type="text"}get object(){return"text"}get isEmpty(){return this.text===""}get text(){return this.getString()}static isText(e){return ye("TEXT",e)}static isTextList(e){return S.isList(e)&&e.every(r=>L.isText(r))}static create(e=""){return L.isText(e)?e:typeof e=="string"?new L({key:ne(),leaves:S([B.create(e)])}):"leaves"in e?new L({key:e.key||ne(),leaves:S.isList(e.leaves)?e.leaves:S(e.leaves||[])}):new L({key:e.key||ne(),leaves:S([B.create(e)])})}isText(){return!0}isBlock(){return!1}isInline(){return!1}getString(){return this.leaves.reduce((e,r)=>e+r.text,"")}getText(e="",r=""){return this.getString()}searchLeafAtOffset(e){let r=0,n=0,o=-1;return{leaf:this.leaves.find(i=>(o++,n=r,r=n+i.text.length,r>=e)),endOffset:r,index:o,startOffset:n}}addMark(e,r,n){let o=F.of(n);return this.addMarks(e,r,o)}addMarks(e,r,n){if(this.text===""&&r===0&&e===0){let{leaves:u}=this,c=u.first(null);if(!c)return this.set("leaves",S.of(B.create({text:"",marks:n})));let l=c.addMarks(n);return l===c?this:this.set("leaves",S.of(l))}if(this.text==="")return this;if(r===0)return this;if(e>=this.text.length)return this;let[o,a]=B.splitLeaves(this.leaves,e),[i,s]=B.splitLeaves(a,r);return this.setLeaves(o.concat(i.map(u=>u.addMarks(n)),s))}getLeaves(e=[],r=!1){let{leaves:n}=this;if(n.size===0)return S.of(B.create({}));if(!e||e.length===0||this.text.length===0)return n;let{key:o}=this;return e.forEach(a=>{let{startKey:i,endKey:s,startOffset:u,endOffset:c,marks:l}=a,h=i===o,p=s===o;if(h||p){let d=h?u:0,g=p?c-d:this.text.length-d;if(g<1||d>=this.text.length)return;if(d!==0||g<this.text.length){let[y,O]=B.splitLeaves(n,d),[T,A]=B.splitLeaves(O,g);n=y.concat(T.map(I=>(l&&l.size>0&&(I=I.addMarks(l)),r&&(I=I.addSelection(a)),I)),A);return}}n=n.map(d=>(l&&l.size>0&&(d=d.addMarks(l)),r&&(d=d.addSelection(a)),d))}),n===this.leaves?n:B.createLeaves(n)}getLeavesAndSelections(e,r){let n=this.getLeaves(e,!1);if(!r||r.size===0)return n;let o=this.getLeaves(r.toArray(),!0),{key:a}=this;return r.forEach(i=>{let{focusKey:s,focusOffset:u}=i;if(s===a)if(u!==0){let[l,h]=B.splitLeaves(o,u);o=l.push(i).concat(h)}else o=o.insert(0,i)}),o}getActiveMarksBetweenOffsets(e,r){if(e<=0&&r>=this.text.length)return this.getActiveMarks();if(e>=r)return F();if(this.text==="")return this.getActiveMarks();let n=null,o=0;return this.leaves.forEach(a=>{let i=o;if(o=i+a.text.length,!(o<=e)){if(i>=r)return!1;if(!n){n=a.marks;return}return n=n.intersect(a.marks),n&&n.size===0,!1}}),n||F()}getActiveMarks(){if(this.leaves.size===0)return F();let e=this.leaves.first(null).marks;return e.size===0?e:e.withMutations(r=>{this.leaves.forEach(n=>{if(r.intersect(n.marks),r.size===0)return!1})})}getMarksBetweenOffsets(e,r){if(e<=0&&r>=this.text.length)return this.getMarks();if(e>=r)return F();if(this.text==="")return this.getActiveMarks();let n=null,o=0;return this.leaves.forEach(a=>{let i=o;if(o=i+a.text.length,!(o<=e)){if(i>=r)return!1;if(!n){n=a.marks;return}n=n.union(a.marks)}}),n||F()}getMarks(){let e=this.getMarksAsArray();return Me(e)}getMarksAsArray(){if(this.leaves.size===0)return[];let e=this.leaves.first(null).marks;if(this.leaves.size===1)return e.toArray();let r=[];return this.leaves.forEach(n=>{r.push(n.marks.toArray())}),Array.prototype.concat.apply(e.toArray(),r)}getMarksAtIndex(e){let{leaf:r}=this.searchLeafAtOffset(e);return r?r.marks:F()}getNode(e){return this.key===e?this:null}hasNode(e){return!!this.getNode(e)}insertText(e,r,n=F()){if(this.text==="")return this.set("leaves",S.of(B.create({text:r,marks:n})));if(r.length===0)return this;let{startOffset:o,leaf:a,index:i}=this.searchLeafAtOffset(e),s=e-o,u=a.text.slice(0,s),c=a.text.slice(s),{leaves:l}=this;if(a.marks.equals(n))return this.set("leaves",l.set(i,a.set("text",u+r+c)));let h=l.splice(i,1,a.set("text",u),B.create({text:r,marks:n}),a.set("text",c));return this.setLeaves(h)}regenerateKey(){let e=ne();return this.merge({key:e})}removeMark(e,r,n){if(this.text===""&&e===0&&r===0){let c=this.leaves.first(null);if(!c)return this;let l=c.removeMark(n);return l===c?this:this.set("leaves",S.of(l))}if(r<=0)return this;if(e>=this.text.length)return this;let[o,a]=B.splitLeaves(this.leaves,e),[i,s]=B.splitLeaves(a,r),u=o.concat(i.map(c=>c.removeMark(n)),s);return this.setLeaves(u)}removeText(e,r){if(r<=0)return this;if(e>=this.text.length)return this;if(r===1){let{leaf:s,index:u,startOffset:c}=this.searchLeafAtOffset(e+1),l=e-c;if(s){if(s.text.length===1)return this.setLeaves(this.leaves.remove(u));let h=s.text.slice(0,l),p=s.text.slice(l+r),d=h+p;if(d.length>0)return this.set("leaves",this.leaves.set(u,s.set("text",d)))}}let[n,o]=B.splitLeaves(this.leaves,e),a=B.splitLeaves(o,r)[1],i=B.createLeaves(n.concat(a));if(i.size===1){let s=i.first(null);if(s.text==="")return this.set("leaves",S.of(s.set("marks",this.getActiveMarks())))}return this.merge({leaves:i})}updateMark(e,r,n,o){let a=n.merge(o);if(this.text===""&&r===0&&e===0){let h=this.leaves.first(null);if(!h)return this;let p=h.updateMark(n,a);return p===h?this:this.set("leaves",S.of(p))}if(r<=0)return this;if(e>=this.text.length)return this;let[i,s]=B.splitLeaves(this.leaves,e),[u,c]=B.splitLeaves(s,r),l=i.concat(u.map(h=>h.updateMark(n,a)),c);return this.setLeaves(l)}mapMark(e){return this.setLeaves(this.leaves.map(r=>r.merge({marks:r.marks.map(n=>e(n)).filter(Boolean)})))}splitText(e){let r=B.splitLeaves(this.leaves,e),n=this.set("leaves",r[0]),o=this.set("leaves",r[1]).regenerateKey();return[n,o]}splitBy(e){let n=this.getString().indexOf(e);if(n===-1)return[this];let[o,a]=this.splitText(n);return[o,...a.sliceText(e.length).splitBy(e)]}sliceText(e){let r=e,n=this.leaves.map(o=>{if(r<=0)return o;let a=Math.min(r,o.text.length);return r-=a,o.merge({text:o.text.slice(a)})});return this.merge({leaves:n})}mergeText(e){let r=this.leaves.concat(e.leaves);return this.setLeaves(r)}setLeaves(e){let r=B.createLeaves(e);if(r.size===1){let n=r.first(null);if((!n.marks||n.marks.size===0)&&n.text==="")return this.set("leaves",S())}return this.set("leaves",B.createLeaves(e))}toJS(){throw new Error("This method should not be used, instead use serialize/deserialize")}};L.prototype[U.TEXT]=!0;(0,hf.default)(L.prototype,["getActiveMarks","getMarks","getMarksAsArray","getString"]);var G=class extends qt({key:"",isVoid:!1,type:"",data:ce(),fragments:Ce(),nodes:S()}){get object(){return"block"}get dataRef(){return this.getDataRef()}get isEmpty(){return!this.isVoid&&!this.nodes.some(e=>!e.isEmpty)}get text(){return this.getText()}get blockNodes(){return this.nodes.size===0||!G.isBlock(this.nodes.get(0))?S():this.nodes}static create(e={}){return G.isBlock(e)?e:typeof e=="string"?new G({key:ne(),type:e}):new G({type:e.type||"",key:e.key||ne(),data:ee.create(e.data||{}),isVoid:e.isVoid||!1,fragments:Ce.isOrderedMap(e.fragments)?e.fragments:Ce((e.fragments||[]).map(r=>[r.fragmentKey,r])),nodes:S.isList(e.nodes)?e.nodes:S(e.nodes)})}static createVoid(e={}){return G.isBlock(e)?e.merge({isVoid:!0,nodes:S([L.create()])}):typeof e=="string"?new G({key:ne(),type:e,isVoid:!0,nodes:S([L.create()])}):G.create(_({isVoid:!0,nodes:S([L.create()])},e))}static isBlock(e){return ye("BLOCK",e)}static isBlockList(e){return S.isList(e)&&e.every(r=>G.isBlock(r))}setFragment(e){let r=this.fragments.set(e.fragmentKey,e);return this.merge({fragments:r})}insertFragment(e,r){if(this.hasFragment(e.fragmentKey)){if(e.fragment)throw new Error("Named fragment already exist");e=e.regenerateKey()}if(r>this.fragments.size)throw new Error(`The provided index (${r}) cannot be greater than the size of the map (${this.fragments.size})`);if(r===this.fragments.size)return this.setFragment(e);let n=this.fragments.slice(0,r),o=this.fragments.slice(r),a=n.set(e.fragmentKey,e).concat(o);return this.merge({fragments:a})}hasFragment(e){return this.fragments.has(e)}getFragmentByKey(e){return this.fragments.get(e)}removeFragmentByKey(e){let r=this.fragments.remove(e);return this.merge({fragments:r})}removeFragment(e){return this.removeFragmentByKey(e.fragmentKey)}};G.prototype[U.BLOCK]=!0;zt(G);f();var ae=class extends qt({key:"",data:ce(),nodes:S(),type:"",isVoid:!1}){get object(){return"inline"}get dataRef(){return this.getDataRef()}get isEmpty(){return!this.isVoid&&!this.nodes.some(e=>!e.isEmpty)}get text(){return this.getText()}static isInline(e){return ye("INLINE",e)}static isInlineList(e){return S.isList(e)&&e.every(r=>ae.isInline(r))}static create(e={}){return ae.isInline(e)?e:typeof e=="string"?new ae({key:ne(),type:e}):new ae(k(_({},e),{key:e.key||ne(),data:ee.create(e.data||{}),nodes:S(e.nodes||[])}))}static createVoid(e={}){return ae.isInline(e)?e.merge({isVoid:!0,nodes:S([L.create()])}):typeof e=="string"?new ae({key:ne(),type:e,isVoid:!0,nodes:S([L.create()])}):ae.create(_({isVoid:!0,nodes:S([L.create()])},e))}};ae.prototype[U.INLINE]=!0;zt(ae);function Qt(t={}){if(G.isBlock(t)||ae.isInline(t))return{key:t.key,data:t.data,fragments:t.fragments,isVoid:t.isVoid,type:t.type};if(typeof t=="string")return{type:t};if((0,pf.default)(t)){let e={};return"key"in t&&(e.key=t.key),"type"in t&&(e.type=t.type),"data"in t&&(e.data=ee.create(t.data)),"isVoid"in t&&(e.isVoid=t.isVoid),"fragments"in t&&(e.fragments=t.fragments),e}throw new Error(`\`Node.createProperties\` only accepts objects, strings, blocks or inlines, but you passed it: ${t}`)}var AT={length:void 0,mark:void 0,marks:void 0,newPath:void 0,node:void 0,offset:void 0,path:void 0,fragmentPath:void 0,position:void 0,properties:void 0,selection:void 0,target:void 0,text:void 0,type:void 0,data:void 0,dataPath:void 0,dataIndex:void 0,previousData:void 0},b=class extends M(AT){static create(e){switch(e.type){case"merge_node":case"split_node":return new b(k(_({},e),{properties:Qt(e.properties)}));case"set_node":return new b(k(_({},e),{properties:Qt(e.properties)}));default:return new b(e)}}static isOperation(e){return!!(e&&e[U.OPERATION])}get object(){return"operation"}};b.prototype[U.OPERATION]=!0;f();f();var NT=ge("slate:document"),ve=class extends qt({key:"",data:ce(),nodes:S()}){constructor(){super(...arguments);this.type=void 0}get object(){return"document"}get isEmpty(){return!this.nodes.some(e=>!e.isEmpty)}get text(){return this.getText()}static isDocument(e){return ye("DOCUMENT",e)}static create(e={}){return new ve({key:e.key||ne(),data:ee.create(e.data),nodes:S.isList(e.nodes)?e.nodes:S(e.nodes)})}getFragmentAtRange(e,r=!0){if(e=e.normalize(this),e.isUnset)return ve.create();let n=this,{startKey:o,startOffset:a,endKey:i,endOffset:s}=e,u=n.assertDescendant(o),c=n.assertDescendant(i);if(e.isCollapsed&&L.isText(u)&&u.isEmpty){let E=n.getParent(u.key);if(G.isBlock(E)&&E.isVoid)return ve.create({nodes:[E]})}let l=n.getFragmentParent(o),h=n.getFragmentParent(i);if((l==null?void 0:l.object)==="fragment"&&(h==null?void 0:h.object)==="fragment")if(l.key===h.key)n=l;else return null;let p=u,d,g,y=[];for(;g=n.getParent(p.key),!!g;){let E=g.getChildIndex(p.key),V=p.object==="text"?a:p.getChildIndex(d.key);g=g.splitNode(E,V),n=n.updateNode(g),d=g.nodes.get(E+1),y.unshift(d.key),p=g}p=o===i?n.getNextText(o):c;let O=[];for(;g=n.getParent(p.key),!!g;){let E=g.getChildIndex(p.key),V=p.object==="text"?o===i?s-a:s:p.getChildIndex(d.key);g=g.splitNode(E,V),n=n.updateNode(g),d=g.nodes.get(E+1),O.unshift(g.nodes.get(E).key),p=g}if(r){let E;if(y.forEach((V,Se)=>{if(O[Se]===V){let ie=n.getByKey(V);ie&&ie.object!=="text"&&ie.nodes.every(Tt=>G.isBlock(Tt))&&(E=ie)}}),E)return ve.create({nodes:E.nodes})}let T=n.getNextSibling(n.getFurthestAncestor(o).key),A=o===i?n.getNextSibling(T.key):n.getNextSibling(n.getFurthestAncestor(i).key),I=n.getChildIndex(T.key),w=n.getChildIndex(A.key),P=n.nodes.slice(I,w);return ve.create({nodes:P})}fixDuplicatedKeys(){let e=new Set;return this.mapDescendants(r=>(e.has(r.key)&&(NT.warning(`duplicated key "${r.key}" (object "${r.object}" and type "${r.type}")`),r=r.set("key",df(e,r.key))),e.add(r.key),r))}};function df(t,e,r=1){let n=e.match(/^(\S+)-(\d+)$/),o=`${e}-${r}`;return n&&(o=`${n[1]}-${r}`),t.has(o)?df(t,e,r+1):o}ve.prototype[U.DOCUMENT]=!0;zt(ve);f();var Fe=class extends qt({key:"",type:void 0,fragment:void 0,nodes:S()}){get object(){return"fragment"}get fragmentKey(){return this.fragment||this.key}get isEmpty(){return!this.nodes.some(e=>!e.isEmpty)}get text(){return this.getText()}static isFragment(e){return ye("FRAGMENT",e)}static create(e={}){let r=e.key||ne();return new Fe(k(_({key:r,fragment:r},e),{nodes:S.isList(e.nodes)?e.nodes:S(e.nodes||[])}))}};Fe.prototype[U.FRAGMENT]=!0;zt(Fe);f();f();var mx=me(gf()),ps=me(om()),ds=me(wi());f();f();var Om=ge("slate:operation:apply");function Kt(t,e,r){return t.selection&&e(t.selection)&&(t=t.set("selection",r(t.selection))),t}function _m(t,e){return Kt(t,({startKey:r,endKey:n})=>e.hasNode(r)||e.hasNode(n),r=>{let{startKey:n,endKey:o}=r,a=t.document.getPreviousTextBeforeNode(e.key),i=t.document.getNextTextAfterNode(e.key);return e.hasNode(n)&&(r=a?r.moveStartTo(a.key,a.text.length):i?r.moveStartTo(i.key,0):r.deselect()),e.hasNode(o)&&(r=a?r.moveEndTo(a.key,a.text.length):i?r.moveEndTo(i.key,0):r.deselect()),r.isSet?r.normalize(t.document):r})}function bm(t,e,r,n=null){return Kt(t,o=>{if(!o.isAtomic)return!1;let{startKey:a,startOffset:i,endKey:s,endOffset:u}=o;return a===e&&i<r&&(s!==e||u>r)||n&&a===e&&i<n&&(s!==e||u>n)},o=>o.deselect())}var cP={insert_node(t,e){let{path:r,node:n}=e,o=r[r.length-1],a=r.slice(0,-1),{document:i}=t;if(i.hasNodeKeyConflict(n))return Om.error(`skip insert_node, node "${n.key}" is conflicting with existing keys`),t;let s=i.assertPath(a);return s=s.insertNode(o,n),i=i.updateNode(s),t=t.set("document",i),t},remove_node(t,e){let{path:r}=e,{document:n}=t,{selection:o}=t,a=n.assertPath(r);o.isSet&&(t=_m(t,a));let i=n.getParent(a.key),s=i.getChildIndex(a.key);return i=i.removeNode(s),n=n.updateNode(i),t=t.set("document",n),t},move_node(t,e){let{path:r,newPath:n}=e,o=n[n.length-1],a=n.slice(0,-1),i=r.slice(0,-1),s=r[r.length-1],{document:u}=t,c=u.assertPath(r),l=u.getParent(c.key);l=l.removeNode(s),u=u.updateNode(l);let h;return i.every((p,d)=>p===a[d])&&i.length===a.length?h=l:(i.every((p,d)=>p===a[d])&&s<a[i.length]&&a[i.length]--,h=u.assertPath(a)),h=h.insertNode(o,c),u=u.updateNode(h),t=t.set("document",u),t},merge_node(t,e){let{path:r}=e,n=r.slice(0,r.length-1).concat([r[r.length-1]-1]),{document:o}=t,a=o.assertPath(n),i=o.assertPath(r),s=o.getParent(a.key),u=s.getChildIndex(a.key),c=s.getChildIndex(i.key);return s=s.mergeNode(u,c),o=o.updateNode(s),t=t.set("document",o),a.object==="text"&&(t=Kt(t,({anchorKey:l,focusKey:h})=>l===i.key||h===i.key,l=>(l.anchorKey===i.key&&(l=l.moveAnchorTo(a.key,a.text.length+l.anchorOffset)),l.focusKey===i.key&&(l=l.moveFocusTo(a.key,a.text.length+l.focusOffset)),l.normalize(o)))),t},split_node(t,e){let{path:r,position:n,properties:h}=e,p=h,{key:o}=p,a=ta(p,["key"]),{document:i}=t,s=i.assertPath(r),u=i.getParent(s.key),c=u.getChildIndex(s.key);if(u=u.splitNode(c,n,o),a){let d=u.nodes.get(c+1);d.object!=="text"&&(u=u.updateNode(d.merge(a)))}i=i.updateNode(u);let l=i.getNextText(s.key);return t=Kt(t,({startKey:d,startOffset:g,endKey:y,endOffset:O})=>s.key===d&&n<=g||s.key===y&&n<=O,d=>{let{startKey:g,startOffset:y,endKey:O,endOffset:T}=d,A=!1;return s.key===g&&n<=y&&(d=d.moveStartTo(l.key,y-n),A=!0),s.key===O&&n<=T&&(d=d.moveEndTo(l.key,T-n),A=!0),A?d.normalize(i):d}),t=t.set("document",i),t},set_node(t,e){let{path:r,properties:n}=e,{document:o}=t,a=o.assertPath(r);return a=a.merge(n),o=o.updateNode(a),t=t.set("document",o),t},set_fragment(t,e){let{node:r,path:n}=e,{document:o}=t,a=o.assertPath(n);return a=a.setFragment(r),o=o.updateNode(a),t=t.set("document",o),t},insert_fragment(t,e){let{node:r,path:n,fragmentPath:o}=e,{document:a}=t,i=o[o.length-1]-1,s=a.assertPath(n);return s=s.insertFragment(r,i),a=a.updateNode(s),t=t.set("document",a),t},remove_fragment(t,e){let{node:r,path:n}=e,{document:o,selection:a}=t,i=o.assertPath(n),s=i.getFragmentByKey(r.fragmentKey);return a.isSet&&(t=_m(t,s)),i=i.removeFragmentByKey(r.fragmentKey),o=o.updateNode(i),t=t.set("document",o),t},insert_text(t,e){let{path:r,offset:n,text:o,marks:a}=e,{document:i}=t,s=i.assertPath(r);return s=s.insertText(n,o,a),i=i.updateNode(s),t=t.set("document",i),t=bm(t,s.key,n),t=Kt(t,({anchorKey:u,anchorOffset:c,isBackward:l,isAtomic:h})=>u===s.key&&(c>n||c===n&&(!h||!l)),u=>u.moveAnchor(o.length)),t=Kt(t,({focusKey:u,focusOffset:c,isBackward:l,isAtomic:h})=>u===s.key&&(c>n||c===n&&(!h||l)),u=>u.moveFocus(o.length)),t},remove_text(t,e){let{path:r,offset:n,text:o}=e,{length:a}=o,i=n+a,{document:s}=t,u=s.assertPath(r);return t=bm(t,u.key,n,n+a),t=Kt(t,({anchorKey:c})=>c===u.key,c=>c.anchorOffset>=i?c.moveAnchor(-a):c.anchorOffset>n?c.moveAnchorTo(c.anchorKey,n):c),t=Kt(t,({focusKey:c})=>c===u.key,c=>c.focusOffset>=i?c.moveFocus(-a):c.focusOffset>n?c.moveFocusTo(c.focusKey,n):c),u=u.removeText(n,a),s=s.updateNode(u),t=t.set("document",s),t},add_mark(t,e){let{path:r,offset:n,length:o,mark:a}=e,{document:i}=t,s=i.assertPath(r);return s=s.addMark(n,o,a),i=i.updateNode(s),t=t.set("document",i),t},remove_mark(t,e){let{path:r,offset:n,length:o,mark:a}=e,{document:i}=t,s=i.assertPath(r);return s=s.removeMark(n,o,a),i=i.updateNode(s),t=t.set("document",i),t},set_mark(t,e){let{path:r,offset:n,length:o,mark:a,properties:i}=e,{document:s}=t,u=s.assertPath(r);return u=u.updateMark(n,o,a,i),s=s.updateNode(u),t=t.set("document",s),t},set_selection(t,e){let{properties:r}=e,u=r,{anchorPath:n,focusPath:o}=u,a=ta(u,["anchorPath","focusPath"]),{selection:i}=t,{document:s}=t;return n!==void 0&&(a.anchorKey=n==null?null:s.assertPath(n).key),o!==void 0&&(a.focusKey=o==null?null:s.assertPath(o).key),i=i.merge(a),i=i.normalize(s),t=t.set("selection",i),t},set_value_data(t,e){let{data:r}=e;return t=t.merge({data:r}),t},set_value(t,e){let{properties:r}=e;return t=t.merge(r),t},insert_data(t,e){let{path:r,data:n,dataPath:o}=e,{document:a}=t,i=a.assertPath(r);return i=i.insertData(o,n),a=a.updateNode(i),t=t.set("document",a),t},insert_array_data(t,e){let{data:r,dataPath:n,path:o,dataIndex:a}=e,{document:i}=t,s=i.assertPath(o);return s=s.insertArrayData(n,r,a),i=i.updateNode(s),t=t.set("document",i),t},remove_array_data(t,e){let{data:r,dataPath:n,path:o}=e,{document:a}=t,i=a.assertPath(o);return i=i.removeArrayData(n,r),a=a.updateNode(i),t=t.set("document",a),t},remove_data(t,e){let{path:r,data:n,dataPath:o}=e,{document:a}=t,i=a.assertPath(r);return i=i.removeData(o,n),a=a.updateNode(i),t=t.set("document",a),t},set_document(t,e){let{data:r}=e;return t=t.set("document",r).set("selection",t.selection.deselect()),t}};function xm(t,e){let{type:r}=e,n=cP[r];if(!n)throw new Error(`Unknown operation type: "${r}".`);return Om.debug(r,e),t=n(t,e),t}f();var So=me(wi());var km=ge("slate:operation:invert");function gt(t){let{type:e}=t;if(km.debug(e,t),e==="insert_node")return t.set("type","remove_node");if(e==="set_fragment"){let r=t.set("type","remove_fragment");return r.set("fragment",r.get("node").key)}if(e==="insert_fragment"){let r=t.set("type","remove_fragment");return r.set("fragment",r.get("node").key)}if(e==="remove_node")return t.set("type","insert_node");if(e==="remove_fragment")return t.set("type","insert_fragment").remove("fragment");if(e==="move_node"){let{newPath:r,path:n}=t,o=r,a=n,i=n.length-1,s=r.length-1;return n.length<o.length&&n.slice(0,i).every((c,l)=>c===o[l])&&n[i]<o[i]&&(o=o.slice(0,i).concat([o[i]-1]).concat(o.slice(i+1,o.length))),r.length<a.length&&r.slice(0,s).every((c,l)=>c===a[l])&&r[s]<=a[s]&&(a=a.slice(0,s).concat([a[s]+1]).concat(a.slice(s+1,a.length))),t.set("path",o).set("newPath",a)}if(e==="merge_node"){let{path:r}=t,{length:n}=r,o=n-1,a=r.slice(0,o).concat([r[o]-1]);return t.set("type","split_node").set("path",a)}if(e==="split_node"){let{path:r}=t,{length:n}=r,o=n-1,a=r.slice(0,o).concat([r[o]+1]);return t.set("type","merge_node").set("path",a)}if(e==="set_node"){let{properties:r,node:n}=t,o=n.merge(r),a=(0,So.default)(n,Object.keys(r));return t.set("node",o).set("properties",a)}if(e==="insert_text")return t.set("type","remove_text");if(e==="remove_text")return t.set("type","insert_text");if(e==="insert_data")return t.set("type","remove_data");if(e==="remove_data")return t.set("type","insert_data");if(e==="insert_array_data")return t.set("type","remove_array_data").remove("dataIndex");if(e==="remove_array_data")return t.set("type","insert_array_data").set("dataIndex",0);if(e==="add_mark")return t.set("type","remove_mark");if(e==="remove_mark")return t.set("type","add_mark");if(e==="set_mark"){let{properties:r,mark:n}=t,o=n.merge(r),a=(0,So.default)(n,Object.keys(r));return t.set("mark",o).set("properties",a)}if(e==="set_selection"){let{properties:r,selection:n}=t,o=n.merge(r),a=(0,So.default)(n,Object.keys(r));return t.set("selection",o).set("properties",a)}if(e==="set_value_data"){let{previousData:r,data:n}=t;return t.set("previousData",n).set("data",r)}if(e==="set_document")return km.error("Trying to invert a `set_document` operation which is forbidden."),t}f();f();var Bi=me(og());var oM=ge("slate:history"),aM=1e3,ar=class extends M({operations:it(),timestamp:0}){static create(e){return new ar({operations:it(e),timestamp:Date.now()})}push(e){return this.merge({operations:this.operations.push(e),timestamp:Date.now()})}shouldMerge(e){let r=this.operations.peek();return r?e.type==="set_selection"&&r.type==="set_selection"?!0:Date.now()-this.timestamp>aM?!1:!!(e.type==="insert_text"&&r.type==="insert_text"&&r.offset===e.offset+e.text.length&&(0,Bi.default)(e.path,r.path)||e.type==="remove_text"&&r.type==="remove_text"&&r.offset+r.text.length===e.offset&&(0,Bi.default)(e.path,r.path)):!1}shouldSkip(e){let r=this.operations.peek();return r?e.type==="set_selection"&&r.type==="set_selection":!1}},jt=class extends M({undos:it(),redos:it()}){get object(){return"history"}static isHistory(e){return ye("HISTORY",e)}static create(e={}){return new jt(e)}save(e,r={}){let n=this,{undos:o,redos:a}=n,{merge:i,skip:s}=r,u=o.peek();if(s==null&&(s=u?u.shouldSkip(e):!1),s)return n;if(i==null&&(i=u?u.shouldMerge(e):!1),oM.debug("save",{operation:e,merge:i}),i&&u){let c=u.push(e);o=o.pop(),o=o.push(c)}else{let c=ar.create([e]);o=o.push(c)}return o.size>100&&(o=o.take(100)),a=a.clear(),n=n.set("undos",o).set("redos",a),n}};jt.prototype[U.HISTORY]=!0;f();var Gg=me(kr()),is=me(kg()),$g=me(Hg());f();var ji="child_object_invalid",Vi="child_required",Ji="child_type_invalid",Ui="child_unknown",Hi="first_child_object_invalid",Gi="first_child_type_invalid",$i="last_child_object_invalid",Yi="last_child_type_invalid",Wi="node_data_invalid",Xi="node_is_void_invalid",Zi="node_mark_invalid",Qi="node_missing_fragment",es="node_text_invalid",ts="node_fragment_type_invalid",Io="node_unwanted_fragment",rs="parent_object_invalid",ns="parent_type_invalid",os="fragment_type_invalid",as="fragment_type_missing";var bD=ge("slate:schema"),ze=class extends M({validations:[],document:{},blocks:{},inlines:{}}){get object(){return"schema"}static create(e={}){return ze.isSchema(e)?e:new ze(e)}static isSchema(e){return!!(e&&e[U.SCHEMA])}static createNormalize(e){return(n,o,a)=>e[o]?e[o](n,a):void 0}combineWith(e){return Array.isArray(e)?e.reduce((r,n)=>r.combineWith(n),this):new ze({validations:[...this.validations,...e.validations],document:Yg(this.document,e.document),blocks:Wg(this.blocks,e.blocks),inlines:Wg(this.inlines,e.inlines)})}getFirstInvalidNode(e){if(L.isText(e))return this.validateNode(e)?e:null;let r=null;return e.nodes.concat(G.isBlock(e)?e.fragments.values():[]).find(n=>(r=this.validateNode(n)?n:this.getFirstInvalidNode(n),r)),r}getRule(e){switch(e.object){case"document":return this.document;case"block":return this.blocks[e.type];case"inline":return this.inlines[e.type]}}getParentRules(){let{blocks:e,inlines:r}=this,n={};for(let o of Object.keys(e)){let a=e[o];a.parent!=null&&(n[o]=a)}for(let o of Object.keys(r)){let a=r[o];a.parent!=null&&(n[o]=a)}return Object.keys(n).length===0?null:n}fail(e,r){return n=>{bD.debug("normalizing",{violation:e,context:r});let{rule:o}=r,{size:a}=n.operations;o.normalize&&o.normalize(n,e,r),!(n.operations.size>a)&&this.normalize(n,e,r)}}normalize(e,r,n){switch(r){case ji:case Ji:case Ui:case Hi:case Gi:case $i:case Yi:{let{child:o,node:a}=n;o.object==="text"&&a.object==="block"&&a.nodes.size===1?e.removeNodeByKey(a.key):e.removeNodeByKey(o.key);return}case Vi:case es:case rs:case ns:{let{node:o,fragmentParent:a}=n;if(o.object==="document"){o.nodes.forEach(i=>e.removeNodeByKey(i.key));return}else if(o.object==="fragment"){e.removeFragmentInParentByKey(a.key,o.fragmentKey);return}else{e.removeNodeByKey(o.key);return}}case Wi:{let{node:o,key:a}=n;o.data.get(a)===void 0&&o.object!=="document"?e.removeNodeByKey(o.key):e.setNodeByKey(o.key,{data:o.data.delete(a)});return}case Xi:{let{node:o}=n;e.setNodeByKey(o.key,{isVoid:!o.isVoid});return}case Zi:{let{node:o,mark:a}=n;o.getTexts().forEach(i=>e.removeMarkByKey(i.key,0,i.text.length,a));return}case Io:{let{node:o,key:a}=n;e.removeFragmentInParentByKey(o.key,a);return}case ts:{let{node:o,child:a}=n;e.removeFragmentInParentByKey(o.key,a.fragmentKey);return}case Qi:{let{node:o}=n;e.removeNodeByKey(o.key);return}case os:{let{node:o,child:a}=n;e.removeFragmentInParentByKey(o.key,a.fragmentKey);return}case as:{let{node:o}=n;e.removeNodeByKey(o.key);return}default:throw new Error(`Unhandled violation "${r}"`)}}validateNode(e){for(let a of this.validations){let i=a(e);if(i!=null)return i}if(e.object==="text")return;let r=this.getRule(e)||{},n=this.getParentRules(),o={node:e,rule:r};if(typeof r.isVoid!="undefined"&&e.isVoid!==r.isVoid)return this.fail(Xi,o);if(typeof r.data!="undefined")for(let a of Object.keys(r.data)){let i=r.data[a],s=e.data.get(a);if(!i(s))return this.fail(Wi,k(_({},o),{key:a,value:s}))}if(typeof r.marks!="undefined"){let a=e.getMarks().toArray();for(let i of a)if(!r.marks.some(s=>s.type===i.type))return this.fail(Zi,k(_({},o),{mark:i}))}if(typeof r.text!="undefined"){let{text:a}=e;if(!r.text.test(a))return this.fail(es,k(_({},o),{text:a}))}if(typeof r.nodes!="undefined"||n!=null){let a=this.validateNodes(e,n,r.nodes,o);if(a)return a}if(typeof r.first!="undefined"){let{objects:a,types:i}=r.first,s=e.nodes.first();if(s&&a&&!a.includes(s.object))return this.fail(Hi,k(_({},o),{child:s}));if(s&&i&&!i.includes(s.type))return this.fail(Gi,k(_({},o),{child:s}))}if(typeof r.last!="undefined"){let{objects:a,types:i}=r.last,s=e.nodes.last();if(s&&a&&!a.includes(s.object))return this.fail($i,k(_({},o),{child:s}));if(s&&i&&!i.includes(s.type))return this.fail(Yi,k(_({},o),{child:s}))}if(typeof r.fragments!="undefined"){if(!G.isBlock(e))throw new Error(`Cannot validate fragments on non-block ("${e.object}")`);if(typeof r.fragments.keys!="undefined"){let a=xD(r.fragments.keys,e);if(a){let i=e.fragments.keySeq().toArray(),s=(0,is.default)(i,Object.keys(a));if(s.length)return this.fail(Io,k(_({},o),{key:s[0]}));for(let[u,c]of Object.entries(a)){let l=e.getFragmentByKey(u);if(!l)return this.fail(Qi,k(_({},o),{key:u}));if(c&&l.type!==c)return this.fail(ts,k(_({},o),{key:u,child:l}))}}}if(typeof r.fragments.types!="undefined"){let a=Object.keys(r.fragments.types),i=e.fragments.valueSeq().toArray(),s=i.map(({type:c})=>c).reduce((c,l)=>(c[`${l}`]=(c[`${l}`]||0)+1,c),{}),u=(0,is.default)(Object.keys(s),a);if(u.length)return this.fail(os,k(_({},o),{child:i.find(({type:c})=>`${c}`===u[0])}));for(let[c,l]of Object.entries(r.fragments.types)){if(typeof l.min!="undefined"&&(s[c]||0)<l.min)return this.fail(as,k(_({},o),{type:c}));if(typeof l.max!="undefined"&&(s[c]||0)>l.max){let p=i.reverse().find(({type:d})=>`${d}`===c);return this.fail(Io,k(_({},o),{key:p.fragmentKey}))}}for(let c of e.fragments.values()){let l=r.fragments.types[c.type],h=typeof l.nodes!="undefined"?l.nodes:r.fragments.nodes,p=this.validateNodes(c,n,h,{rule:r,node:c,fragmentParent:e});if(p)return p}}if(typeof r.fragments.nodes!="undefined"&&typeof r.fragments.types=="undefined")for(let a of e.fragments.values()){let i=this.validateNodes(a,n,r.fragments.nodes,{rule:r,node:a,fragmentParent:e});if(i)return i}}}validateNodes(e,r,n,o){let a=e.nodes.toArray(),i=n!==void 0?n.slice():[],s,u,c,l,h,p;function d(){return s=s==null?null:0,l=i.shift(),u=l&&(!("min"in l)||l.min==null?0:l.min),h=l&&(!("max"in l)||l.max==null?1/0:l.max),!!l}function g(){return c=c==null?0:c+1,s=s==null?0:s+1,p=a[c],h!=null&&s===h&&d(),!!p}function y(){s-=1,c-=1}for(n!==void 0&&d();g();){if(r!=null&&p.object!=="text"&&p.type in r){let O=r[p.type];if(O.parent.objects!=null&&!O.parent.objects.includes(e.object))return this.fail(rs,{node:p,parent:e,rule:O});if(O.parent.types!=null&&!O.parent.types.includes(e.type))return this.fail(ns,{node:p,parent:e,rule:O})}if(n!==void 0){if(!l)return this.fail(Ui,k(_({},o),{child:p,index:c}));if("objects"in l&&l.objects!=null&&!l.objects.includes(p.object)){if(s>=u&&d()){y();continue}return this.fail(ji,k(_({},o),{child:p,index:c}))}if("types"in l&&l.types!=null&&!l.types.includes(p.type)){if(s>=u&&d()){y();continue}return this.fail(Ji,k(_({},o),{child:p,index:c}))}}}if(n!==void 0)for(;u!=null;){if(s<u)return this.fail(Vi,k(_({},o),{index:c}));d()}}};function xD(t,e){let r=typeof t=="function"?t(e):t;return Array.isArray(r)?r.reduce((n,o)=>(n[o]=void 0,n),{}):r}function Yg(t,e){let r=_({},t);return(0,$g.default)(r,e,kD),r}function Wg(t,e){let r=_({},t);for(let n in e)e.hasOwnProperty(n)&&(r[n]=r[n]?Yg(r[n],e[n]):e[n]);return r}function kD(t,e,r){return r==="normalize"&&e&&t?(n,o,a)=>{let i=n.operations.size;t(n,o,a),!(n.operations.size>i)&&e(n,o,a)}:r==="objects"||r==="types"||r==="marks"?t==null?e:t.concat(e):e==null?t:e}ze.prototype[U.SCHEMA]=!0;(0,Gg.default)(ze.prototype,["getParentRules","getFirstInvalidNode","validateNode"]);f();f();function ss(t){return["insert_text","remove_text"].includes(t.type)}function us(t){return["add_mark","set_mark","remove_mark"].includes(t.type)}function TD(t){return["insert_fragment","set_fragment","remove_fragment"].includes(t.type)}function SD(t){return["insert_data","remove_data"].includes(t.type)}function AD(t){return["insert_array_data","remove_array_data"].includes(t.type)}function Xg(t,e){return t.length===e.length&&t.every((r,n)=>r===e[n])}function x(t,e){let{offset:r,length:n,text:o,path:a}=t,{type:i,path:s}=e,u=ss(t)||us(t),c=[...u?[...a].splice(0,a.length-1):a];if(ss(e)||us(e)||i==="set_node"||i==="set_selection"||a.length===0)return[t];let l=[...a],h=r,p=n,d=o,g=s.length-1,y=v.isEqual(s,c),O=v.isYounger(s,c),T=v.isAbove(s,c);if(i==="insert_node"&&(y||O||T)&&(l=v.increment(a,1,g)),i==="remove_node"&&(O?l=v.decrement(a,1,g):(y||T)&&(l=null)),i==="move_node"){let{newPath:A}=e;if(v.isEqual(s,A))return[t];if(v.isAbove(s,a))l=[...A,...a.slice(s.length-a.length)];else if(v.isEqual(s,a))l=A;else{let I=A.length-1;if(v.isYounger(s,a)){l=v.decrement(a,1,g);let w=[...A];v.isYounger(s,A)&&!v.isSibling(s,A)&&(w=v.decrement(w,1,g));let P=v.isEqual(w,l),E=v.isAbove(w,l),V=v.isYounger(w,l);(P||E||V)&&(l=v.increment(l,1,I))}else{let w=v.isEqual(A,a),P=v.isAbove(A,a),E=v.isYounger(A,a);(w||P||E)&&(l=v.increment(l,1,I))}}}if(i==="split_node")if(u){if(v.isYounger(s,a))l=v.increment(a,1,g);else if(v.isAbove(s,a)&&a[s.length]>=e.position)l=v.increment(l,1,g),l=v.decrement(l,e.position,s.length);else if(v.isEqual(s,a)){let A=o?o.length:n,I=r+A;if(e.position<r)l=v.increment(a,1,g),h=r-e.position;else if(I>e.position){let w=a,P=r,E=e.position-r,V=o?o.slice(0,E):null,Se=v.increment(a,1,g),H=0,ie=A-E,Tt=o?o.slice(-ie):null;return[b.create(k(_({},t.toJSON()),{path:w,offset:P,length:E,text:V})),b.create(k(_({},t.toJSON()),{path:Se,offset:H,length:ie,text:Tt}))]}}}else(T||O||y)&&(l=v.increment(a,1,g));return i==="merge_node"&&(O||y)&&(l=v.decrement(a,1,g)),l?[b.create(k(_({},t.toJSON()),{path:l,offset:h,length:p,text:d}))]:[]}function R(t,e,r){if(!TD(e))return[t];let{type:n,path:o,fragmentPath:a}=t,{type:i,path:s,fragmentPath:u}=e,c=v.isEqual(o,s),l=ss(t)||us(t);if(i==="insert_fragment"&&n==="insert_fragment"&&c){let h=v.isEqual(u,a);if(v.isYounger(u,a)||h&&r==="right"){let d=u.length-1,g=v.increment(a,1,d);return[b.create(k(_({},t.toJSON()),{fragmentPath:g}))]}}if(i==="set_fragment"&&u){let h=v.isAbove(u,o);if(l&&h)return[]}if(i==="remove_fragment"){if(l){let h=v.isAbove(u,o),p=v.isYounger(u,o);if(h)return[];if(p){let d=u.length-1,g=v.decrement(o,1,d);return[b.create(k(_({},t.toJSON()),{path:g}))]}}if(n==="remove_fragment"&&v.isEqual(a,u))return[]}return[t]}function Ye(t,e,r){if(!SD(e))return[t];let{type:n,path:o,dataPath:a}=t,{type:i,path:s,dataPath:u}=e,c=v.isEqual(o,s),l=Xg(a,u);return i==="insert_data"&&n==="insert_data"&&c&&l&&r==="right"?[]:[t]}function We(t,e,r){if(!AD(e))return[t];let{type:n,path:o,dataPath:a}=t,{type:i,path:s,dataPath:u}=e,c=v.isEqual(o,s),l=Xg(a,u);return i==="insert_array_data"&&n==="insert_array_data"&&c&&l&&r==="right"?[]:[t]}function cs(t){let e=[],r=[];return t.forEach(n=>{["merge_node","split_node"].includes(n.type)?r.push(n):(r.length>0&&(e.push(r),r=[]),e.push([n]))}),r.length>0&&e.push(r),e}function Zg(t,e){return v.compare(t.get("path"),e.get("path"))===0?t.get("offset")+t.get("length")<=e.get("offset")?[t]:t.get("offset")<e.get("offset")?[b.create({object:"operation",type:"add_mark",path:t.get("path"),offset:t.get("offset"),length:t.get("length")+e.get("text").length,mark:t.get("mark"),data:t.get("data")})]:[b.create({object:"operation",type:"add_mark",path:t.get("path"),offset:t.get("offset")+e.get("text").length,length:t.get("length"),mark:t.get("mark"),data:t.get("data")})]:[t]}function Qg(t,e){if(v.compare(t.get("path"),e.get("path"))===0){let n=t.get("offset"),o=t.get("length"),a=n+o,i=e.get("offset"),s=e.get("text").length,u=i+s;if(a<=i)return[t];if(u<=n)return[b.create({object:"operation",type:"add_mark",path:t.get("path"),offset:t.get("offset")-e.get("text").length,length:t.get("length"),mark:t.get("mark"),data:t.get("data")})];{let c=Math.max(n,i),l=Math.min(a,u);if(c<=l){let h=l-c,p=o-h,d=0;return n<i?d=n:a>u?d=i:d=n+h,[b.create({object:"operation",type:"add_mark",path:t.get("path"),offset:d,length:p,mark:t.get("mark"),data:t.get("data")})]}}}return[t]}function ey(t,e){return[t]}function ty(t,e){return[t]}function ry(t,e){return x(t,e)}function ny(t,e){return x(t,e)}function oy(t,e){return x(t,e)}function ay(t,e){return x(t,e)}function iy(t,e){let r=[t];for(let n=0;n<e.length;n++){let o=e[n];if(v.isEqual(o.path,r[0].path)&&o.position===r[0].offset+r[0].length)return r;r=r.map(a=>x(a,o)).flat()}return r}function sy(t,e){let[r]=x(t,e[0]);return e.length>1&&v.isSibling(e[1].path,r.path)?[r.set("offset",r.offset+e[1].position)]:[r]}function uy(t,e){return R(t,e)}function cy(t,e){return R(t,e)}function fy(t,e){return R(t,e)}function ly(t,e){return[t]}function hy(t,e){return[t]}function py(t,e){return[t]}function dy(t,e){return[t]}f();function my(t,e){return[t]}function gy(t,e){return[t]}function yy(t,e){return[t]}function vy(t,e){return[t]}function Oy(t,e){return x(t,e)}function _y(t,e){return x(t,e)}function by(t,e){return x(t,e)}function xy(t,e){return x(t,e)}function ky(t,e){let r=e.length-1;return x(t,e[r])}function Ty(t,e){return x(t,e[0])}function Sy(t,e){return R(t,e)}function Ay(t,e){return R(t,e)}function Ny(t,e){return R(t,e)}function Iy(t,e){return Ye(t,e)}function Ry(t,e){return Ye(t,e)}function Cy(t,e,r){return We(t,e,r)}function wy(t,e){return We(t,e)}f();function Fy(t,e){return[t]}function Ey(t,e){return[t]}function Py(t,e){return[t]}function My(t,e){return[t]}function Dy(t,e){return x(t,e)}function By(t,e){return x(t,e)}function qy(t,e){return x(t,e)}function zy(t,e){return x(t,e)}function Ly(t,e){let r=e.length-1;return x(t,e[r])}function Ky(t,e){return x(t,e[0])}function jy(t,e){return R(t,e)}function Vy(t,e){return R(t,e)}function Jy(t,e){return R(t,e)}function Uy(t,e,r){return Ye(t,e,r)}function Hy(t,e){return Ye(t,e)}function Gy(t,e){return We(t,e)}function $y(t,e){return We(t,e)}f();function Yy(t,e){return[t]}function Wy(t,e){return[t]}function Xy(t,e){return[t]}function Zy(t,e){return[t]}function Qy(t,e){return x(t,e)}function ev(t,e){return x(t,e)}function tv(t,e){return x(t,e)}function rv(t,e){return x(t,e)}function nv(t,e){let r=e.length-1;return x(t,e[r])}function ov(t,e){return x(t,e[0])}function av(t,e,r){return R(t,e,r)}function iv(t,e){return R(t,e)}function sv(t,e){return R(t,e)}function uv(t,e){return[t]}function cv(t,e){return[t]}f();function fv(t,e){return[t]}function lv(t,e){return[t]}function hv(t,e){return[t]}function pv(t,e){return[t]}function dv(t,e,r){return(v.compare(t.get("path"),e.get("path"))===0||t.get("path").size===0&&e.get("path").size===0)&&r==="left"?[t]:x(t,e)}function mv(t,e){return v.isAbove(e.path,t.path)?[]:v.isEqual(e.path,t.path)?[t]:x(t,e)}function gv(t,e){return x(t,e)}function yv(t,e){return x(t,e)}function vv(t,e){let r=e.length-1;return x(t,e[r])}function Ov(t,e){if(e.length>1){let r=t.path.length-1,n=t.path[r];if(e[1].path[r]===n-1)return[t]}return x(t,e[0])}function _v(t,e){return[t]}function bv(t,e){return[t]}function xv(t,e){return[t]}function kv(t,e){return[t]}function Tv(t,e){return[t]}function Sv(t,e){return[t]}function Av(t,e){return[t]}f();function Nv(t,e,r){return v.compare(t.get("path"),e.get("path"))===0?t.get("offset")<e.get("offset")||t.get("offset")===e.get("offset")&&r==="left"?[t]:[b.create({object:"operation",type:"insert_text",path:t.get("path"),offset:t.get("offset")+e.get("text").length,text:t.get("text"),marks:t.get("marks"),data:t.get("data")})]:[t]}function Iv(t,e){if(v.isEqual(t.get("path"),e.get("path"))){let n=t.get("offset"),o=e.get("offset"),a=e.get("text").length,i=o+a;return o<n&&n<i?[]:n<=o?[t]:n>=i?[b.create({object:"operation",type:"insert_text",path:t.get("path"),offset:t.get("offset")-e.get("text").length,text:t.get("text"),marks:t.get("marks"),data:t.get("data")})]:[b.create({object:"operation",type:"insert_text",path:t.get("path"),offset:Math.max(n-a,0),text:t.get("text"),marks:t.get("marks"),data:t.get("data")})]}return[t]}function Rv(t,e){if(v.compare(t.get("path"),e.get("path"))===0){if(t.get("offset")<=e.get("offset"))return[t];if(t.get("offset")>=e.get("offset")+e.get("length"))return[t];{let n=e.get("mark"),o=t.get("marks");return o=o.add(z.create({type:n.type,data:{}})),[b.create({object:"operation",type:"insert_text",path:t.get("path"),offset:t.get("offset"),text:t.get("text"),marks:o,data:t.get("data")})]}}return[t]}function Cv(t,e){if(v.compare(t.get("path"),e.get("path"))===0){if(t.get("offset")<=e.get("offset"))return[t];if(t.get("offset")>=e.get("offset")+e.get("length"))return[t];{let n=e.get("mark"),o=t.get("marks").filterNot(a=>a.get("type")===n.get("type"));return[b.create({object:"operation",type:"insert_text",path:t.get("path"),offset:t.get("offset"),text:t.get("text"),marks:o,data:t.get("data")})]}}return[t]}function wv(t,e){return x(t,e)}function Fv(t,e){return x(t,e)}function Ev(t,e){return x(t,e)}function Pv(t,e){return x(t,e)}function Mv(t,e){let r=[t];for(let n=0;n<e.length;n++){let o=e[n];if(v.isEqual(o.path,r[0].path)&&o.position===r[0].offset)return r;r=r.map(a=>x(a,o)).flat()}return r}function Dv(t,e){let[r]=x(t,e[0]);return e.length>1&&v.isSibling(e[1].path,r.path)&&e[1].position<t.offset?[r.set("offset",r.offset+e[1].position)]:[r]}function Bv(t,e){return R(t,e)}function qv(t,e){return R(t,e)}function zv(t,e){return R(t,e)}function Lv(t,e){return[t]}function Kv(t,e){return[t]}function fs(t,e){return[t]}function ls(t,e){return[t]}f();function jv(t,e){if(t.length===1)return t;let r=t[0],n=t[1],o=v.isSibling(e.path,n.path),a=v.isYounger(e.path,n.path);if(o&&a&&n.position>=e.offset){let i=e.text.length,s=n.position+i;return[r,n.set("position",s)]}return t}function Vv(t,e){if(t.length===1)return t;let r=t[0],n=t[1];if(v.isSibling(e.path,n.path)&&v.isYounger(e.path,n.path)&&n.position>=e.offset){let o=e.text.length,a=n.position-o;return[b.create(_({},r.toJS())),b.create(k(_({},n.toJS()),{position:a}))]}return t}function Jv(t,e){return t}function Uv(t,e){return t}function Hv(t,e){if(t.length===1)return ND(t[0],e);let r=t[0],n=e.path,o=n.length-1;return v.isEqual(n,r.path)?[b.create({object:"operation",type:"move_node",path:v.increment(r.path,1,o),newPath:r.path}),...t]:v.isYounger(n,r.path)?t.map(a=>b.create(k(_({},a.toJS()),{path:v.increment(a.path,1,o)}))):t}function ND(t,e){let r=t.path,n=e.path;if(v.isEqual(n,r)||v.isYounger(n,r)||v.isAbove(n,r)){let o=n.length-1;return[b.create(k(_({},t.toJS()),{path:v.increment(r,1,o)}))]}return[t]}function Gv(t,e){if(t.length===1)return ID(t[0],e);let r=t[0],n=t[1],o=e.path;if(v.isEqual(o,r.path)||v.isAbove(o,n.path))return[];if(v.isYounger(o,n.path)){let a=o.length-1;return t.map(i=>b.create(k(_({},i.toJS()),{path:v.decrement(i.path,1,a)})))}return t}function ID(t,e){let r=t.path,n=e.path;if(v.isEqual(n,r)||v.isAbove(n,r))return[];if(v.isYounger(n,r)){let o=n.length-1;return[b.create(k(_({},t.toJS()),{path:v.decrement(r,1,o)}))]}return[t]}function $v(t,e){if(t.length===1)return RD(t[0],e);let r=t[0].path,n=t[1].path,o=e.path,a=e.newPath,i=o.length-1,s=a.length-1;if(v.isEqual(o,r))return[gt(e),...t];if(v.isAbove(o,n)){let d=v.increment(a,1,s);return[b.create({type:"move_node",path:o,newPath:d}),b.create(k(_({},t[0].toJS()),{path:d})),x(t[1],e)[0]]}let u=v.isBefore(o,r),c=o.length<r.length;if(u&&c&&v.isEqual(a,r)){let d=v.decrement(a,1,i),g=v.increment(d,1,s);return[b.create({object:"operation",type:"move_node",path:d,newPath:g}),b.create(k(_({},t[0].toJS()),{path:v.decrement(r,1,i)})),b.create(k(_({},t[1].toJS()),{path:v.decrement(n,1,i)}))]}let l=v.isSibling(o,r),p=v.isBefore(o,n)&&(l||o.length===1&&r.length===1);return!p&&v.isEqual(a,r)?[b.create({object:"operation",type:"move_node",path:a,newPath:v.increment(a,1,s)}),...t]:p&&v.isAbove(a,n)?[b.create({object:"operation",type:"move_node",path:a,newPath:v.increment(a,1,s)}),b.create(k(_({},t[0].toJS()),{path:v.decrement(r,1,s)})),b.create(k(_({},t[1].toJS()),{path:v.decrement(n,1,s)}))]:[x(t[0],e)[0],x(t[1],e)[0]]}function RD(t,e){return x(t,e)}function Yv(t,e){return t}function Wv(t,e){if(t.length===1&&e.length>1)return CD(t[0],e);if(e.length===1&&t.length>1)return wD(t,e[0]);if(t.length===1&&e.length===1)return FD(t[0],e[0]);let r=t[0],n=t[1],o=e[0],a=e[1],i=a.path.length-1;return v.isYounger(a.path,n.path)?t.map(s=>b.create(k(_({},s.toJS()),{path:v.increment(s.path,1,i)}))):v.isAbove(a.path,n.path)&&v.isYounger(o.path,n.path)?[b.create(k(_({},r.toJS()),{path:v.increment(r.path,1,i)})),b.create(k(_({},n.toJS()),{path:v.increment(n.path,1,i),position:n.position-a.target}))]:t}function CD(t,e){let r=t.path,n=e[0].path,o=e[1].path,a=o.length-1;return v.isYounger(n,r)||v.isYounger(o,r)?[b.create(k(_({},t.toJS()),{path:v.increment(r,1,a)}))]:[t]}function wD(t,e){let r=t[1].path,n=e.path,o=n.length-1;return v.isYounger(n,r)?t.map(a=>a.path[o]===void 0?a:b.create(k(_({},a.toJS()),{path:v.increment(a.path,1,o)}))):t}function FD(t,e){let r=e.path.length-1;return v.isYounger(e.path,t.path)?[b.create(k(_({},t.toJS()),{path:v.increment(t.path,1,r)}))]:[t]}function Xv(t,e){if(t.length===1)return ED(t[0],e);if(e.length===1)return PD(t,e[0]);let r=t[0],n=t[1],o=e[0],a=o.path.length-1,i=e[1];return v.isYounger(o.path,n.path)?t.map(s=>b.create(k(_({},s.toJS()),{path:v.decrement(s.path,1,a)}))):v.isAbove(o.path,n.path)?[b.create(k(_({},r.toJS()),{path:v.decrement(r.path,1,a)})),b.create(k(_({},n.toJS()),{path:v.decrement(n.path,1,a),position:n.position+i.position}))]:v.isEqual(o.path,r.path)?[]:t}function ED(t,e){let r=t.path,n=e[0].path,o=n.length-1;return v.isYounger(n,r)||v.isAbove(n,r)?[b.create(k(_({},t.toJS()),{path:v.decrement(r,1,o)}))]:[t]}function PD(t,e){return t}function Zv(t,e){return t}function Qv(t,e){return t}function eO(t,e){return t}function tO(t,e){return t}function rO(t,e){return t}function nO(t,e){return t}function oO(t,e){return t}f();function aO(t,e){return[t]}function iO(t,e){return[t]}function sO(t,e){return[t]}function uO(t,e){return[t]}function cO(t,e){let r=x(t,e);if(r[0]){let n=x(b.create(k(_({},t.toJS()),{path:t.newPath})),e);if(n[0])return[b.create(k(_({},r[0].toJS()),{newPath:n[0].path}))]}return[]}function fO(t,e){let r=x(t,e);if(r[0]){let n=x(b.create(k(_({},t.toJS()),{path:t.newPath})),e);if(n[0])return[b.create(k(_({},r[0].toJS()),{newPath:n[0].path}))]}return[]}function lO(t,e){let r=x(t,e);if(r[0]){let n=x(b.create(k(_({},t.toJS()),{path:t.newPath})),e);if(n[0])return[b.create(k(_({},r[0].toJS()),{newPath:n[0].path}))]}return[]}function hO(t,e){return x(t,e)}function pO(t,e){let r=e[e.length-1],n=r.path;if(v.isEqual(n,t.path))return[...e.reverse().map(gt),t];let o=x(t,r);if(o[0]){let a=x(b.create(k(_({},t.toJS()),{path:t.newPath})),r);if(a[0])return[b.create(k(_({},o[0].toJS()),{newPath:a[0].path}))]}return[]}function dO(t,e){let r=t.path;if(v.isEqual(r,e[0].path)||e.length>1&&v.isEqual(r,e[1].path))return e.reverse().map(gt).concat(t);if(!v.isAbove(r,e[0].path)&&e.length>1&&v.isAbove(r,e[1].path))return e.reverse().map(gt).concat(t);let n=x(t,e[0]);if(n[0]){let o=x(b.create(k(_({},t.toJS()),{path:t.newPath})),e[0]);if(o[0])return[b.create(k(_({},n[0].toJS()),{newPath:o[0].path}))]}return[]}function mO(t,e){return[t]}function gO(t,e){return[t]}function yO(t,e){return[t]}function vO(t,e){return[t]}function OO(t,e){return[t]}function _O(t,e){return[t]}function bO(t,e){return[t]}f();function xO(t,e){return[t]}function kO(t,e){return[t]}function TO(t,e){return[t]}function SO(t,e){return[t]}function AO(t,e){return x(t,e)}function NO(t,e){return x(t,e)}function IO(t,e){return x(t,e)}function RO(t,e){return x(t,e)}function CO(t,e){let r=e.length-1;return x(t,e[r])}function wO(t,e){return x(t,e[0])}function FO(t,e){return R(t,e)}function EO(t,e){return R(t,e)}function PO(t,e){return R(t,e)}function MO(t,e){return Ye(t,e)}function DO(t,e){return Ye(t,e)}function BO(t,e,r){return We(t,e,r)}function qO(t,e){return We(t,e)}f();function zO(t,e){return[t]}function LO(t,e){return[t]}function KO(t,e){return[t]}function jO(t,e){return[t]}function VO(t,e){return x(t,e)}function JO(t,e){return x(t,e)}function UO(t,e){return x(t,e)}function HO(t,e){return x(t,e)}function GO(t,e){let r=e.length-1;return x(t,e[r])}function $O(t,e){return x(t,e[0])}function YO(t,e){return R(t,e)}function WO(t,e){return R(t,e)}function XO(t,e){return R(t,e)}function ZO(t,e){return Ye(t,e)}function QO(t,e){return Ye(t,e)}function e_(t,e){return We(t,e)}function t_(t,e){return We(t,e)}f();function r_(t,e){return[t]}function n_(t,e){return[t]}function o_(t,e){return[t]}function a_(t,e){return[t]}function i_(t,e){return x(t,e)}function s_(t,e){return x(t,e)}function u_(t,e){return x(t,e)}function c_(t,e){return x(t,e)}function f_(t,e){let r=e.length-1;return x(t,e[r])}function l_(t,e){return x(t,e[0])}function h_(t,e){return R(t,e)}function p_(t,e){return R(t,e)}function d_(t,e){return R(t,e)}function m_(t,e){return[t]}function g_(t,e){return[t]}function y_(t,e){return[t]}function v_(t,e){return[t]}f();function O_(t,e){return v.compare(t.get("path"),e.get("path"))===0?t.get("offset")+t.get("length")<=e.get("offset")?[t]:t.get("offset")<e.get("offset")?[b.create({object:"operation",type:"remove_mark",path:t.get("path"),offset:t.get("offset"),length:t.get("length")+e.get("text").length,mark:t.get("mark"),data:t.get("data")})]:[b.create({object:"operation",type:"remove_mark",path:t.get("path"),offset:t.get("offset")+e.get("text").length,length:t.get("length"),mark:t.get("mark"),data:t.get("data")})]:[t]}function __(t,e){if(v.compare(t.get("path"),e.get("path"))===0){let n=t.get("offset"),o=t.get("length"),a=n+o,i=e.get("offset"),s=e.get("text").length,u=i+s;if(a<=i)return[t];if(u<=n)return[b.create({object:"operation",type:"remove_mark",path:t.get("path"),offset:t.get("offset")-e.get("text").length,length:t.get("length"),mark:t.get("mark"),data:t.get("data")})];{let c=Math.max(n,i),l=Math.min(a,u);if(c<=l){let h=l-c,p=o-h,d=0;return n<i?d=n:a>u?d=i:d=n+h,[b.create({object:"operation",type:"remove_mark",path:t.get("path"),offset:d,length:p,mark:t.get("mark"),data:t.get("data")})]}}}return[t]}function b_(t,e){return[t]}function x_(t,e){return[t]}function k_(t,e){return x(t,e)}function T_(t,e){return x(t,e)}function S_(t,e){return x(t,e)}function A_(t,e){return x(t,e)}function N_(t,e){let r=[t];for(let n=0;n<e.length;n++){let o=e[n];if(v.isEqual(o.path,r[0].path)&&o.position===r[0].offset+r[0].length)return r;r=r.map(a=>x(a,o)).flat()}return r}function I_(t,e){let[r]=x(t,e[0]);return e.length>1&&v.isSibling(e[1].path,r.path)?[r.set("offset",r.offset+e[1].position)]:[r]}function R_(t,e){return R(t,e)}function C_(t,e){return R(t,e)}function w_(t,e){return R(t,e)}function F_(t,e){return[t]}function E_(t,e){return[t]}function P_(t,e){return[t]}function M_(t,e){return[t]}f();function D_(t,e){return[t]}function B_(t,e){return[t]}function q_(t,e){return[t]}function z_(t,e){return[t]}function L_(t,e){return x(t,e)}function K_(t,e){return x(t,e)}function j_(t,e){return v.isAbove(t.path,e.path)&&!v.isSibling(e.path,e.newPath)?[t,b.create(k(_({},t.toJS()),{path:e.newPath}))]:x(t,e)}function V_(t,e){return x(t,e)}function J_(t,e){let r=e.length-1;return v.isEqual(e[r].path,t.path)?[b.create(_({},t.toJS())),b.create(k(_({},t.toJS()),{path:[4]}))]:x(t,e[r])}function U_(t,e){let r=t.path,n=e[0].path,[,o]=v.crop(r,e[e.length-1].path);return v.isEqual(r,n)||v.isEqual(r,o)?e.reverse().map(gt).concat(t):x(t,e[0])}function H_(t,e){return[t]}function G_(t,e){return[t]}function $_(t,e){return[t]}function Y_(t,e){return[t]}function W_(t,e){return[t]}function X_(t,e){return[t]}function Z_(t,e){return[t]}f();function Q_(t,e){if(v.compare(t.get("path"),e.get("path"))===0){let n=t.get("text").length,o=t.get("offset"),a=o+n,i=e.get("offset");if(a<=i)return[t];if(o>=i)return[b.create({object:"operation",type:"remove_text",path:t.get("path"),offset:t.get("offset")+e.get("text").length,text:t.get("text"),marks:t.get("marks"),data:t.get("data")})];let s=i-o,u=t.get("text").slice(0,s),c=t.get("text").slice(s,n);return[b.create({object:"operation",type:"remove_text",path:t.get("path"),offset:t.get("offset"),text:u+e.get("text")+c,marks:t.get("marks"),data:t.get("data")})]}return[t]}function eb(t,e,r){if(v.isEqual(t.get("path"),e.get("path"))){let o=t.get("text").length,a=t.get("offset"),i=a+o,s=e.get("text").length,u=e.get("offset"),c=u+s;if(a===u&&o===s)return r==="left"?[t]:[];if(u<=a&&i<=c)return[];if(i<=u)return[t];if(a>=c)return[b.create({object:"operation",type:"remove_text",path:t.get("path"),offset:a-s,text:t.get("text"),marks:t.get("marks"),data:t.get("data")})];let l=Math.max(u-a,0),h=t.get("text").slice(0,l),p=Math.min(o,o-(i-c)),d=t.get("text").slice(p,o);return[b.create({object:"operation",type:"remove_text",path:t.get("path"),offset:t.get("offset")-Math.max(0,a-u),text:h+d,marks:t.get("marks"),data:t.get("data")})]}return[t]}function tb(t,e){return[t]}function rb(t,e){return[t]}function nb(t,e){return x(t,e)}function ob(t,e){return x(t,e)}function ab(t,e){return x(t,e)}function ib(t,e){return x(t,e)}function sb(t,e){let r=[t];for(let n=0;n<e.length;n++){let o=e[n];if(v.isEqual(o.path,r[0].path)&&o.position===r[0].offset+r[0].text.length)return r;r=r.map(a=>x(a,o)).flat()}return r}function ub(t,e){let[r]=x(t,e[0]);return e.length>1&&v.isSibling(e[1].path,r.path)?[r.set("offset",r.offset+e[1].position)]:[r]}function cb(t,e){return R(t,e)}function fb(t,e){return R(t,e)}function lb(t,e){return R(t,e)}function hb(t,e){return[t]}function pb(t,e){return[t]}function db(t,e){return[t]}function mb(t,e){return[t]}f();function gb(t,e){return[t]}function yb(t,e){return[t]}function vb(t,e){return[t]}function Ob(t,e){return[t]}function _b(t,e){return x(t,e)}function bb(t,e){return x(t,e)}function xb(t,e){return x(t,e)}function kb(t,e){return x(t,e)}function Tb(t,e){let r=e.length-1;return x(t,e[r])}function Sb(t,e){return x(t,e[0])}function Ab(t,e){return R(t,e)}function Nb(t,e){return R(t,e)}function Ib(t,e){return R(t,e)}function Rb(t,e){return[t]}function Cb(t,e){return[t]}function wb(t,e){return[t]}function Fb(t,e){return[t]}f();function Eb(t,e){return[t]}function Pb(t,e){return[t]}function Mb(t,e){return[t]}function Db(t,e){return[t]}function Bb(t,e){return x(t,e)}function qb(t,e){return x(t,e)}function zb(t,e){return x(t,e)}function Lb(t,e){return[t]}function Kb(t,e){let r=e.length-1;return v.isEqual(e[r].path,t.path)?[b.create(_({},t.toJS())),b.create(k(_({},t.toJS()),{path:[4]}))]:x(t,e[r])}function jb(t,e){return v.isEqual(t.path,e[0].path)?[]:x(t,e[0])}function Vb(t,e){return[t]}function Jb(t,e){return[t]}function Ub(t,e){return[t]}function Hb(t,e){return[t]}function Gb(t,e){return[t]}function $b(t,e){return[t]}function Yb(t,e){return[t]}f();function Wb(t,e){let r=t[0],n=t[1],o=t[2];if(v.isEqual(r.path,e.path)&&r.position>=e.offset){let a=e.text.length,i=r.position+a;return[b.create(k(_({},r.toJS()),{position:i})),...n?[b.create(k(_({},n.toJS()),{target:n.target+a}))]:[],...o?[o]:[]]}return t}function Xb(t,e){let r=t[0],n=t[1],o=t[2];if(v.isEqual(e.path,r.path)){let a=r.position,i=e.text.length,s=e.offset,u=e.offset+i,c=a;a>u?c=r.position-i:a>s&&(c=s);let l=c;return[b.create(k(_({},r.toJS()),{position:c})),...n?[b.create(k(_({},n.toJS()),{target:l}))]:[],...o?[o]:[]]}return t}function Zb(t,e){return t}function Qb(t,e){return t}function ex(t,e){let r=t[t.length-1],n=e.path,o=n.length-1;return v.isYounger(n,r.path)||v.isEqual(n,r.path)||v.isAbove(n,r.path)?t.map(a=>b.create(k(_({},a.toJS()),{path:v.increment(a.path,1,o)}))):t}function tx(t,e){let r=t[t.length-1],n=e.path,o=n.length-1;return v.isEqual(n,r.path)||v.isAbove(n,r.path)?[]:v.isYounger(n,r.path)?t.map(a=>b.create(k(_({},a.toJS()),{path:v.decrement(a.path,1,o)}))):t}function rx(t,e){let r=t[0],n=t[1],o=t[2],a=n.path;if(v.isEqual(a,e.path)){let i=b.create(k(_({},r.toJS()),{path:[...e.newPath,0]})),s=b.create(k(_({},n.toJS()),{path:[...e.newPath]}));return[i,s]}return[x(r,e)[0],x(n,e)[0],...o?x(o,e):[]]}function nx(t,e){return t}function ox(t,e){let r=t[0],n=t[1],o=t[2],a=o||n,i=e[0],s=e[1],u=e[2],c=u||s,l=c.path.length-1;if(v.isBefore(c.path,a.path)&&v.isYounger(c.path,a.path))return t.map(h=>b.create(k(_({},h.toJS()),{path:v.increment(h.path,1,l)})));if(v.isEqual(c.path,a.path)&&r.position>=i.position){let h=r.position-i.position;return[b.create(k(_({},r.toJS()),{path:v.increment(r.path,1,l),position:h})),b.create(k(_({},n.toJS()),{path:v.increment(n.path,1,l),target:h})),...o?[b.create(k(_({},o.toJS()),{path:v.increment(o.path,1,l)}))]:[]]}return t}function ax(t,e){let r=t[0],n=t[1],o=t[2],a=e[0],i=e[1],s=a.path.length-1;if(v.isBefore(a.path,n.path)&&v.isYounger(a.path,n.path))return t.map(u=>b.create(k(_({},u.toJS()),{path:v.decrement(u.path,1,s)})));if(v.isEqual(n.path,a.path)){let u=r.position+i.position;return[b.create(k(_({},r.toJS()),{path:v.decrement(r.path,1,s),position:u})),b.create(k(_({},n.toJS()),{path:v.decrement(n.path,1,s),target:u})),...o?[b.create(k(_({},o.toJS()),{path:v.increment(o.path,1,s)}))]:[]]}return t}function ix(t,e){return t}function sx(t,e){return t}function ux(t,e){return t}function cx(t,e){return t}function fx(t,e){return t}function lx(t,e){return t}function hx(t,e){return t}var MD=ge("slate:operation:transform");function hs(t,e,r="left"){if(t.length===0||e.length===0||t[0].get("type")==="set_selection"||e[0].get("type")==="set_selection")return t;let n=t[0].type,o=e[0].type;if(o==="set_document")return[];switch(n){case"insert_text":switch(o){case"insert_text":return Nv(t[0],e[0],r);case"remove_text":return Iv(t[0],e[0]);case"add_mark":return Rv(t[0],e[0]);case"remove_mark":return Cv(t[0],e[0]);case"insert_node":return wv(t[0],e[0]);case"remove_node":return Fv(t[0],e[0]);case"move_node":return Ev(t[0],e[0]);case"set_node":return Pv(t[0],e[0]);case"split_node":return Mv(t[0],e);case"merge_node":return C(n,t.length,o,e.length),Dv(t[0],e);case"insert_fragment":return Bv(t[0],e[0]);case"set_fragment":return qv(t[0],e[0]);case"remove_fragment":return zv(t[0],e[0]);case"insert_data":return Lv(t[0],e[0]);case"remove_data":return Kv(t[0],e[0]);case"insert_array_data":return fs(t[0],e[0]);case"remove_array_data":return ls(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_text":switch(o){case"insert_text":return Q_(t[0],e[0]);case"remove_text":return eb(t[0],e[0],r);case"add_mark":return tb(t[0],e[0]);case"remove_mark":return rb(t[0],e[0]);case"insert_node":return nb(t[0],e[0]);case"remove_node":return ob(t[0],e[0]);case"move_node":return ab(t[0],e[0]);case"set_node":return ib(t[0],e[0]);case"split_node":return sb(t[0],e);case"merge_node":return C(n,t.length,o,e.length),ub(t[0],e);case"insert_fragment":return cb(t[0],e[0]);case"set_fragment":return fb(t[0],e[0]);case"remove_fragment":return lb(t[0],e[0]);case"insert_data":return hb(t[0],e[0]);case"remove_data":return pb(t[0],e[0]);case"insert_array_data":return db(t[0],e[0]);case"remove_array_data":return mb(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"add_mark":switch(o){case"insert_text":return Zg(t[0],e[0]);case"remove_text":return Qg(t[0],e[0]);case"add_mark":return ey(t[0],e[0]);case"remove_mark":return ty(t[0],e[0]);case"insert_node":return ry(t[0],e[0]);case"remove_node":return ny(t[0],e[0]);case"move_node":return oy(t[0],e[0]);case"set_node":return ay(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),iy(t[0],e);case"merge_node":return C(n,t.length,o,e.length),sy(t[0],e);case"insert_fragment":return uy(t[0],e[0]);case"set_fragment":return cy(t[0],e[0]);case"remove_fragment":return fy(t[0],e[0]);case"insert_data":return ly(t[0],e[0]);case"remove_data":return hy(t[0],e[0]);case"insert_array_data":return py(t[0],e[0]);case"remove_array_data":return dy(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_mark":switch(o){case"insert_text":return O_(t[0],e[0]);case"remove_text":return __(t[0],e[0]);case"add_mark":return b_(t[0],e[0]);case"remove_mark":return x_(t[0],e[0]);case"insert_node":return k_(t[0],e[0]);case"remove_node":return T_(t[0],e[0]);case"move_node":return S_(t[0],e[0]);case"set_node":return A_(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),N_(t[0],e);case"merge_node":return C(n,t.length,o,e.length),I_(t[0],e);case"insert_fragment":return R_(t[0],e[0]);case"set_fragment":return C_(t[0],e[0]);case"remove_fragment":return w_(t[0],e[0]);case"insert_data":return F_(t[0],e[0]);case"remove_data":return E_(t[0],e[0]);case"insert_array_data":return P_(t[0],e[0]);case"remove_array_data":return M_(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"insert_node":switch(o){case"insert_text":return fv(t[0],e[0]);case"remove_text":return lv(t[0],e[0]);case"add_mark":return hv(t[0],e[0]);case"remove_mark":return pv(t[0],e[0]);case"insert_node":return dv(t[0],e[0],r);case"remove_node":return mv(t[0],e[0]);case"move_node":return gv(t[0],e[0]);case"set_node":return yv(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),vv(t[0],e);case"merge_node":return C(n,t.length,o,e.length),Ov(t[0],e);case"insert_fragment":return _v(t[0],e[0]);case"set_fragment":return bv(t[0],e[0]);case"remove_fragment":return xv(t[0],e[0]);case"insert_data":return kv(t[0],e[0]);case"remove_data":return Tv(t[0],e[0]);case"insert_array_data":return Sv(t[0],e[0]);case"remove_array_data":return Av(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_node":switch(o){case"insert_text":return D_(t[0],e[0]);case"remove_text":return B_(t[0],e[0]);case"add_mark":return q_(t[0],e[0]);case"remove_mark":return z_(t[0],e[0]);case"insert_node":return L_(t[0],e[0]);case"remove_node":return K_(t[0],e[0]);case"move_node":return j_(t[0],e[0]);case"set_node":return V_(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),J_(t[0],e);case"merge_node":return C(n,t.length,o,e.length),U_(t[0],e);case"insert_fragment":return H_(t[0],e[0]);case"set_fragment":return G_(t[0],e[0]);case"remove_fragment":return $_(t[0],e[0]);case"insert_data":return Y_(t[0],e[0]);case"remove_data":return W_(t[0],e[0]);case"insert_array_data":return X_(t[0],e[0]);case"remove_array_data":return Z_(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"set_node":switch(o){case"insert_text":return Eb(t[0],e[0]);case"remove_text":return Pb(t[0],e[0]);case"add_mark":return Mb(t[0],e[0]);case"remove_mark":return Db(t[0],e[0]);case"insert_node":return Bb(t[0],e[0]);case"remove_node":return qb(t[0],e[0]);case"move_node":return zb(t[0],e[0]);case"set_node":return Lb(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),Kb(t[0],e);case"merge_node":return C(n,t.length,o,e.length),jb(t[0],e);case"insert_fragment":return Vb(t[0],e[0]);case"set_fragment":return Jb(t[0],e[0]);case"remove_fragment":return Ub(t[0],e[0]);case"insert_data":return Hb(t[0],e[0]);case"remove_data":return Gb(t[0],e[0]);case"insert_array_data":return $b(t[0],e[0]);case"remove_array_data":return Yb(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"move_node":switch(o){case"insert_text":return aO(t[0],e[0]);case"remove_text":return iO(t[0],e[0]);case"add_mark":return sO(t[0],e[0]);case"remove_mark":return uO(t[0],e[0]);case"insert_node":return cO(t[0],e[0]);case"remove_node":return fO(t[0],e[0]);case"move_node":return lO(t[0],e[0]);case"set_node":return hO(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),pO(t[0],e);case"merge_node":return C(n,t.length,o,e.length),dO(t[0],e);case"insert_fragment":return mO(t[0],e[0]);case"set_fragment":return gO(t[0],e[0]);case"remove_fragment":return yO(t[0],e[0]);case"insert_data":return vO(t[0],e[0]);case"remove_data":return OO(t[0],e[0]);case"insert_array_data":return _O(t[0],e[0]);case"remove_array_data":return bO(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"split_node":switch(o){case"insert_text":return C(n,t.length,o,e.length),Wb(t,e[0]);case"remove_text":return C(n,t.length,o,e.length),Xb(t,e[0]);case"add_mark":return Zb(t,e[0]);case"remove_mark":return Qb(t,e[0]);case"insert_node":return C(n,t.length,o,e.length),ex(t,e[0]);case"remove_node":return C(n,t.length,o,e.length),tx(t,e[0]);case"set_node":return nx(t,e[0]);case"split_node":return C(n,t.length,o,e.length),ox(t,e);case"merge_node":return C(n,t.length,o,e.length),ax(t,e);case"move_node":return C(n,t.length,o,e.length),rx(t,e[0]);case"insert_fragment":return ix(t,e[0]);case"set_fragment":return sx(t,e[0]);case"remove_fragment":return ux(t,e[0]);case"insert_data":return cx(t,e[0]);case"remove_data":return fx(t,e[0]);case"insert_array_data":return lx(t,e[0]);case"remove_array_data":return hx(t,e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"merge_node":switch(o){case"insert_text":return C(n,t.length,o,e.length),jv(t,e[0]);case"remove_text":return C(n,t.length,o,e.length),Vv(t,e[0]);case"add_mark":return Jv(t,e[0]);case"remove_mark":return Uv(t,e[0]);case"insert_node":return C(n,t.length,o,e.length),Hv(t,e[0]);case"remove_node":return C(n,t.length,o,e.length),Gv(t,e[0]);case"set_node":return Yv(t,e[0]);case"split_node":return C(n,t.length,o,e.length),Wv(t,e);case"merge_node":return C(n,t.length,o,e.length),Xv(t,e);case"move_node":return C(n,t.length,o,e.length),$v(t,e[0]);case"insert_fragment":return Zv(t,e[0]);case"set_fragment":return Qv(t,e[0]);case"remove_fragment":return eO(t,e[0]);case"insert_data":return tO(t,e[0]);case"remove_data":return rO(t,e[0]);case"insert_array_data":return nO(t,e[0]);case"remove_array_data":return oO(t,e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"insert_fragment":switch(o){case"insert_text":return Yy(t[0],e[0]);case"remove_text":return Wy(t[0],e[0]);case"add_mark":return Xy(t[0],e[0]);case"remove_mark":return Zy(t[0],e[0]);case"insert_node":return Qy(t[0],e[0]);case"remove_node":return ev(t[0],e[0]);case"move_node":return tv(t[0],e[0]);case"set_node":return rv(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),nv(t[0],e);case"merge_node":return C(n,t.length,o,e.length),ov(t[0],e);case"insert_fragment":return av(t[0],e[0],r);case"set_fragment":return iv(t[0],e[0]);case"remove_fragment":return sv(t[0],e[0]);case"insert_data":return uv(t[0],e[0]);case"remove_data":return cv(t[0],e[0]);case"insert_array_data":return fs(t[0],e[0]);case"remove_array_data":return ls(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"set_fragment":switch(o){case"insert_text":return gb(t[0],e[0]);case"remove_text":return yb(t[0],e[0]);case"add_mark":return vb(t[0],e[0]);case"remove_mark":return Ob(t[0],e[0]);case"insert_node":return _b(t[0],e[0]);case"remove_node":return bb(t[0],e[0]);case"move_node":return xb(t[0],e[0]);case"set_node":return kb(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),Tb(t[0],e);case"merge_node":return C(n,t.length,o,e.length),Sb(t[0],e);case"insert_fragment":return Ab(t[0],e[0]);case"set_fragment":return Nb(t[0],e[0]);case"remove_fragment":return Ib(t[0],e[0]);case"insert_data":return Rb(t[0],e[0]);case"remove_data":return Cb(t[0],e[0]);case"insert_array_data":return wb(t[0],e[0]);case"remove_array_data":return Fb(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_fragment":switch(o){case"insert_text":return r_(t[0],e[0]);case"remove_text":return n_(t[0],e[0]);case"add_mark":return o_(t[0],e[0]);case"remove_mark":return a_(t[0],e[0]);case"insert_node":return i_(t[0],e[0]);case"remove_node":return s_(t[0],e[0]);case"move_node":return u_(t[0],e[0]);case"set_node":return c_(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),f_(t[0],e);case"merge_node":return C(n,t.length,o,e.length),l_(t[0],e);case"insert_fragment":return h_(t[0],e[0]);case"set_fragment":return p_(t[0],e[0]);case"remove_fragment":return d_(t[0],e[0]);case"insert_data":return m_(t[0],e[0]);case"remove_data":return g_(t[0],e[0]);case"insert_array_data":return y_(t[0],e[0]);case"remove_array_data":return v_(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"insert_data":switch(o){case"insert_text":return Fy(t[0],e[0]);case"remove_text":return Ey(t[0],e[0]);case"add_mark":return Py(t[0],e[0]);case"remove_mark":return My(t[0],e[0]);case"insert_node":return Dy(t[0],e[0]);case"remove_node":return By(t[0],e[0]);case"move_node":return qy(t[0],e[0]);case"set_node":return zy(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),Ly(t[0],e);case"merge_node":return C(n,t.length,o,e.length),Ky(t[0],e);case"insert_fragment":return jy(t[0],e[0]);case"set_fragment":return Vy(t[0],e[0]);case"remove_fragment":return Jy(t[0],e[0]);case"insert_data":return Uy(t[0],e[0],r);case"remove_data":return Hy(t[0],e[0]);case"insert_array_data":return Gy(t[0],e[0]);case"remove_array_data":return $y(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_data":switch(o){case"insert_text":return zO(t[0],e[0]);case"remove_text":return LO(t[0],e[0]);case"add_mark":return KO(t[0],e[0]);case"remove_mark":return jO(t[0],e[0]);case"insert_node":return VO(t[0],e[0]);case"remove_node":return JO(t[0],e[0]);case"move_node":return UO(t[0],e[0]);case"set_node":return HO(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),GO(t[0],e);case"merge_node":return C(n,t.length,o,e.length),$O(t[0],e);case"insert_fragment":return YO(t[0],e[0]);case"set_fragment":return WO(t[0],e[0]);case"remove_fragment":return XO(t[0],e[0]);case"insert_data":return ZO(t[0],e[0]);case"remove_data":return QO(t[0],e[0]);case"insert_array_data":return e_(t[0],e[0]);case"remove_array_data":return t_(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"insert_array_data":switch(o){case"insert_text":return my(t[0],e[0]);case"remove_text":return gy(t[0],e[0]);case"add_mark":return yy(t[0],e[0]);case"remove_mark":return vy(t[0],e[0]);case"insert_node":return Oy(t[0],e[0]);case"remove_node":return _y(t[0],e[0]);case"move_node":return by(t[0],e[0]);case"set_node":return xy(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),ky(t[0],e);case"merge_node":return C(n,t.length,o,e.length),Ty(t[0],e);case"insert_fragment":return Sy(t[0],e[0]);case"set_fragment":return Ay(t[0],e[0]);case"remove_fragment":return Ny(t[0],e[0]);case"insert_data":return Iy(t[0],e[0]);case"remove_data":return Ry(t[0],e[0]);case"insert_array_data":return Cy(t[0],e[0],r);case"remove_array_data":return wy(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_array_data":switch(o){case"insert_text":return xO(t[0],e[0]);case"remove_text":return kO(t[0],e[0]);case"add_mark":return TO(t[0],e[0]);case"remove_mark":return SO(t[0],e[0]);case"insert_node":return AO(t[0],e[0]);case"remove_node":return NO(t[0],e[0]);case"move_node":return IO(t[0],e[0]);case"set_node":return RO(t[0],e[0]);case"split_node":return C(n,t.length,o,e.length),CO(t[0],e);case"merge_node":return C(n,t.length,o,e.length),wO(t[0],e);case"insert_fragment":return FO(t[0],e[0]);case"set_fragment":return EO(t[0],e[0]);case"remove_fragment":return PO(t[0],e[0]);case"insert_data":return MO(t[0],e[0]);case"remove_data":return DO(t[0],e[0]);case"insert_array_data":return BO(t[0],e[0],r);case"remove_array_data":return qO(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}}function Ro(t,e,r="left"){let n=cs(t),o=cs(e),a=n.map(s=>{let u=[...s];return o.forEach(c=>{u=hs(u,c,r)}),u});return[].concat(...a)}function px(t,e,r="right"){let{history:n}=t,{undos:o,redos:a}=n,i=[];o.forEach(l=>{let h=Ro(l.operations.toArray(),e,r);return h.length>0&&i.push(ar.create(h)),!0});let s=[];a.forEach(l=>{let h=Ro(l.operations.toArray(),e,r);return h.length>0&&s.push(ar.create(h)),!0});let u=t.change(),c=n.merge({undos:it(i),redos:it(s)});return u.value.merge({history:c})}function C(t,e,r,n){MD.warning(`Transform of ${e} ${t} against ${n} ${r} should be improved.`)}f();function dx(t,e){return t.localeCompare(e,"en")<0?"left":"right"}var Co={apply:xm,invert:gt,transform:hs,transformManyToMany:Ro,transformHistory:px,getUserSide:dx};var wo=ge("slate:change"),ke=class{constructor(e){let{value:r}=e;this.initialValue=r,this.value=r,this.operations=S(),this.flags=_({normalize:!0},(0,ds.default)(e,["merge","save","normalize"]))}get object(){return"change"}applyOperation(e,r={}){let{operations:n,flags:o}=this,{value:a}=this,{history:i}=a;r=_(_({},o),r);let{merge:s=n.size===0?void 0:!0,save:u=!0,skip:c}=r;return wo.debug("apply",{operation:e,save:u,merge:s}),a=Co.apply(a,e),i&&u&&(i=i.save(Co.invert(e),{merge:s,skip:c}),a=a.set("history",i)),this.value=a,this.operations=n.push(e),this}applyOperations(e,r){return e.forEach(n=>this.applyOperation(n,r)),this}call(e,...r){return e(this,...r),this}withoutNormalization(e){let r=this.flags.normalize;this.setOperationFlag("normalize",!1);try{e(this)}finally{this.setOperationFlag("normalize",r)}return this}setOperationFlag(e,r){return this.flags[e]=r,this}getFlag(e,r={}){return r[e]!==void 0?r[e]:this.flags[e]}unsetOperationFlag(e){return delete this.flags[e],this}setValueData(e,r={}){e=ee.create(e);let{value:n}=this;return this.applyOperation(b.create({type:"set_value_data",data:e,previousData:n.data}),r),this}undo(){let{value:e}=this,{history:r}=e;if(!r)return this;let{undos:n,redos:o}=r,a=n.peek();return a?(n=n.pop(),o=o.push(a),a.operations.forEach(i=>{let{type:s,properties:u}=i;s==="set_selection"&&(i=i.set("properties",(0,ps.default)(u,"isFocused"))),this.applyOperation(i,{save:!1})}),e=this.value,r=r.set("undos",n).set("redos",o),e=e.set("history",r),this.value=e,this):this}redo(){let{value:e}=this,{history:r}=e;if(!r)return this;let{undos:n,redos:o}=r,a=o.peek();return a?(o=o.pop(),n=n.push(a),a.operations.slice().reverse().map(Co.invert).forEach(s=>{let{type:u,properties:c}=s;u==="set_selection"&&(s=s.set("properties",(0,ps.default)(c,"isFocused"))),this.applyOperation(s,{save:!1})}),e=this.value,r=r.set("undos",n).set("redos",o),e=e.set("history",r),this.value=e,this):this}select(e,r={}){let n=oe.createProperties(e),{snapshot:o=!1}=r,{value:a}=this,{document:i,selection:s}=a,u={},c=s.merge(n).normalize(i);if(!o&&s.equals(c))return wo.warning("Skipping change.select because it's called with the same selection. It may indicate an issue with event handlers."),this;let l=s.toJS();n=(0,ds.default)(c,Object.keys(n));for(let p in n)o===!1&&n[p]===l[p]||(u[p]=n[p]);let h=["anchorKey","anchorOffset","focusKey","focusOffset"].some(p=>u.hasOwnProperty(p));return l.marks&&n.marks===l.marks&&h&&(u.marks=null),(0,mx.default)(u)?this:(this.applyOperation(b.create({type:"set_selection",properties:u,selection:c}),o?{skip:!1,merge:!1}:{}),this)}selectAll(){let{value:e}=this,{document:r,selection:n}=e,o=r.getFragmentParent(n.anchorKey);if(!o)return this;let a=n.moveToRangeOf(o);return this.select(a),this}snapshotSelection(){let{value:e}=this,{selection:r}=e;return this.select(r,{snapshot:!0}),this}moveAnchorCharBackward(){let{value:e}=this,{document:r,selection:n,anchorText:o,anchorBlock:a}=e,{anchorOffset:i}=n,s=r.getPreviousText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);return!u&&i>0?(this.moveAnchor(-1),this):s?(this.moveAnchorToEndOf(s),!u&&!c&&a.hasNode(s.key)&&this.moveAnchor(-1),this):this}moveAnchorCharForward(){let{value:e}=this,{document:r,selection:n,anchorText:o,anchorBlock:a}=e,{anchorOffset:i}=n,s=r.getNextText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);return!u&&i<o.text.length?(this.moveAnchor(1),this):s?(this.moveAnchorToStartOf(s),!u&&!c&&a.hasNode(s.key)&&this.moveAnchor(1),this):this}moveFocusCharBackward(){let{value:e}=this,{document:r,selection:n,focusText:o,focusBlock:a}=e,{focusOffset:i}=n,s=r.getPreviousText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);if(!u&&i>0){this.moveFocus(-1);return}if(!!s)return this.moveFocusToEndOf(s),!u&&!c&&a.hasNode(s.key)&&this.moveFocus(-1),this}moveFocusCharForward(){let{value:e}=this,{document:r,selection:n,focusText:o,focusBlock:a}=e,{focusOffset:i}=n,s=r.getNextText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);if(!u&&i<o.text.length){this.moveFocus(1);return}if(!!s)return this.moveFocusToStartOf(s),!u&&!c&&a.hasNode(s.key)&&this.moveFocus(1),this}addMarkByKey(e,r,n,o,a={}){o=z.create(o);let i=this.getFlag("normalize",a),{value:s}=this,{document:u}=s,c=u.getPath(e),h=u.getNode(e).getLeaves(),p=[],d=r,g=r+n,y=0;if(h.forEach(O=>{let T=y,A=T+O.text.length;if(y+=O.text.length,A<d||g<T||O.marks.has(o))return;let I=Math.max(T,d),w=Math.min(A,g);p.push(b.create({type:"add_mark",path:c,offset:I,length:w-I,mark:o}))}),this.applyOperations(p),i){let O=u.getParent(e);this.normalizeNodeByKey(O.key)}return this}insertDocumentByKey(e,r,n,o={}){let a=this.getFlag("normalize",o);return n.nodes.forEach((i,s)=>{this.insertNodeByKey(e,r+s,i)}),a&&this.normalizeNodeByKey(e),this}setFragmentByKey(e,r,n={}){if(!Fe.isFragment(r))return this;let{value:o}=this,{document:a}=o,i=a.getNode(e);if(!i||i.object!=="block")return this;let s=a.getPath(e),u=a.getPath(r.fragmentKey);return this.applyOperation(b.create({type:"set_fragment",path:s,fragmentPath:u||void 0,node:r}),n),this.getFlag("normalize",n)&&this.normalizeNodeByKey(e),this}insertFragmentByKey(e,r,n={}){if(!Fe.isFragment(r))return this;let{value:o}=this,{document:a}=o,i=a.getNode(e);if(!i||i.object!=="block")return this;let s=a.getPath(e),u=[...s,i.fragments.size];return this.applyOperation(b.create({type:"insert_fragment",path:s,fragmentPath:u,node:r}),n),this.getFlag("normalize",n)&&this.normalizeNodeByKey(e),this}insertNodeByKey(e,r,n,o={}){if(Fe.isFragment(n))return this;let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i;if(s.hasNodeKeyConflict(n))return wo.error(`skip insertNodeByKey, node "${n.key}" is conflicting with existing keys`),this;let u=s.getPath(e);return this.applyOperation(b.create({type:"insert_node",path:[...u,r],node:n})),a&&this.normalizeNodeByKey(e),this}insertNodeAfterByKey(e,r,n={}){let{value:o}=this,{document:a}=o,i=a.getParent(e);if(!i)return this;let s=i.getChildIndex(e);return this.insertNodeByKey(i.key,s+1,r,n)}insertNodeBeforeByKey(e,r,n={}){let{value:o}=this,{document:a}=o,i=a.getParent(e);if(!i)return this;let s=i.getChildIndex(e);return this.insertNodeByKey(i.key,s,r,n)}insertTextByKey(e,r,n,o,a={}){let i=this.getFlag("normalize",a),{value:s}=this,{document:u}=s,c=u.getPath(e),l=u.getNode(e),h=o?z.createSet(o):l.getMarksAtIndex(r);if(this.applyOperation(b.create({type:"insert_text",path:c,offset:r,text:n,marks:h})),i){let p=u.getParent(e);this.normalizeNodeByKey(p.key)}return this}appendNodeByKey(e,r,n={}){let{value:o}=this,{document:a}=o,i=a.assertNode(e).nodes.size;return this.insertNodeByKey(e,i,r,n),this}insertDataByKey(e,r,n,o={}){let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i,u=s.getPath(e);return this.applyOperation(b.create({type:"insert_data",path:u,dataPath:r,data:n}),o),a&&this.normalizeNodeByKey(e),this}setDataByKey(e,r,n,o={}){return this.insertDataByKey(e,r,n,o)}insertArrayDataByKey(e,r,n,o,a={}){let i=this.getFlag("normalize",a),{value:s}=this,{document:u}=s,c=u.getPath(e);return this.applyOperation(b.create({type:"insert_array_data",path:c,dataPath:r,data:n,dataIndex:o}),a),i&&this.normalizeNodeByKey(e),this}removeArrayDataByKey(e,r,n,o={}){let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i,u=s.getPath(e);return this.applyOperation(b.create({type:"remove_array_data",path:u,dataPath:r,data:n}),o),a&&this.normalizeNodeByKey(e),this}removeDataPathByKey(e,r,n={}){let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.getPath(e),u=i.getNodeAtPath(s);return this.applyOperation(b.create({type:"remove_data",path:s,dataPath:r,data:u.data.getIn(r)})),o&&this.normalizeNodeByKey(e),this}mergeNodeByKey(e,r={}){let n=this.getFlag("normalize",r),{value:o}=this,{document:a}=o,i=a.getPath(e),s=a.getDescendant(e),u=a.getPreviousSibling(e);if(!u)throw new Error(`Unable to merge node with key "${e}", no previous key.`);let c=u.object==="text"?u.text.length:u.nodes.size;if(this.applyOperation(b.create({type:"merge_node",path:i,position:c,properties:{key:s.key,type:s.type,data:s.data},target:null})),n){let l=a.getParent(e);this.normalizeNodeByKey(l.key)}return this}moveNodeByKey(e,r,n,o={}){let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i,u=s.getPath(e),c=s.getPath(r);if(this.applyOperation(b.create({type:"move_node",path:u,newPath:[...c,n]})),a){let l=s.getCommonAncestor(e,r);this.normalizeNodeByKey(l.key)}return this}moveAfterOrBefore(e,r,n,o={}){let{value:a}=this,{document:i}=a,s=i.getParent(r);if(!s)return this;let u=s.getChildIndex(r)+n,c=s.getChildIndex(e);return u===c?this:(c>=0&&(u=c<=u?u-1:u),this.moveNodeByKey(e,s.key,u,o))}moveAfterNodeByKey(e,r,n={}){return this.moveAfterOrBefore(e,r,1,n)}moveBeforeNodeByKey(e,r,n={}){return this.moveAfterOrBefore(e,r,0,n)}removeMarkByKey(e,r,n,o,a={}){o=z.create(o);let i=this.getFlag("normalize",a),{value:s}=this,{document:u}=s,c=u.getPath(e),h=u.getNode(e).getLeaves(),p=[],d=r,g=r+n,y=0;if(h.forEach(O=>{let T=y,A=T+O.text.length;if(y+=O.text.length,A<d||g<T||!O.marks.has(o))return;let I=Math.max(T,d),w=Math.min(A,g);p.push(b.create({type:"remove_mark",path:c,offset:I,length:w-I,mark:o}))}),this.applyOperations(p),i){let O=u.getParent(e);this.normalizeNodeByKey(O.key)}return this}removeInvalidMarksByKey(e,r,n={}){let{value:o}=this,{document:a}=o,i=a.getNode(e),s=i.getLeaves();if(!s.size)return this;let u=i.getMarksAsArray().filter(l=>!r.includes(l.type));if(!u||!u.length)return this;let c=0;return s.forEach(l=>{l.marks.forEach(h=>{r.includes(h.type)||this.removeMarkByKey(i.key,c,l.text.length,h,n)}),c+=l.text.length}),this}removeAllMarksByKey(e,r={}){let{value:n}=this,{document:o}=n,a=o.getNode(e);return(a.object==="text"?[a]:a.getTextsAsArray()).forEach(s=>{s.getMarksAsArray().forEach(u=>{this.removeMarkByKey(s.key,0,s.text.length,u,r)})}),this}removeDataByKey(e,r,n={}){let{value:o}=this,{document:a}=o,i=a.getNode(e),s={isVoid:i.isVoid,type:i.type,data:i.data.deleteAll(r)};return this.setNodeByKey(i.key,s,n),this}removeNodeByKey(e,r={}){let n=this.getFlag("normalize",r),{value:o}=this,{document:a}=o,i=a.getPath(e),s=a.getNode(e);if(s.object==="fragment")return this.removeFragmentInParentByKey(a.getParent(e).key,s.fragmentKey,r);if(this.applyOperation(b.create({type:"remove_node",path:i,node:s})),n){let u=a.getParent(e);this.normalizeNodeByKey(u.key),this.value.selection.isUnset&&this.normalizeSelection()}return this}removeFragmentByKey(e,r={}){let{value:n}=this,{document:o}=n,a=o.getNode(e);if(!a||a.object!=="fragment")return this;let i=o.getParent(e);if(!i||i.object!=="block")throw new Error("Fragment must be a direct child of a block");return this.removeFragmentInParentByKey(i.key,a.fragmentKey,r)}removeFragmentInParentByKey(e,r,n={}){let{value:o}=this,{document:a,selection:i}=o,s=a.getNode(e);if(!s||s.object!=="block")return this;let u=s.getFragmentByKey(r);if(!u||u.object!=="fragment")return this;let c=a.getPath(s.key),l=a.getPath(u.key);return this.applyOperation(b.create({type:"remove_fragment",path:c,fragmentPath:l,node:u})),this.getFlag("normalize",n)&&(this.normalizeNodeByKey(s.key),i.isSet&&this.value.selection.isUnset&&this.normalizeSelection()),this}setTextByKey(e,r,n,o={}){let a=this.value.document.getDescendant(e);return this.replaceTextByKey(e,0,a.text.length,r,n,o),this}replaceTextByKey(e,r,n,o,a,i={}){let{document:s}=this.value,u=s.getDescendant(e);n+r>u.text.length&&(n=u.text.length-r);let c=oe.create({anchorKey:e,focusKey:e,anchorOffset:r,focusOffset:r+n}),l=s.getActiveMarksAtRange(c);this.removeTextByKey(e,r,n,{normalize:!1});let h=a?z.createSet(a):l;return l&&(l=l.filter(p=>!h.find(d=>p.type===d.type)),h=l.merge(h)),this.insertTextByKey(e,r,o,h,i),this}removeTextByKey(e,r,n,o={}){let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i,u=s.getPath(e),c=s.getNode(e),l=c.getLeaves(),{text:h}=c,p=[],d=r,g=r+n,y=0;if(l.forEach(O=>{let T=y,A=T+O.text.length;if(y+=O.text.length,A<d||g<T)return;let I=Math.max(T,d),w=Math.min(A,g),P=h.slice(I,w);p.push(b.create({type:"remove_text",path:u,offset:I,text:P,marks:O.marks}))}),this.applyOperations(p.reverse()),a){let O=s.getClosestBlock(e);this.normalizeNodeByKey(O.key)}return this}replaceNodeByKey(e,r,n={}){let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.assertNode(e),u=i.getParent(e);if(!u)throw new Error(`Parent not found for node "${e}"`);if(s.object==="fragment"){if(r.object!=="fragment")throw new Error("Replacing a fragment with a non-fragment is not allowed");this.removeFragmentByKey(e,{normalize:!1}),this.insertFragmentByKey(u.key,r,{normalize:!1})}else{let c=u.getChildIndex(s.key);this.removeNodeByKey(e,{normalize:!1}),this.insertNodeByKey(u.key,c,r,{normalize:!1})}return o&&this.normalizeNodeByKey(u.key),this}replaceWithDocumentByKey(e,r,n={}){let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.getNode(e),u=i.getParent(e),c=u.getChildIndex(s.key);return this.removeNodeByKey(e,{normalize:!1}),this.insertDocumentByKey(u.key,c,r,{normalize:!1}),o&&this.normalizeNodeByKey(u.key),this}setMarkByKey(e,r,n,o,a,i={}){a=z.createProperties(a);let s=this.getFlag("normalize",i),{value:u}=this,{document:c}=u,l=c.getPath(e);if(this.applyOperation(b.create({type:"set_mark",path:l,offset:r,length:n,mark:z.create(o),properties:a})),s){let h=c.getParent(e);this.normalizeNodeByKey(h.key)}return this}setNodeByKey(e,r={},n={}){r=Qt(r);let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.getPath(e),u=i.getNode(e);return this.applyOperation(b.create({type:"set_node",path:s,node:u,properties:r})),o&&this.normalizeNodeByKey(u.key),this}splitNodeByKey(e,r,n={}){let{normalize:o=!0,target:a=null}=n,{value:i}=this,{document:s}=i,u=s.getPath(e),c=s.getDescendantAtPath(u),l=ne();if(this.applyOperation(b.create({type:"split_node",path:u,position:r,properties:{key:l,type:c.type,data:c.data},target:a})),o){let h=s.getParent(e);this.normalizeNodeByKey(h.key)}return this}splitDescendantsByKey(e,r,n,o={}){if(e===r)return this.splitNodeByKey(r,n,o),this;let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i,u=s.getNode(r),l=s.getAncestors(r).skipUntil(d=>d.key===e).reverse().unshift(u),h,p;if(l.forEach(d=>{let g=p==null?null:p;p=h?d.getChildIndex(h.key)+1:n,h=d,this.splitNodeByKey(d.key,p,{normalize:!1,target:g})}),a){let d=s.getParent(e);this.normalizeNodeByKey(d.key)}return this}unwrapInlineByKey(e,r={},n={}){let{value:o}=this,{document:a,selection:i}=o,s=a.assertDescendant(e),u=s.getFirstText(),c=s.getLastText(),l=i.moveToRangeOf(u,c);return this.unwrapInlineAtRange(l,r,n),this}unwrapBlockByKey(e,r={},n={}){let{value:o}=this,{document:a,selection:i}=o,s=a.assertDescendant(e),u=s.getFirstText(),c=s.getLastText(),l=i.moveToRangeOf(u,c);return this.unwrapBlockAtRange(l,r,n),this}unwrapNodeByKey(e,r={}){let n=this.getFlag("normalize",r),{value:o}=this,{document:a}=o,i=a.getParent(e);if(!i||Fe.isFragment(i)||i.isBlock()&&i.hasFragment(e))return this;let s=i.getChild(e),u=i.getChildIndex(s.key),c=u===0,l=u===i.nodes.size-1,h=a.getParent(i.key),p=h.getChildIndex(i.key);return i.nodes.size===1?(this.moveNodeByKey(e,h.key,p,{normalize:!1}),this.removeNodeByKey(i.key,r)):c?this.moveNodeByKey(e,h.key,p,r):l?this.moveNodeByKey(e,h.key,p+1,r):(this.splitNodeByKey(i.key,u,{normalize:!1}),this.moveNodeByKey(e,h.key,p+1,{normalize:!1}),n&&this.normalizeNodeByKey(h.key)),this}wrapBlockByKey(e,r,n={}){let o=G.create(r);o=o.set("nodes",o.nodes.clear());let{document:a}=this.value,i=a.assertDescendant(e);if(i.object==="fragment")return this;let s=a.getParent(i.key),u=s.getChildIndex(i.key);return this.insertNodeByKey(s.key,u,o,{normalize:!1}),this.moveNodeByKey(i.key,o.key,0,n),this}wrapInlineByKey(e,r,n={}){let o=ae.create(r);o=o.set("nodes",o.nodes.clear());let{document:a}=this.value,i=a.assertDescendant(e),s=a.getParent(i.key),u=s.getChildIndex(i.key);return this.insertNodeByKey(s.key,u,o,{normalize:!1}),this.moveNodeByKey(i.key,o.key,0,n),this}addMarkAtRange(e,r,n={}){if(e.isCollapsed)return this;let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,{startKey:s,startOffset:u,endKey:c,endOffset:l}=e;return i.getTextsAtRange(e).forEach(p=>{let{key:d}=p,g=0,{length:y}=p.text;d===s&&(g=u),d===c&&(y=l),d===s&&d===c&&(y=l-u),this.addMarkByKey(d,g,y,r,{normalize:o})}),this}addMarksAtRange(e,r,n={}){return r.forEach(o=>this.addMarkAtRange(e,o,n)),this}deleteAtRange(e,r={}){if(e.isCollapsed)return this;this.snapshotSelection();let n=this.getFlag("normalize",r),{value:o}=this,{startKey:a,startOffset:i,endKey:s,endOffset:u}=e,{document:c}=o,l=c.hasVoidParent(a),h=c.hasVoidParent(s),p=c.getClosestBlock(a),d=c.getClosestBlock(s),g=i===0&&u===0&&l===!1&&a===p.getFirstText().key&&s===d.getFirstText().key;if(g&&h){let y=c.getPreviousText(s);s=y.key,u=y.text.length,h=c.hasVoidParent(s)}for(;l;){let y=c.getClosestVoid(a),O=c.getNextText(a);if(this.removeNodeByKey(y.key,{normalize:!1}),a===s)return this;if(!O)return this;c=this.value.document,a=O.key,i=0,l=c.hasVoidParent(a)}for(;h;){let y=c.getClosestVoid(s),O=c.getPreviousText(s);this.removeNodeByKey(y.key,{normalize:!1}),c=this.value.document,s=O.key,u=O.text.length,h=c.hasVoidParent(s)}if(a===s&&g)this.removeNodeByKey(p.key,{normalize:n});else if(a===s){let y=i,O=u-i;this.removeTextByKey(a,y,O,{normalize:n})}else{p=c.getClosestBlock(a),d=c.getClosestBlock(s);let y=c.getNode(a),O=c.getNode(s),T=y.text.length-i,A=u,I=c.getCommonAncestor(a,s),w=I.getFurthestAncestor(a),P=I.getFurthestAncestor(s),E=c.getParent(p.key),V=E.getChildIndex(p.key),Se=E.getChildIndex(d.key),H;for(H=y;H.key!==w.key;){let je=c.getParent(H.key),Qo=je.getChildIndex(H.key);je.nodes.slice(Qo+1).reverse().forEach(ea=>{this.removeNodeByKey(ea.key,{normalize:!1})}),H=je}let ie=I.getChildIndex(w.key),Tt=I.getChildIndex(P.key);for(I.nodes.slice(ie+1,Tt).reverse().forEach(je=>{this.removeNodeByKey(je.key,{normalize:!1})}),H=O;H.key!==P.key;){let je=c.getParent(H.key),Qo=je.getChildIndex(H.key);je.nodes.slice(0,Qo).reverse().forEach(ea=>{this.removeNodeByKey(ea.key,{normalize:!1})}),H=je}if(T!==0&&this.removeTextByKey(a,i,T,{normalize:!1}),A!==0&&this.removeTextByKey(s,0,u,{normalize:!1}),p.key!==d.key){c=this.value.document;let je=c.getFurthestOnlyChildAncestor(d.key);Se!==V+1&&this.moveNodeByKey(d.key,E.key,V+1,{normalize:!1}),g?this.removeNodeByKey(p.key,{normalize:!1}):this.mergeNodeByKey(d.key,{normalize:!1}),je&&this.removeNodeByKey(je.key,{normalize:!1})}n&&this.normalizeNodeByKey(I.key)}return this}deleteCharBackwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,s=o.getClosestBlock(a),c=s.getOffset(a)+i,{text:l}=s,h=Hc(l,c);return this.deleteBackwardAtRange(e,h,r),this}deleteLineBackwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,c=o.getClosestBlock(a).getOffset(a)+i;return this.deleteBackwardAtRange(e,c,r),this}deleteWordBackwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,s=o.getClosestBlock(a),c=s.getOffset(a)+i,{text:l}=s,h=Yc(l,c);return this.deleteBackwardAtRange(e,h,r),this}deleteBackwardAtRange(e,r=1,n={}){if(r===0)return this;let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,{startKey:s,focusOffset:u}=e;if(e.isExpanded)return this.deleteAtRange(e,{normalize:o}),this;let c=i.getClosestVoid(s);if(c)return this.removeNodeByKey(c.key,{normalize:o}),this;let l=i.getClosestBlock(s);if(l&&l.isEmpty&&i.nodes.size!==1)return this.removeNodeByKey(l.key,{normalize:o}),this;if(e.isAtStartOf(i))return this;let h=i.getDescendant(s);if(e.isAtStartOf(h)){let y=i.getPreviousText(h.key),O=i.getClosestBlock(y.key),T=i.getClosestVoid(y.key);if(T)return this.removeNodeByKey(T.key,{normalize:o}),this;if(r===1&&O!==l)return e=e.merge({anchorKey:y.key,anchorOffset:y.text.length}),this.deleteAtRange(e,{normalize:o}),this}if(r<u)return e=e.merge({focusOffset:u-r,isBackward:!0}),this.deleteAtRange(e,{normalize:o}),this;let p=h,d=0,g=u;for(;r>g;){p=i.getPreviousText(p.key);let y=g+p.text.length;if(r<=y){d=y-r;break}else g=y}return e=e.merge({focusKey:p.key,focusOffset:d,isBackward:!0}),this.deleteAtRange(e,{normalize:o}),this}deleteCharForwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,s=o.getClosestBlock(a),c=s.getOffset(a)+i,{text:l}=s,h=Gc(l,c);return this.deleteForwardAtRange(e,h,r),this}deleteLineForwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,s=o.getClosestBlock(a),c=s.getOffset(a)+i;return this.deleteForwardAtRange(e,s.text.length-c,r),this}deleteWordForwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,s=o.getClosestBlock(a),c=s.getOffset(a)+i,{text:l}=s,h=Wc(l,c);return this.deleteForwardAtRange(e,h,r),this}deleteForwardAtRange(e,r=1,n={}){if(r===0)return this;let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,{startKey:s,focusOffset:u}=e;if(e.isExpanded)return this.deleteAtRange(e,{normalize:o}),this;let c=i.getClosestVoid(s);if(c)return this.removeNodeByKey(c.key,{normalize:o}),this;let l=i.getClosestBlock(s);if(l&&l.isEmpty&&i.nodes.size!==1){let y=i.getNextBlock(l.key);return this.removeNodeByKey(l.key,{normalize:o}),y&&y.key&&this.moveToStartOf(y),this}if(e.isAtEndOf(i))return this;let h=i.getDescendant(s);if(e.isAtEndOf(h)){let y=i.getNextText(h.key),O=i.getClosestBlock(y.key),T=i.getClosestVoid(y.key);if(T)return this.removeNodeByKey(T.key,{normalize:o}),this;if(r===1&&O!==l)return e=e.merge({focusKey:y.key,focusOffset:0}),this.deleteAtRange(e,{normalize:o}),this}if(r<=h.text.length-u)return e=e.merge({focusOffset:u+r}),this.deleteAtRange(e,{normalize:o}),this;let p=h,d=u,g=h.text.length-u;for(;r>g;){p=i.getNextText(p.key);let y=g+p.text.length;if(r<=y){d=r-g;break}else g=y}if(i.hasVoidParent(p.key)){let y=i.getClosestVoid(p.key);p=i.getPreviousText(y.key),d=p.text.length}return e=e.merge({focusKey:p.key,focusOffset:d}),this.deleteAtRange(e,{normalize:o}),this}insertBlockAtRange(e,r,n={}){let o=G.create(r),a=this.getFlag("normalize",n);e.isExpanded&&(this.deleteAtRange(e),e=e.collapseToStart());let{value:i}=this,{document:s}=i,{startKey:u,startOffset:c}=e,l=s.getClosestBlock(u),h=s.getClosestInline(u),p=s.getParent(l.key),d=p.getChildIndex(l.key);if(l.isVoid){let g=e.isAtEndOf(l)?1:0;this.insertNodeByKey(p.key,d+g,o,{normalize:a})}else if(l.isEmpty)this.insertNodeByKey(p.key,d+1,o,{normalize:a});else if(e.isAtStartOf(l))this.insertNodeByKey(p.key,d,o,{normalize:a});else if(e.isAtEndOf(l))this.insertNodeByKey(p.key,d+1,o,{normalize:a});else{if(h&&h.isVoid){let g=e.isAtEndOf(h),y=g?s.getNextText(u):s.getPreviousText(u),O=g?e.moveToStartOf(y):e.moveToEndOf(y);u=O.startKey,c=O.startOffset}this.splitDescendantsByKey(l.key,u,c,{normalize:!1}),this.insertNodeByKey(p.key,d+1,o,{normalize:a})}return a&&this.normalizeNodeByKey(p.key),this}insertDocumentAtRange(e,r,n={}){let o=this.getFlag("normalize",n);if(e.isExpanded&&(this.deleteAtRange(e,{normalize:!1}),this.value.document.getDescendant(e.startKey)?e=e.collapseToStart():e=e.collapseTo(e.endKey,0)),!r.nodes.size)return this;r=r.regenerateAllKeys();let{startKey:a,startOffset:i}=e,{value:s}=this,{document:u}=s,c=u.getDescendant(a),l=u.getClosestBlock(c.key),h=l.getFurthestAncestor(c.key),p=e.isAtStartOf(l),d=u.getParent(l.key),g=d.getChildIndex(l.key),y=r.getLeafBlocks(),O=r.nodes.first(),T=r.nodes.last(),A=y.first(),I=y.last();if(A===I&&A.isVoid)return this.insertBlockAtRange(e,A,n),this;if(r.hasBlocks(O.key)||r.hasBlocks(T.key))return r.nodes.reverse().forEach(w=>{this.insertBlockAtRange(e,w,n)}),this;if(A!==I){let P=r.getFurthest(A.key,V=>V.nodes.size===1)||A,E=d.getChildIndex(l.key);r=r.removeDescendant(P.key),r.nodes.forEach((V,Se)=>{let H=E+Se+1;this.insertNodeByKey(d.key,H,V,{normalize:!1})})}if(i!==0&&this.splitDescendantsByKey(h.key,a,i,{normalize:!1}),u=this.value.document,c=u.getDescendant(a),l=u.getClosestBlock(a),h=l.getFurthestAncestor(c.key),A!==I){let w=p?h:l.getNextSibling(h.key),P=w?l.nodes.skipUntil(V=>V.key===w.key):S(),E=I.nodes.size;P.forEach((V,Se)=>{let H=E+Se;this.moveNodeByKey(V.key,I.key,H,{normalize:!1})})}if(l.isEmpty)this.removeNodeByKey(l.key,{normalize:!1}),this.insertNodeByKey(d.key,g,A,{normalize:!1}),this.insertNodeByKey(A.key,0,L.create(""),{normalize:!1});else{let w=l.getFurthestAncestor(c.key),P=l.getChildIndex(w.key);A.nodes.forEach((E,V)=>{let Se=i===0?0:1,H=P+V+Se;this.insertNodeByKey(l.key,H,E,{normalize:!1})})}return o&&this.normalizeNodeByKey(d.key),this}insertInlineAtRange(e,r,n={}){let o=this.getFlag("normalize",n),a=ae.create(r);e.isExpanded&&(this.deleteAtRange(e,{normalize:!1}),e=e.collapseToStart());let{value:i}=this,{document:s}=i,{startKey:u,startOffset:c}=e,l=s.getParent(u),h=s.assertDescendant(u),p=l.getChildIndex(h.key);return l.isVoid?this:(this.splitNodeByKey(u,c,{normalize:!1}),this.insertNodeByKey(l.key,p+1,a,{normalize:!1}),o&&this.normalizeNodeByKey(l.key),this)}insertTextAtRange(e,r,n,o={}){let{normalize:a}=o,{value:i}=this,{document:s}=i,{startKey:u,startOffset:c}=e,l=u,h=c;if(s.getParent(u).isVoid)return this;if(e.isExpanded&&(this.deleteAtRange(e,{normalize:!1}),this.value.startKey!==l&&(l=this.value.startKey,h=this.value.startOffset)),a===void 0&&(a=e.isExpanded&&n&&n.size!==0),this.insertTextByKey(l,h,r,n,{normalize:!1}),a){let d=s.getCommonAncestor(u,e.endKey),y=s.getAncestors(d.key).push(d).findLast(T=>this.value.document.getDescendant(T.key)),O=y?y.key:u;this.normalizeNodeByKey(O)}return this}removeMarkAtRange(e,r,n={}){if(e.isCollapsed)return this;let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.getTextsAtRange(e),{startKey:u,startOffset:c,endKey:l,endOffset:h}=e;return s.forEach(p=>{let{key:d}=p,g=0,{length:y}=p.text;d===u&&(g=c),d===l&&(y=h),d===u&&d===l&&(y=h-c),this.removeMarkByKey(d,g,y,r,{normalize:o})}),this}setBlocksAtRange(e,r={},n={}){let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.getBlocksAtRange(e),{startKey:u,startOffset:c,endKey:l,endOffset:h,isCollapsed:p}=e,d=i.hasVoidParent(u),g=i.getClosestBlock(u),y=i.getClosestBlock(l);return(p===!1&&c===0&&h===0&&d===!1&&u===g.getFirstText().key&&l===y.getFirstText().key?s.slice(0,-1):s).forEach(A=>{this.setNodeByKey(A.key,r,{normalize:o})}),this}setInlinesAtRange(e,r={},n={}){let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a;return i.getInlinesAtRange(e).forEach(u=>{this.setNodeByKey(u.key,r,{normalize:o})}),this}splitBlockAtRange(e,r=1,n={}){let o=this.getFlag("normalize",n),{startKey:a,startOffset:i,endOffset:s,endKey:u}=e,{value:c}=this,{document:l}=c,h=l.assertDescendant(a),p=l.getClosestBlock(h.key),d=0;for(;p&&p.object==="block"&&d<r;)h=p,p=l.getClosestBlock(p.key),d++;if(this.splitDescendantsByKey(h.key,a,i,{normalize:o&&e.isCollapsed}),e.isExpanded){e.isBackward&&(e=e.flip());let g=this.value.document.getNextBlock(h.key);e=e.moveAnchorToStartOf(g),a===u&&(e=e.moveFocusTo(e.anchorKey,s-i)),this.deleteAtRange(e,{normalize:o})}return this}splitInlineAtRange(e,r=1/0,n={}){let o=this.getFlag("normalize",n);e.isExpanded&&(this.deleteAtRange(e,{normalize:o}),e=e.collapseToStart());let{startKey:a,startOffset:i}=e,{value:s}=this,{document:u}=s,c=u.assertDescendant(a),l=u.getClosestInline(c.key),h=0;for(;l&&l.object==="inline"&&h<r;)c=l,l=u.getClosestInline(l.key),h++;return this.splitDescendantsByKey(c.key,a,i,{normalize:o}),this}toggleMarkAtRange(e,r,n={}){if(e.isCollapsed)return this;r=z.create(r);let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a;return i.getActiveMarksAtRange(e).some(c=>c.equals(r))?this.removeMarkAtRange(e,r,{normalize:o}):this.addMarkAtRange(e,r,{normalize:o}),this}unwrapBlockAtRange(e,r={},n={}){r=Qt(r);let o=this.getFlag("normalize",n),a=this.value.document.getBlocksAtRange(e);return a.map(s=>this.value.document.getClosest(s.key,u=>!(u.object!=="block"||r.type!=null&&u.type!==r.type||r.isVoid!=null&&u.isVoid!==r.isVoid||r.data!=null&&!u.data.isSuperset(r.data)))).filter(s=>s).toOrderedSet().toList().forEach(s=>{let u=s.nodes.first(),c=s.nodes.last(),l=this.value.document.getParent(s.key),h=l.getChildIndex(s.key),p=s.nodes.filter(y=>a.some(O=>y===O||y.hasDescendant(O.key))),d=p.first(),g=p.last();if(u===d&&c===g)s.nodes.forEach((y,O)=>{this.moveNodeByKey(y.key,l.key,h+O,{normalize:!1})}),this.removeNodeByKey(s.key,{normalize:!1});else if(c===g)s.nodes.skipUntil(y=>y===d).forEach((y,O)=>{this.moveNodeByKey(y.key,l.key,h+1+O,{normalize:!1})});else if(u===d)s.nodes.takeUntil(y=>y===g).push(g).forEach((y,O)=>{this.moveNodeByKey(y.key,l.key,h+O,{normalize:!1})});else{let y=d.getFirstText();this.splitDescendantsByKey(s.key,y.key,0,{normalize:!1}),p.forEach((O,T)=>{if(T===0){let A=O;O=this.value.document.getNextBlock(O.key),this.removeNodeByKey(A.key,{normalize:!1})}this.moveNodeByKey(O.key,l.key,h+1+T,{normalize:!1})})}}),o&&this.normalizeDocument(),this}unwrapInlineAtRange(e,r={},n={}){r=Qt(r);let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a;return i.getTextsAtRange(e).map(c=>i.getClosest(c.key,l=>!(l.object!=="inline"||r.type!=null&&l.type!==r.type||r.isVoid!=null&&l.isVoid!==r.isVoid||r.data!=null&&!l.data.isSuperset(r.data)))).filter(c=>c).toOrderedSet().toList().forEach(c=>{let l=this.value.document.getParent(c.key),h=l.getChildIndex(c.key);c.nodes.forEach((p,d)=>{this.moveNodeByKey(p.key,l.key,h+d,{normalize:!1})})}),o&&this.normalizeDocument(),this}wrapBlockAtRange(e,r,n={}){let o=G.create(r);o=o.set("nodes",o.nodes.clear());let a=this.getFlag("normalize",n),{value:i}=this,{document:s}=i,u=s.getBlocksAtRange(e),c=u.first(),l=u.last(),h,p,d;if(u.length===1?(h=s.getParent(c.key),p=u):h=s.getClosest(c.key,g=>!!s.getClosest(l.key,y=>g===y)),h==null&&(h=s),p==null){let g=h.nodes.reduce((y,O,T)=>((O===c||O.hasDescendant(c.key))&&(y[0]=T),(O===l||O.hasDescendant(l.key))&&(y[1]=T),y),[]);d=g[0],p=h.nodes.slice(g[0],g[1]+1)}return d==null&&(d=h.nodes.indexOf(p.first())),this.insertNodeByKey(h.key,d,o,{normalize:!1}),p.forEach((g,y)=>{this.moveNodeByKey(g.key,o.key,y,{normalize:!1})}),a&&this.normalizeNodeByKey(h.key),this}wrapInlineAtRange(e,r,n={}){let{value:o}=this,{document:a}=o,i=this.getFlag("normalize",n),{startKey:s,startOffset:u,endKey:c,endOffset:l}=e;if(e.isCollapsed){let P=a.getClosestInline(s);return P.isVoid?this.wrapInlineByKey(P.key,r,n):void 0}let h=ae.create(r);h=h.set("nodes",h.nodes.clear());let p=a.getBlocksAtRange(e),d=a.getClosestBlock(s),g=a.getClosestBlock(c),y=a.getClosestInline(s),O=a.getClosestInline(c),T=d.getFurthestAncestor(s),A=g.getFurthestAncestor(c);(!y||y!==O)&&(this.splitDescendantsByKey(A.key,c,l,{normalize:!1}),this.splitDescendantsByKey(T.key,s,u,{normalize:!1})),a=this.value.document,d=a.getDescendant(d.key),g=a.getDescendant(g.key),T=d.getFurthestAncestor(s),A=g.getFurthestAncestor(c);let I=d.getChildIndex(T.key),w=g.getChildIndex(A.key);if(y&&y===O){let P=d.getTextsAtRange(e).get(0).splitText(u)[1].splitText(l-u)[0];h=h.set("nodes",S([P])),this.insertInlineAtRange(e,h,{normalize:!1});let E=h.getFirstText().key,V={anchorKey:E,focusKey:E,anchorOffset:0,focusOffset:l-u,isFocused:!0};this.select(V)}else if(d===g){a=this.value.document,d=a.getClosestBlock(s),T=d.getFurthestAncestor(s);let P=a.getNextSibling(T.key),E=d.getChildIndex(P.key),V=s===c?P:d.getFurthestAncestor(c),Se=d.nodes.skipUntil(ie=>ie===P).takeUntil(ie=>ie===V).push(V),H=h.regenerateKey();this.insertNodeByKey(d.key,E,H,{normalize:!1}),Se.forEach((ie,Tt)=>{this.moveNodeByKey(ie.key,H.key,Tt,{normalize:!1})}),i&&this.normalizeNodeByKey(d.key)}else{let P=d.nodes.slice(I+1),E=g.nodes.slice(0,w+1),V=h.regenerateKey(),Se=h.regenerateKey();this.insertNodeByKey(d.key,I+1,V,{normalize:!1}),this.insertNodeByKey(g.key,w,Se,{normalize:!1}),P.forEach((H,ie)=>{this.moveNodeByKey(H.key,V.key,ie,{normalize:!1})}),E.forEach((H,ie)=>{this.moveNodeByKey(H.key,Se.key,ie,{normalize:!1})}),i&&this.normalizeNodeByKey(d.key).normalizeNodeByKey(g.key),p.slice(1,-1).forEach(H=>{let ie=h.regenerateKey();this.insertNodeByKey(H.key,0,ie,{normalize:!1}),H.nodes.forEach((Tt,lu)=>{this.moveNodeByKey(Tt.key,ie.key,lu,{normalize:!1})}),i&&this.normalizeNodeByKey(H.key)})}return this}wrapTextAtRange(e,r,n=r,o={}){let a=this.getFlag("normalize",o),{startKey:i,endKey:s}=e,u=e.collapseToStart(),c=e.collapseToEnd();return i===s&&(c=c.move(r.length)),this.insertTextAtRange(u,r,[],{normalize:a}),this.insertTextAtRange(c,n,[],{normalize:a}),this}addMark(e,r={}){let n=z.create(e),{value:o}=this,{document:a,selection:i}=o;if(i.isExpanded)this.addMarkAtRange(i,n,r);else if(i.marks){let s=i.marks.add(n),u=i.set("marks",s);this.select(u)}else{let s=a.getActiveMarksAtRange(i).add(n),u=i.set("marks",s);this.select(u)}return this}addMarks(e,r={}){return e.forEach(n=>this.addMark(n)),this}delete(e={}){let{value:r}=this,{selection:n}=r;return this.deleteAtRange(n,e),this.collapseToStart(),this}insertBlock(e,r={}){e=G.create(e);let{value:n}=this,{selection:o}=n;this.insertBlockAtRange(o,e,r);let a=this.value.document.getNode(e.key);return a&&this.collapseToEndOf(a),this}insertDocument(e,r={}){if(!e.nodes.size)return this;let{value:n}=this,{document:o}=n,{selection:a}=n,{startText:i,endText:s,startInline:u}=n,c=e.getLastText(),l=e.getClosestInline(c.key),h=e.nodes.first(),p=e.nodes.last(),d=o.getTexts().map(A=>A.key),g=!u||a.hasEdgeAtStartOf(i)||a.hasEdgeAtEndOf(s),y=e.hasBlocks(h.key)||e.hasBlocks(p.key);this.insertDocumentAtRange(a,e,r),n=this.value,o=n.document;let O=o.getTexts().filter(A=>!d.includes(A.key)),T=g?O.last():O.takeLast(2).first();return T&&(l||y)?this.select(a.collapseToEndOf(T)):T?this.select(a.collapseToStartOf(T).move(c.text.length)):this.select(a.collapseToStart().move(c.text.length)),this}insertInline(e,r={}){e=ae.create(e);let{value:n}=this,{selection:o}=n;this.insertInlineAtRange(o,e,r);let a=this.value.document.getNode(e.key);return a&&this.collapseToEndOf(a),this}insertText(e,r,n={}){let{value:o}=this,{document:a,selection:i}=o;return r=r||i.marks||a.getInsertMarksAtRange(i),this.insertTextAtRange(i,e,r,n),i.marks&&a!==this.value.document&&this.select({marks:null}),this}splitBlock(e=1,r={}){let{value:n}=this,{selection:o,document:a}=n,i=o.marks||a.getInsertMarksAtRange(o);return this.splitBlockAtRange(o,e,r).collapseToEnd(),i&&i.size!==0&&this.select({marks:i}),this}removeAllMarks(){let{value:e}=this;return e.activeMarks.forEach(r=>{this.removeMark(r)}),this}removeMark(e,r={}){let n=z.create(e),{value:o}=this,{document:a,selection:i}=o;if(i.isExpanded)this.removeMarkAtRange(i,n,r);else if(i.marks){let s=i.marks.remove(n),u=i.set("marks",s);this.select(u)}else{let s=a.getActiveMarksAtRange(i).remove(n),u=i.set("marks",s);this.select(u)}return this}replaceMark(e,r,n={}){return this.removeMark(e,n),this.addMark(r,n),this}toggleMark(e,r={}){let n=z.create(e),{value:o}=this;return o.activeMarks.has(n)?this.removeMark(n,r):this.addMark(n,r),this}wrapText(e,r=e,n={}){let{value:o}=this,{selection:a}=o;return this.wrapTextAtRange(a,e,r,n),a.isCollapsed&&this.moveStart(0-e.length),this.moveEnd(0-r.length),a.isForward!==this.value.selection.isForward&&this.flip(),this}normalize(){return this.normalizeDocument(),this}normalizeDocument(){let{value:e}=this,{document:r}=e;return this.normalizeNodeByKey(r.key),this}normalizeSelection(){let{value:e}=this,{selection:r,document:n}=e;return r.isSet?this.select(r.normalize(n)):n.nodes.size>0&&(this.collapseToStartOf(n),r.isFocused&&this.value.selection.isSet&&this.focus()),this}normalizeNodeByKey(e){let{value:r}=this,{schema:n}=r,{document:o}=r,a=o.assertNode(e);this.normalizeNodeAndChildren(a,n),o=this.value.document;let i=o.getAncestors(e);return i?(i.forEach(s=>{let u=this.value.document.getDescendant(s.key);u&&this.normalizeNode(u,n)}),this):this}normalizeNodeAndChildren(e,r){if(e.object==="text"){this.normalizeNode(e,r);return}let n=r.getFirstInvalidNode(e),o=this.value.document.getPath(e.key);for(;e&&n;)this.normalizeNodeAndChildren(n,r),e=this.value.document.refindNode(o,e.key),e?(o=this.value.document.refindPath(o,e.key),n=r.getFirstInvalidNode(e)):(o=[],n=null);e&&this.normalizeNode(e,r)}normalizeNode(e,r){let n=Math.max(e.object==="text"?1:e.nodes.size,1)*(r.validations.length+1),o=0,a=i=>{let s=r.validateNode(i);if(!s)return;let u=this.value.document.getPath(i.key);if(!!u&&(s(this),i=this.value.document.refindNode(u,i.key),!!i)){if(u=this.value.document.refindPath(u,i.key),o+=1,o>n)throw new Error(`A schema rule could not be validated after sufficient iterations for ${e.object}#${e.type||""}. This is usually due to a 'rule.validate' or 'rule.normalize' function of a schema being incorrectly written, causing an infinite loop.`);a(i)}};a(e)}};ke.logger=wo,ke.isChange=ye.bind(null,"CHANGE");["deleteBackward","deleteCharBackward","deleteLineBackward","deleteWordBackward","deleteForward","deleteCharForward","deleteWordForward","deleteLineForward","setBlocks","setInlines","splitInline","unwrapBlock","unwrapInline","wrapBlock","wrapInline"].forEach(t=>{ke.prototype[t]=function(...e){let{value:r}=this,{selection:n}=r,o=`${t}AtRange`;return this[o](n,...e),t.match(/Backward$/)?this.collapseToStart():t.match(/Forward$/)&&this.collapseToEnd(),this}});["Forward","Backward"].forEach(t=>{let e=`moveAnchorChar${t}`,r=`moveFocusChar${t}`;ke.prototype[`moveChar${t}`]=function(){return this[e](),this[r](),this},ke.prototype[`moveStartChar${t}`]=function(){return this.value.isBackward?this[r]():this[e](),this},ke.prototype[`moveEndChar${t}`]=function(){return this.value.isBackward?this[e]():this[r](),this},ke.prototype[`extendChar${t}`]=function(){return this[`moveFocusChar${t}`](),this},ke.prototype[`collapseChar${t}`]=function(){return this[t==="Forward"?"collapseToEnd":"collapseToStart"](),this[`moveChar${t}`](),this}});[["collapseLineBackward","collapseToStartOfBlock"],["collapseLineForward","collapseToEndOfBlock"],["extendLineBackward","extendToStartOfBlock"],["extendLineForward","extendToEndOfBlock"]].forEach(([t,e])=>{ke.prototype[t]=function(...r){return this[e](...r),this}});["blur","collapseTo","collapseToAnchor","collapseToEnd","collapseToEndOf","collapseToFocus","collapseToStart","collapseToStartOf","extend","extendTo","extendToEndOf","extendToStartOf","flip","focus","move","moveAnchor","moveAnchorOffsetTo","moveAnchorTo","moveAnchorToEndOf","moveAnchorToStartOf","moveEnd","moveEndOffsetTo","moveEndTo","moveFocus","moveFocusOffsetTo","moveFocusTo","moveFocusToEndOf","moveFocusToStartOf","moveOffsetsTo","moveStart","moveStartOffsetTo","moveStartTo","moveTo","moveToEnd","moveToEndOf","moveToRangeOf","moveToStart","moveToStartOf","deselect"].forEach(t=>{ke.prototype[t]=function(...e){let r=t!=="deselect",{value:n}=this,{document:o,selection:a}=n,i=a[t](...e);return r&&(i=i.normalize(o)),this.select(i),this}});["moveTo","moveAnchorTo","moveFocusTo","moveStartTo","moveEndTo","collapseTo","extendTo"].forEach(t=>{let e=["Start","End"],r=["Next","Previous"],n=["Block","Inline","Text"];t==="moveTo"&&e.push("Range"),e.forEach(o=>{let a=`${t}${o}Of`;n.forEach(i=>{let s=i==="Text"?"getNode":`getClosest${i}`;ke.prototype[`${a}${i}`]=function(){let{value:u}=this,{document:c,selection:l}=u,h=c[s](l.startKey);return h?(this[a](h),this):this},r.forEach(u=>{let c=`get${u}${i}`,l=u==="Next"?"startKey":"endKey";ke.prototype[`${a}${u}${i}`]=function(){let{value:h}=this,{document:p,selection:d}=h,g=p[s](d[l]);if(!g)return this;let y=p[c](g.key);return y?(this[a](y),this):this}})})})});ke.prototype[U.CHANGE]=!0;f();function gx(t,e){let r=t.nodes.filter(e);if(!!r.size)return n=>{r.forEach(o=>{n.removeNodeByKey(o.key,{normalize:!1})})}}var ms=ze.create({validations:[t=>{if(t.object==="document")return gx(t,e=>e.object!=="block")},t=>{if(t.object!=="block")return;let e=t.nodes.first();if(!e)return;let r=e.object==="block"?["block"]:["inline","text"],n=t.nodes.filter(o=>!r.includes(o.object));if(!!n.size)return o=>{n.forEach(a=>{o.removeNodeByKey(a.key,{normalize:!1})})}},t=>{if(t.object!=="inline")return;let e=t.nodes.filter(r=>r.object!=="inline"&&r.object!=="text");if(!!e.size)return r=>{e.forEach(n=>{r.removeNodeByKey(n.key,{normalize:!1})})}},t=>{if(!(t.object!=="block"&&t.object!=="inline")&&!(t.nodes.size>0))return e=>{let r=L.create();e.insertNodeByKey(t.key,0,r,{normalize:!1})}},t=>{if(t.object!=="inline"&&t.object!=="block")return;let e=t.nodes.filter(r=>r.object==="inline"&&r.isEmpty);if(!!e.size)return r=>{if(t.nodes.size===e.size){let n=L.create();r.insertNodeByKey(t.key,1,n,{normalize:!1})}e.forEach(n=>{r.removeNodeByKey(n.key,{normalize:!1})})}},t=>{if(t.object!=="block"&&t.object!=="inline")return;let e=t.nodes.reduce((r,n,o)=>{if(n.object!=="inline")return r;let a=o>0?t.nodes.get(o-1):null,i=t.nodes.get(o+1),s=!a,u=!i||i.object==="inline";return(u||s)&&(r=r.push({insertAfter:u,insertBefore:s,index:o})),r},new S);if(!!e.size)return r=>{let n=0;e.forEach(({index:o,insertAfter:a,insertBefore:i})=>{i&&(r.insertNodeByKey(t.key,n+o,L.create(),{normalize:!1}),n++),a&&(r.insertNodeByKey(t.key,n+o+1,L.create(),{normalize:!1}),n++)})}},t=>{if(t.object!=="block"&&t.object!=="inline")return;let e=t.nodes.map((r,n)=>{let o=t.nodes.get(n+1);if(r.object==="text"&&!(!o||o.object!=="text"))return o}).filter(Boolean);if(!!e.size)return r=>{e.reverse().forEach(n=>{r.mergeNodeByKey(n.key,{normalize:!1})})}},t=>{if(t.object!=="block"&&t.object!=="inline")return;let{nodes:e}=t;if(e.size<=1)return;let r=e.filter((n,o)=>{if(n.object!=="text"||n.text.length>0)return;let a=o>0?e.get(o-1):null,i=e.get(o+1);if(!(!a&&i.object==="inline")&&!(!i&&a.object==="inline")&&!(i&&a&&i.object==="inline"&&a.object==="inline"))return!0});if(!!r.size)return n=>{r.forEach(o=>{n.removeNodeByKey(o.key,{normalize:!1})})}},t=>{if(t.object==="fragment")return gx(t,e=>e.object!=="block")},t=>{if(t.object==="fragment"&&!(t.nodes.size>0))return e=>{e.removeNodeByKey(t.key)}}]});var Vt=class extends M({data:ee.create(),document:ve.create(),history:jt.create(),schema:ze.create(),selection:oe.create()}){get object(){return"value"}get hasUndos(){return this.history.undos.size>0}get hasRedos(){return this.history.redos.size>0}get isBlurred(){return this.selection.isBlurred}get isFocused(){return this.selection.isFocused}get isCollapsed(){return this.selection.isCollapsed}get isExpanded(){return this.selection.isExpanded}get isBackward(){return this.selection.isBackward}get isForward(){return this.selection.isForward}get startKey(){return this.selection.startKey}get endKey(){return this.selection.endKey}get startOffset(){return this.selection.startOffset}get endOffset(){return this.selection.endOffset}get anchorKey(){return this.selection.anchorKey}get focusKey(){return this.selection.focusKey}get anchorOffset(){return this.selection.anchorOffset}get focusOffset(){return this.selection.focusOffset}get startBlock(){return this.startKey&&this.document.getClosestBlock(this.startKey)}get endBlock(){return this.endKey&&this.document.getClosestBlock(this.endKey)}get anchorBlock(){return this.anchorKey&&this.document.getClosestBlock(this.anchorKey)}get focusBlock(){return this.focusKey&&this.document.getClosestBlock(this.focusKey)}get startInline(){return this.startKey&&this.document.getClosestInline(this.startKey)}get endInline(){return this.endKey&&this.document.getClosestInline(this.endKey)}get anchorInline(){return this.anchorKey&&this.document.getClosestInline(this.anchorKey)}get focusInline(){return this.focusKey&&this.document.getClosestInline(this.focusKey)}get startText(){let e=this.startKey&&this.document.getDescendant(this.startKey);return e?Zt(e):null}get endText(){let e=this.endKey&&this.document.getDescendant(this.endKey);return e?Zt(e):null}get anchorText(){let e=this.anchorKey&&this.document.getDescendant(this.anchorKey);return e?Zt(e):null}get focusText(){let e=this.focusKey&&this.document.getDescendant(this.focusKey);return e?Zt(e):null}get nextBlock(){let e=this.endKey&&this.document.getNextBlock(this.endKey);return e?Zt(e):null}get previousBlock(){let e=this.startKey&&this.document.getPreviousBlock(this.startKey);return e?Zt(e):null}get nextText(){return this.endKey&&this.document.getNextText(this.endKey)}get previousText(){return this.startKey&&this.document.getPreviousText(this.startKey)}get marks(){return this.selection.isUnset?F():this.selection.marks||this.document.getMarksAtRange(this.selection)}get activeMarks(){return this.selection.isUnset?F():this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}get blocks(){return this.selection.isUnset?S():this.document.getBlocksAtRange(this.selection)}get fragment(){return this.selection.isUnset?ve.create():this.document.getFragmentAtRange(this.selection)}get inlines(){return this.selection.isUnset?S():this.document.getInlinesAtRange(this.selection)}get texts(){return this.selection.isUnset?S():this.document.getTextsAtRange(this.selection)}get isEmpty(){return this.isCollapsed?!0:this.endOffset!==0&&this.startOffset!==0?!1:this.fragment.isEmpty}get isInVoid(){return this.selection.isUnset||this.isExpanded?!1:this.document.hasVoidParent(this.startKey)}static create(e={},r={}){if(Vt.isValue(e))return e;let{data:n={},document:o=ve.create(),selection:a=oe.create(),schema:i=ze.create(),history:s=jt.create()}=e,u=ee.create(n);if(a.isUnset){let l=o.getFirstText();l&&(a=a.collapseToStartOf(l))}let c=new Vt({data:u,document:o,selection:a,schema:ms.combineWith(i),history:s});return r.normalize!==!1&&(c=c.change({save:!1}).normalize().value),c}static isValue(e){return!!(e&&e[U.VALUE])}change(e={}){return new ke(k(_({},e),{value:this}))}setSchema(e){return this.merge({schema:ms.combineWith(e)})}hasInline(e){return this.inlines.some(r=>r.type===e)}hasBlock(e){return this.blocks.some(r=>r.type===e)}};Vt.prototype[U.VALUE]=!0;function Oe(t){switch(t.object||t.kind){case"mark":return z.create({type:t.type,data:t.data});case"leaf":return B.create({text:t.text,marks:t.marks.map(e=>Oe(e))});case"text":return L.create(k(_({},t),{leaves:t.leaves?t.leaves.map(e=>Oe(e)):t.ranges.map(e=>Oe(k(_({},e),{kind:"leaf"})))}));case"inline":return ae.create(k(_({},t),{nodes:t.nodes.map(e=>Oe(e))}));case"fragment":return Fe.create(k(_({},t),{nodes:t.nodes.map(e=>Oe(e))}));case"block":return G.create(k(_({},t),{fragments:t.fragments?t.fragments.map(e=>Oe(e)):[],nodes:t.nodes.map(e=>Oe(e))}));case"document":return ve.create(k(_({},t),{nodes:t.nodes.map(e=>Oe(e))}));case"range":return oe.create(t);case"value":return Vt.create({document:Oe(t.document),data:ee.create(t.data||{}),selection:t.selection?Oe(t.selection):void 0});case"operation":return qD(t);default:$t(t)}}function pe(t,e){if(S.isList(t)||F.isSet(t))return t.toArray().map(r=>pe(r,e));switch(t.object){case"mark":return{object:t.object,type:t.type,data:t.data.toJS()};case"leaf":return{object:t.object,text:t.text,marks:t.marks.toArray().map(r=>pe(r)),selections:t.selections.toArray().map(r=>pe(r))};case"text":return _({object:t.object,leaves:t.getLeaves().toArray().map(r=>pe(r))},(e==null?void 0:e.preserveKeys)&&{key:t.key});case"inline":return _({object:t.object,type:t.type,isVoid:t.isVoid,data:t.data.toJS(),nodes:t.nodes.toArray().map(r=>pe(r,e))},(e==null?void 0:e.preserveKeys)&&{key:t.key});case"fragment":return _(_(_({object:t.object,nodes:t.nodes.toArray().map(r=>pe(r,e))},(e==null?void 0:e.preserveKeys)&&{key:t.key}),t.fragment&&{fragment:t.fragment}),t.type&&{type:t.type});case"block":return _(_({object:t.object,type:t.type,isVoid:t.isVoid,data:t.data.toJS(),nodes:t.nodes.toArray().map(r=>pe(r,e))},(e==null?void 0:e.preserveKeys)&&{key:t.key}),t.fragments.size?{fragments:t.fragments.toArray().map(([r,n])=>pe(n,e))}:{});case"document":return _({object:t.object,data:t.data.toJS(),nodes:t.nodes.toArray().map(r=>pe(r,e))},(e==null?void 0:e.preserveKeys)&&{key:t.key});case"range":return{object:t.object,anchorKey:t.anchorKey,anchorOffset:t.anchorOffset,focusKey:t.focusKey,focusOffset:t.focusOffset,isBackward:t.isBackward,isFocused:t.isFocused,isAtomic:t.isAtomic,marks:t.marks==null?null:t.marks.toArray().map(r=>pe(r)),data:t.data.toJS()};case"value":return DD(t,e);case"operation":return BD(t,e);default:$t(t)}}function DD(t,e){let r=_({object:t.object,document:pe(t.document,e)},(e==null?void 0:e.preserveDataValue)&&{data:t.data.toJS()});if((e==null?void 0:e.preserveSelection)&&!(e==null?void 0:e.preserveKeys)){let{document:n,selection:o}=t;r.selection=pe(t.selection),r.selection.anchorPath=o.isSet?n.getPath(o.anchorKey):null,r.selection.focusPath=o.isSet?n.getPath(o.focusKey):null,delete r.selection.anchorKey,delete r.selection.focusKey}return r}function BD(t,e){switch(t.type){case"insert_text":case"remove_text":return{object:"operation",type:t.type,path:t.path,offset:t.offset,text:t.text,marks:t.marks.toArray().map(r=>pe(r,e))};case"add_mark":case"remove_mark":return{object:"operation",type:t.type,path:t.path,offset:t.offset,length:t.length,mark:pe(t.mark,e)};case"set_mark":return{object:"operation",type:t.type,path:t.path,offset:t.offset,length:t.length,mark:pe(t.mark,e),properties:t.properties};case"insert_node":case"remove_node":return{object:"operation",type:t.type,path:t.path,node:pe(t.node,e)};case"move_node":return{object:"operation",type:t.type,path:t.path,newPath:t.newPath};case"merge_node":case"split_node":return{object:"operation",type:t.type,path:t.path,position:t.position,properties:t.properties,target:t.target};case"set_node":return{object:"operation",type:t.type,path:t.path,node:pe(t.node,e),properties:t.properties};case"insert_fragment":case"set_fragment":case"remove_fragment":return k(_({object:"operation",type:t.type,path:t.path},t.fragmentPath?{fragmentPath:t.fragmentPath}:{}),{node:pe(t.node,e)});case"set_value_data":return{object:"operation",type:t.type,data:t.data.toJS(),previousData:t.previousData.toJS()};case"insert_data":case"remove_data":return{object:"operation",type:t.type,path:t.path,dataPath:t.dataPath,data:t.data};case"insert_array_data":case"remove_array_data":return{object:"operation",type:t.type,path:t.path,dataPath:t.dataPath,data:t.data,dataIndex:t.dataIndex};case"set_selection":return{object:"operation",type:t.type,selection:pe(t.selection),properties:t.properties};case"set_document":return{object:"operation",type:t.type,data:pe(t.data)};default:$t(t)}}function qD(t){switch(t.type){case"insert_text":case"remove_text":return b.create({type:t.type,path:t.path,offset:t.offset,text:t.text,marks:z.createSet(t.marks.map(e=>Oe(e)))});case"add_mark":case"remove_mark":return b.create({type:t.type,path:t.path,offset:t.offset,length:t.length,mark:Oe(t.mark)});case"set_mark":return b.create({type:t.type,path:t.path,offset:t.offset,length:t.length,mark:Oe(t.mark),properties:t.properties});case"insert_node":case"remove_node":return b.create({type:t.type,path:t.path,node:Oe(t.node)});case"move_node":return b.create({type:t.type,path:t.path,newPath:t.newPath});case"merge_node":case"split_node":return b.create({type:t.type,path:t.path,position:t.position,properties:t.properties,target:t.target});case"set_node":return b.create({type:t.type,path:t.path,node:Oe(t.node),properties:t.properties});case"insert_fragment":case"set_fragment":case"remove_fragment":return b.create(k(_({type:t.type,path:t.path},t.fragmentPath?{fragmentPath:t.fragmentPath}:{}),{node:Oe(t.node)}));case"set_value_data":return b.create({type:t.type,data:ee.create(t.data),previousData:ee.create(t.previousData)});case"insert_data":case"remove_data":return b.create({type:t.type,path:t.path,dataPath:t.dataPath,data:t.data});case"insert_array_data":case"remove_array_data":return b.create({type:t.type,path:t.path,dataPath:t.dataPath,data:t.data,dataIndex:t.dataIndex});case"set_selection":return b.create({type:t.type,selection:Oe(t.selection),properties:t.properties});case"set_document":return b.create({type:t.type,data:Oe(t.data)});default:$t(t)}}f();var uk=me(kr());f();var ak=me(tk());f();var IB={slate:{nested:{Document:{fields:{key:{type:"string",id:1},nodes:{rule:"repeated",type:"slate.Block",id:2},data:{keyType:"string",type:"string",id:3}}},Block:{fields:{key:{type:"string",id:1},type:{type:"string",id:2},nodes:{rule:"repeated",type:"slate.Node",id:3},fragments:{rule:"repeated",type:"slate.Fragment",id:4},data:{keyType:"string",type:"string",id:5},isVoid:{type:"bool",id:6}}},Node:{oneofs:{node:{oneof:["inline","text","block"]}},fields:{inline:{type:"slate.Inline",id:1},text:{type:"slate.Text",id:2},block:{type:"slate.Block",id:3}}},Fragment:{fields:{key:{type:"string",id:1},fragment:{type:"string",id:2},type:{type:"string",id:3},nodes:{rule:"repeated",type:"slate.Block",id:4}}},Inline:{fields:{key:{type:"string",id:1},type:{type:"string",id:2},nodes:{rule:"repeated",type:"slate.Node",id:3},data:{keyType:"string",type:"string",id:4},isVoid:{type:"bool",id:6}}},Text:{fields:{key:{type:"string",id:1},leaves:{rule:"repeated",type:"slate.TextLeaf",id:2}}},TextLeaf:{fields:{text:{type:"string",id:1},marks:{rule:"repeated",type:"slate.Mark",id:2}}},Mark:{fields:{type:{type:"string",id:1},data:{keyType:"string",type:"string",id:2}}}}}},nk={nested:IB};var ok=nk;var RB=ak.Root.fromJSON(ok),Wo=RB.lookupType("slate.Document");function V4(t,e={}){let r=CB(t,e),n=Wo.verify(r);if(n)throw new Error(`ProtoBufObject document is not valid: ${n}`);let o=Wo.create(r);return Wo.encode(o).finish()}function J4(t){let r=Wo.decode(t).toJSON();return MB(r)}function CB(t,e){return k(_({},e.preserveKeys?{key:t.key}:{}),{nodes:t.nodes.map(r=>cu(r,e)).toArray(),data:Xo(t.data)})}function wB(t,e){return _(_(_({nodes:t.nodes.toArray().map(r=>cu(r,e))},(e==null?void 0:e.preserveKeys)&&{key:t.key}),t.fragment&&{fragment:t.fragment}),t.type&&{type:t.type})}function cu(t,e){return k(_({},e.preserveKeys?{key:t.key}:{}),{type:t.type,isVoid:t.isVoid,nodes:t.nodes.map(r=>ik(r,e)).toArray(),fragments:t.fragments.map(r=>wB(r,e)).valueSeq().toArray(),data:Xo(t.data)})}function FB(t,e){return k(_({},e.preserveKeys?{key:t.key}:{}),{type:t.type,isVoid:t.isVoid,nodes:t.nodes.map(r=>ik(r,e)).toArray(),data:Xo(t.data)})}function EB(t,e){return k(_({},e.preserveKeys?{key:t.key}:{}),{leaves:t.leaves.map(r=>PB(r)).toArray()})}function PB(t){return{text:t.text,marks:t.marks.map(e=>({type:e.type,data:Xo(e.data)})).toArray()}}function ik(t,e){switch(t.object){case"block":return{block:cu(t,e)};case"text":return{text:EB(t,e)};case"inline":return{inline:FB(t,e)};default:$t(t)}}function Xo(t){return t.filter(e=>e!==void 0).map((e,r)=>JSON.stringify(e)).toObject()}function MB(t){return ve.create({key:t.key,nodes:(t.nodes||[]).map(e=>fu(e)),data:Zo(t.data||{})})}function fu(t){return G.create({key:t.key,type:t.type,isVoid:t.isVoid,nodes:(t.nodes||[]).map(e=>sk(e)),fragments:(t.fragments||[]).map(e=>zB(e)),data:Zo(t.data||{})})}function DB(t){return ae.create({key:t.key,type:t.type,isVoid:t.isVoid,nodes:(t.nodes||[]).map(e=>sk(e)),data:Zo(t.data||{})})}function BB(t){return L.create({key:t.key,leaves:(t.leaves||[]).map(e=>qB(e))})}function sk(t){if("block"in t)return fu(t.block);if("inline"in t)return DB(t.inline);if("text"in t)return BB(t.text);throw new Error("Unrecognized node type")}function qB(t){return B.create({text:t.text,marks:(t.marks||[]).map(e=>z.create({type:e.type,data:Zo(e.data||{})}))})}function zB(t){return Fe.create({key:t.key,fragment:t.fragment,nodes:(t.nodes||[]).map(e=>fu(e)),type:t.type})}function Zo(t){return ee.create(Object.keys(t).map(e=>{let r=t[e],n=JSON.parse(r);return[e,n]}))}export{Re as a,S as b,M as c,LB as d,kr as e,Ha as f,ne as g,ee as h,Yn as i,z as j,oe as k,B as l,L as m,G as n,gf as o,Fe as p,ae as q,b as r,ve as s,ji as t,Vi as u,Ji as v,Gi as w,Wi as x,Qi as y,rs as z,ns as A,as as B,ze as C,Vt as D,Oe as E,pe as F,V4 as G,J4 as H};
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
/*! https://mths.be/esrever v0.2.0 by @mathias */
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/chunk-RC67YS5E.min.js.map
